<apex:page standardController="Deployment_Request__c">
<head>
    <style>
    * {
        box-sizing: border-box;
    }

    #progress {
        padding: 0;
        list-style-type: none;
        font-family: arial;
        font-size: 12px;
        clear: both;
        line-height: 1em;
        margin: 0 -1px;
        text-align: center;
    }

    #progress li {
        float: left;
        padding: 10px 30px 10px 40px;
        background: #E6E6E6;
        color: #fff;
        position: relative;
        border-top: 1px solid #E6E6E6;
        border-bottom: 1px solid #E6E6E6;
        width: 12%;
        margin: 0 1px;
    }

    #progress li:before {
        content: '';
        border-left: 16px solid #E6E6E6;
        border-top: 16px solid transparent;
        border-bottom: 16px solid transparent;
        position: absolute;
        top: 0;
        left: 0;

    }
    #progress li:after {
        content: '';
        border-left: 16px solid #E6E6E6;
        border-top: 16px solid transparent;
        border-bottom: 16px solid transparent;
        position: absolute;
        top: 0;
        left: 100%;
        z-index: 20;
    }

    #progress li.active {
        background: #0070D2;
    }

    #progress li.active:after {
        border-left-color: #0070D2;
    }

    #progress li.done {
        background: #4BCA81;
    }

    #progress li.done:after {
        border-left-color: #4BCA81;
    }
    
    #progress li.noDisplay{
        display:none;
    }
    
    #progress li.highlightRed{
        background: red;
    }
    #progress li.highlightRed:after {
        border-left-color: red;
    }

    #progress1 li.highlightRed{
        background: red;
    }
    #progress1 li.highlightRed:after {
        border-left-color: red;
    }
    
    #progress1 {
        padding: 0;
        list-style-type: none;
        font-family: arial;
        font-size: 12px;
        clear: both;
        line-height: 1em;
        margin: 0 -1px;
        text-align: center;
    }

    #progress1 li {
        float: left;
        padding: 10px 30px 10px 40px;
        background: #E6E6E6;
        color: #fff;
        position: relative;
        border-top: 1px solid #E6E6E6;
        border-bottom: 1px solid #E6E6E6;
        width: 14%;
        margin: 0 1px;
    }

    #progress1 li:before {
        content: '';
        border-left: 16px solid #E6E6E6;
        border-top: 16px solid transparent;
        border-bottom: 16px solid transparent;
        position: absolute;
        top: 0;
        left: 0;

    }
    #progress1 li:after {
        content: '';
        border-left: 16px solid #E6E6E6;
        border-top: 16px solid transparent;
        border-bottom: 16px solid transparent;
        position: absolute;
        top: 0;
        left: 100%;
        z-index: 20;
    }

    #progress1 li.active {
        background: #0070D2;
    }

    #progress1 li.active:after {
        border-left-color: #0070D2;
    }

    #progress1 li.done {
        background: #4BCA81;
    }

    #progress1 li.done:after {
        border-left-color: #4BCA81;
    }
    </style>
</head>
<apex:outputPanel id="statusPanelId" rendered="{!IF(Deployment_Request__c.Target_Environment_txt__c = 'Production',true, false)}">
    <ul id="progress">
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Draft', Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active', 'done')}">Draft</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'EBiZ/FBO Review', Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active',IF(AND(Deployment_Request__c.Rejected_Stage__c == 'EBiZ/FBO Review', Deployment_Request__c.Target_Environment_txt__c == 'Production'),'highlightRed','done'))}">EBiZ/FBO Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Test Review',Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active',IF(AND(Deployment_Request__c.Rejected_Stage__c == 'Test Review', Deployment_Request__c.Target_Environment_txt__c == 'Production'),'highlightRed','done'))}">Test Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'SOD Review',Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active', IF(AND(Deployment_Request__c.Rejected_Stage__c == 'SOD Review', Deployment_Request__c.Target_Environment_txt__c == 'Production'),'highlightRed','done'))}">SOD Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'CAB Review',Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active', IF(AND(Deployment_Request__c.Rejected_Stage__c == 'CAB Review', Deployment_Request__c.Target_Environment_txt__c == 'Production'),'highlightRed','done'))}">CAB Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Approved',Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active', 'done')}">Approved</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Deployed',Deployment_Request__c.Target_Environment_txt__c == 'Production'),'active', 'done')}">Deployed</li>
        <!--<li class="{!IF(Deployment_Request__c.Target_Environment_txt__c == 'Production','active', 'done')}"><apex:outputLabel rendered="{!IF(Deployment_Request__c.Stage_txt__c == 'Closed', 'true', 'false')}" value="Closed"/><apex:outputLabel rendered="{!IF(Deployment_Request__c.Stage_txt__c == 'Rejected', 'true','false')}" value="Rejected"/></li>-->
        <li class="{!IF(AND(Deployment_Request__c.Target_Environment_txt__c == 'Production',Deployment_Request__c.Stage_txt__c == 'Closed'),'active', IF(AND(Deployment_Request__c.Target_Environment_txt__c == 'Production',Deployment_Request__c.Stage_txt__c == 'Rejected'),'highlightRed','done'))}"><apex:outputLabel value="{!IF(Deployment_Request__c.Stage_txt__c != 'Rejected', 'Closed', 'Rejected')}"/></li>
    </ul>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(Deployment_Request__c.Target_Environment_txt__c = 'UAT',true, false)}">
    <ul id="progress1">        
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Draft', Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active', 'done')}">Draft</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'TFA Review', Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active',IF(AND(Deployment_Request__c.Rejected_Stage__c == 'TFA Review', Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'highlightRed','done'))}">TFA Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'TA Review',Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active',IF(AND(Deployment_Request__c.Rejected_Stage__c == 'TA Review', Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'highlightRed','done'))}">TA Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'CAB Review',Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active', IF(AND(Deployment_Request__c.Rejected_Stage__c == 'CAB Review', Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'highlightRed','done'))}">CAB Review</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Approved',Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active', 'done')}">Approved</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Deployed',Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active', 'done')}">Deployed</li>
        <li class="{!IF(AND(Deployment_Request__c.Stage_txt__c == 'Closed',Deployment_Request__c.Target_Environment_txt__c == 'UAT'),'active', IF(AND(Deployment_Request__c.Target_Environment_txt__c == 'UAT',Deployment_Request__c.Stage_txt__c == 'Rejected'),'highlightRed','done'))}"><apex:outputLabel value="{!IF(Deployment_Request__c.Stage_txt__c != 'Rejected', 'Closed', 'Rejected')}"/></li>
    </ul>
</apex:outputPanel>                
</apex:page>