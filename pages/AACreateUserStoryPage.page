<apex:page showHeader="false" sidebar="false" standardController="Case" extensions="AACreateUserStoryFromCaseExt">
	<script>
		function assignToThisTeam(teamId){
			createUserStory(teamId);
			try{
				window.opener.postMessage('reload', '*');
			}catch(err){
				window.close();
			}
		}
	</script>
	<apex:form >
	<apex:actionFunction name="createUserStory" action="{!createUserStory}" reRender="">
		<apex:param name="teamId" assignTo="{!assignToThisTeam}" value=""/>
	</apex:actionFunction>
    <apex:pageBlock >
        <apex:pageBlockSection title="My Teams" columns="1">
            <apex:pageBlockTable value="{!myteams}" var="myteam">
                <apex:column >
                	<button type="button" onclick="assignToThisTeam('{!myteam.agf__Scrum_Team__c}')">Assign</button>
                </apex:column>
                <apex:column value="{!myteam.agf__Scrum_Team__r.Name}"/>
            </apex:pageBlockTable>
        </apex:pageBlockSection>
    
        <apex:pageBlockSection title="Other Teams" columns="1">
            <apex:pageBlockTable value="{!teams}" var="team">
                <apex:column >
                	<button type="button" onclick="assignToThisTeam('{!team.Id}'); return false;">assign</button>
                </apex:column>
                <apex:column value="{!team.Name}"/>
            </apex:pageBlockTable>
        </apex:pageBlockSection>
    </apex:pageBlock>
    </apex:form>
</apex:page>