<!--
Author        : Poulami Saha
Date Created  : 18/08/2016
Description   : This page is used to select task assignee.
-->
<apex:page controller="BNPTaskAssigneeLookupCtrl" sidebar="false" showHeader="false">
<style>
    .outerdiv {
        background-repeat: repeat-x;
        background-position: left top;
        background: white url(/img/alohaSkin/lookup_bg.png) repeat-x;
        padding-left: 10px;
        height: 100%;
    }
     
    .innerdiv {
        background-image: url(/img/sprites/master.png);
        background-position: 0px -1202px;
        width: 32px;
        height: 32px;
    }  
        
</style>
<script language="javascript">
   window.onload = new function() 
   { 
      // bring popup window to front
      window.focus(); 
      var ele=document.getElementById('{!$Component.form.block.section.query}');
      if (ele)
      {
         ele.focus();
      }
   }
   
   function fillIn(name, id)
   {
      var winMain=window.opener;
      if (null==winMain)
      {
         winMain=window.parent.opener;
      }
      var ele=winMain.document.getElementById('{!$CurrentPage.parameters.namefield}');
      ele.value=name;
      ele=winMain.document.getElementById('{!$CurrentPage.parameters.idfield}');
      ele.value=id;
      CloseWindow();
   }

   function CloseWindow()
   {
      var winMain=window.opener;
      if (null==winMain)
      {
         winMain=window.parent.opener;
      }
      winMain.closeLookupPopup();
   }
</script>
  
  <apex:form id="form" >  
        
     <div class="outerdiv">
          <div class="innerdiv"></div>
                <div style="float: left; width: 50px; margin-top: -20px; margin-left: 40px">
                    <h1>Lookup</h1>
                </div> 
                <apex:pageMessages id="msgId"/>
         
          <div class="pbBody">                   
                <table class="list" border="0" id="tblData" cellspacing="0" cellpadding="0" style="border: #DDD 1px solid;width:50%;">
                    <tr class="headerRow" >
                        <th>
                            &nbsp;
                        </th>
                        <th>
                            <b>User/Group Name</b>
                        </th>
                        
                    </tr>
                    <tr>
                        <td>
                            <b>Search:</b>
                        </td>
                        <td>
                            <apex:inputText value="{!query}" id="query" onkeyup="onSearch();"/>    
                            <apex:commandButton value="Go" action="{!runQuery}"/>
                        </td> 
                                                                                       
                    </tr>
                </table>
            </div>
            <br/>
        <div class="pbBody">
                <h2 style="padding-bottom: 5px; padding-top: 5px;">Search Results</h2>
        </div>

        <apex:pageBlock >
            <apex:pageBlockSection columns="1">
                <apex:pageBlockTable value="{!userList}" var="usr" rendered="{!userList != null}">
                    <apex:column headerValue="User/Group Name">
                        <apex:outputLink value="#" onclick="fillIn('{!usr.Name}', '{!usr.id}')">{!usr.Name}</apex:outputLink>       
                    </apex:column>
                    <!--<apex:column headerValue="First Name" value="{!usr.Name}"/>-->

                </apex:pageBlockTable>
                <apex:pageBlockTable value="{!grpList}" var="grp" rendered="{!grpList != null}">
                    <apex:column headerValue="User/Group Name">
                        <apex:outputLink value="#" onclick="fillIn('{!grp.Name}', '{!grp.id}')">{!grp.Name}</apex:outputLink>       
                    </apex:column>
                    <!--<apex:column headerValue="First Name" value="{!grp.Name}"/>-->

                </apex:pageBlockTable>
            </apex:pageBlockSection>
        </apex:pageBlock>
        <button type="button" onclick="CloseWindow();">Close Window</button>
     </div>
   </apex:form>


</apex:page>