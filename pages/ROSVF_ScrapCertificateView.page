<apex:page controller="ROS_ScrapCertificateView" id="thePage" sidebar="{!showHeaderSidebar}" showHeader="{!showHeaderSidebar}" readOnly="true"  tabStyle="Reticle__c" >
 <apex:includeScript value="{!$Resource.JqueryD}"/>
        <apex:includeScript value="{!$Resource.JqueryDatatable}"/>
        <apex:Stylesheet value="{!$Resource.JqueryDatatableCSS}"/>
        <script>
        j$ = jQuery.noConflict();
         j$(document).ready( function () {
            j$().DataTable();
            });
            
            function addSearchBox(){
            j$('[id$="devTable"]').DataTable({});
            }
        
        </script>
        <style>
    html .brandTertiaryBgr {
        background-color: #B7B7B7  !important;
        background-image: none !important;
        color: #222222 !important;
    }
    .ui-menu{ position: absolute; width: 100px; }      
    .firstColumn { text-align:left; }
    .middleColumn { text-align:center; }
    .lastColumn { text-align:right; }
    .prevNextLinks a {
        color: rgb(51, 51, 51);
        text-decoration: none;
    }       
    .prevNextLinks {
        color: rgb(168, 168, 168);
    }
    .prevNext {
        margin: 0px 3px;
    }
    
    .dataTables_filter {
display: none; 
}
    </style>
        
    <apex:form id="theForm">
        <apex:pageBlock id="theBlock1" >
            <apex:pageBlockButtons location="top" id="theButtons">
                <apex:commandButton value="Search" action="{!Search}" reRender="thePnl1,thePBlock2,theTable,buttonPanel,pageMessages" status="LoadingStatusSpinner" oncomplete="addSearchBox();"  />
                <apex:commandButton value="Back" action="{!ViewRosVF}"  status="LoadingStatusSpinner"/>
            </apex:pageBlockButtons>
            <apex:pageBlockSection columns="4" title="Search for Scrap Certificates" id="thePBlock1" >
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Account"/>
                    <apex:inputText value="{!accountName}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Reticle Id"/>
                    <apex:inputText value="{!retName }" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Cycle"/> 
                    <apex:selectList id="rosCycles" value="{!rosCycle}" size="1">
                        <apex:selectOptions value="{!rosCycles}"/>
                    </apex:selectList>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
         <apex:outputPanel id="thePnl1" >
          <apex:pageBlockSection title="Scrap Certificate Results" id="thePBlock2" columns="1"> 
           <apex:pageBlockTable value="{!list_DisplayRet}" var="rt" style="font-size:10px" headerClass="header" id="devTable" width="100%" >
            <apex:column value="{!rt.Account__r.name}" headerValue="Account"/>
            <apex:column value="{!rt.name}" headerValue="Reticle"/>
            <apex:column value="{!rt.Disposal_Certificate__r.Scrap_Date__c}" headerValue="Scrap Date"/>
             <apex:column headerValue="Attachments">
             <apex:repeat value="{!attMap[rt.Disposal_Certificate__r]}" var="map">
              <apex:outputLink value="{!URLFOR($Action.Attachment.Download, map)}" target="_blank">
               <apex:outputLabel value="{!rt.Disposal_Certificate__r.name}"/>
              </apex:outputLink>
              </apex:repeat>
            </apex:column>
            </apex:pageBlockTable>
            </apex:pageblockSection>
            </apex:outputPanel>
            <apex:pageMessages id="pageMessages"></apex:pageMessages>
        </apex:pageBlock>
    </apex:form>
</apex:page>