<!-- 
   Type Name: QueueMembers.page
   Author: Cognizant Case Mgmt Team
   Created Date: 23-Mar-2015
   Reason: 
   Change History:
   Author: 
   Modified Date: 
   Reason: 
   -->
<apex:page controller="QueueMembersController" cache="false" title="Queue Members" sidebar="false" docType="html-5.0" showChat="false">
   <apex:form id="mainForm">
      <apex:pageMessages />
      <table>
         <tr >
            <td>
               <b>Object:&nbsp;{!IF(objectName=='','All',objectName)}</b>
            </td>
         </tr>
      </table>
      <apex:tabPanel width="100%" height="100%" switchType="client" selectedTab="tabdetails" id="TabPanelQueue" tabClass="activeTab" inactiveTabClass="inactiveTab">
         <apex:tab label="Find Your Members Queue" name="myTeam" id="tabmyTeam">
            <apex:outputPanel layout="block" style="max-height:350px;overflow:auto;" >
               <apex:pageBlock id="mainPageBlock2" >
                  <table>
                     <tr >
                        <td>
                           <b>Member Name:&nbsp;</b>
                           <apex:inputText value="{!fullname}" />
                           &nbsp;&nbsp;&nbsp;&nbsp;
                           <apex:commandButton value="Search" action="{!searchUser}" reRender="mainForm" />
                        </td>
                     </tr>
                  </table>
                  <apex:variable var="rowCounter" value="1"/>
                  <apex:pageBlockTable value="{!userList}" var="acc" >
                     <apex:column headerValue="#">
                        <apex:outputText value="{!rowCounter}"/>
                        <apex:variable var="rowCounter" value="{!VALUE(rowCounter) + 1}"/>
                     </apex:column>
                     <apex:column headerValue="Name">
                        <apex:outputLink value="/{!acc.User.Id}" target="_blank">{!acc.User.firstName} {!acc.User.lastName}</apex:outputlink>
                     </apex:column>
                     <apex:column headerValue="Email" value="{!acc.User.Email}"/>
                     <apex:column headerValue="Role" value="{!acc.User.userRole.name}"/>
                     <apex:column headerValue="Profile" value="{!acc.User.Profile.name}"/>
                     <apex:column value="{!acc.User.isactive}" headerValue="Active"/>
                     <apex:column headerValue="Queue Name" value="{!acc.GroupName}"/>
                     <apex:column headerValue="Related Object" value="{!acc.groupRelatedObject}"/>
                  </apex:pageBlockTable>
               </apex:pageBlock>
            </apex:outputPanel>
         </apex:tab>
         <apex:tab label="Find Your Queue Members" name="queueMembers" id="tabqueueMembers">
            <apex:outputPanel layout="block" style="max-height:350px;overflow:auto;" >
               <apex:pageBlock id="mainPageBlock" >
                  <apex:outputpanel >
                     <table>
                        <tr>
                           <td>
                              <b>Queue:&nbsp;</b>
                              <apex:selectList value="{!queueId}" size="1" id="ctrQueue">
                                 <apex:selectOptions value="{!queueOptions}"/>
                                 <apex:actionSupport event="onchange" action="{!refresh}" reRender="mainForm"/>
                              </apex:selectList>
                           </td>
                        </tr>
                     </table>
                  </apex:outputpanel>
                  <apex:variable var="rowCounter" value="1"/>
                  <apex:pageBlockTable value="{!queueMembers}" var="user" rendered="{!(queueId != null)}" >
                     <apex:column headerValue="#">
                        <apex:outputText value="{!rowCounter}"/>
                        <apex:variable var="rowCounter" value="{!VALUE(rowCounter) + 1}"/>
                     </apex:column>
                     <apex:column headerValue="Name">
                        <apex:outputLink value="/{!user.Id}" target="_blank">{!user.firstName} {!user.lastName}</apex:outputlink>
                     </apex:column>
                     <apex:column value="{!user.alias}" headerValue="Alias"/>
                     <apex:column value="{!user.username}" headerValue="User Name"/>
                     <apex:column value="{!user.email}" headerValue="Email"/>
                     <apex:column value="{!user.userRole.name}" headerValue="Role"/>
                     <apex:column value="{!user.profile.name}" headerValue="Profile"/>
                     <apex:column value="{!user.isactive}" headerValue="Active"/>
                  </apex:pageBlockTable>
               </apex:pageBlock>
            </apex:outputPanel>
         </apex:tab>
      </apex:tabPanel>
   </apex:form>
</apex:page>