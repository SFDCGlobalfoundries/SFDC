<!-- 
Type Name: VFSendMeetingNotesList.page
Author: Cognizant 
Created Date: 05-June-2013
Reason: This Page is used for sending meeting mitunes from the related list of the team room meeting record.
Change History:
Author: 
Modified Date: 
Reason: 
 -->

<apex:page standardController="Team_Room_Meeting__c" extensions="clsSendMeetingNotesSelectPage">
    <apex:form >
    <apex:pageMessages ></apex:pageMessages>
        <apex:pageBlock >       
            <apex:pageBlockSection columns="1">            
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="To :" for="To address of send email"/>   
                    <!-- This section generates related users from the team room meeting record. -->                 
                    <apex:repeat value="{!wrapper}" var="w" id="wp">
                        <apex:outputlabel value="{!w.name} <{!w.Email}>"/ > 
                        <!-- This section is responsible for the remove users functionality -->
                        <apex:commandLink action="{!removeUser}"> 
                            <apex:image value="/img/func_icons/remove12_on.gif" /> 
                            <apex:param name="countRow" value="{!w.count}"/>
                        </apex:commandLink>
                        <br></br>                                           
                    </apex:repeat>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>   
            <apex:pageBlockSection columns="3">
                <!-- This section is responsible for adding additional emails to the existing users. -->
                <apex:pageBlockSectionItem >
                <apex:outputLabel value="New Email(s):" for="To add new Invitee to send email"/>
                <apex:outputPanel >
                    <apex:inputTextarea id="New_Invitee" style="width:210px;" value="{!NewEmail}"/>                   
                    <apex:commandButton value="Add Email Address" action="{!addNewUser}"/>
                    <!-- <apex:commandLink value="Additional To"  action="{!additionalUser}"/> -->
                </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection> 
            <!-- Attachment Section --> 
            <apex:outputpanel >
                <apex:repeat value="{!lstatt}" var="att">
                <apex:inputfile style="margin-left:19%"  value="{!att.body}" filename="{!att.name}" id="newfile"></apex:inputfile>
                <br/>
                </apex:repeat>  
                <apex:commandbutton style="margin-left:19%" value="Add More" action="{!addmore}" disabled="{!limitAttachment}"/>       
            </apex:outputpanel>
            <!-- generates the subject in the VF page -->
            <apex:pageBlockSection columns="1">
                <apex:outputField value="{!trm.Subject__c}"/>            
            </apex:pageBlockSection> 
            <!-- generates the meeting notes in the VF page -->
            <apex:pageBlockSection columns="1">
                <apex:inputField value="{!MeetingOcc.Meeting_Notes__c}"/>
            </apex:pageBlockSection>
            
            
            <!-- button section -->
            <apex:pageBlockButtons >
                    <apex:commandButton value="Send" action="{!SendEmail}"/>  
                    <apex:commandButton value="Cancel" action="{!cancel}"/>
            </apex:pageBlockButtons>           
        </apex:pageBlock>
    </apex:form> 
</apex:page>