<!--
/**
* Author: Sreedhar Karukonda 
* This Page will be opened as Popup when user clicks "Sync Agreement" button "Agreement (Apttus__APTS_Agreement__c)" details view.
* Action "synchronizeWithAccounts" will sync the agreement with related Accounts (either directly or through signatories) and all account's Valid Tech Geos will be updated if there is not error.
* If there is any error, popup window wil show the error. The same error will be put in Sync Erro Message field.
* Timeline: 
*		Created Mar 5, 2015
* 
**/
-->


<apex:page showHeader="false" sidebar="false" standardController="Apttus__APTS_Agreement__c" extensions="AgreementSyncPageCtrl" >
	<script>
		var width = 500;
	    var height = 400;
	    window.resizeTo(width, height);
	    window.moveTo(((screen.width - width) / 2), ((screen.height - height) / 2));
	</script>
	<style>
		.faield{
			color: red;
		}
		.success{
			color:green;
		}
	</style>
	<apex:form >
		<apex:outputPanel id="syncWaitingDisplay">
		<div style="padding: 30px" >
			<apex:image url="/img/loading32.gif" rendered="{!showWaiting}" Id="waitingIcon"/>
			<h1><apex:outputText value="{!syncMessage}" escape="false" styleClass="{!IF(syncFailed, 'faield', 'success')}"/></h1>
		</div>
		</apex:outputPanel>
		<apex:actionFunction action="{!synchronizeWithAccounts}" name="syncNow" reRender="syncWaitingDisplay"/>
		<div style="text-align:center"><button onclick="window.close();" style="padding: 5px 15px 5px 15px">Close</button></div>
	</apex:form>
	<script>
		syncNow();
	</script>

</apex:page>