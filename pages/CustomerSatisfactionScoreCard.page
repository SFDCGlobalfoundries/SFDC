<apex:page controller="CustomerSatisfaction" id="thePage" >
<apex:form >
  <apex:pageBlock title="Customer Satisfaction Score Card"> 
    <apex:outputLabel value="Start Quarter"/>
    <apex:inputText value="{!StartQuarter}"/>
    <apex:outputLabel value="Start Year"/>
    <apex:inputText value="{!StartYear}"/>
    <apex:outputLabel value="End Quarter"/>
    <apex:inputText value="{!EndQuarter}"/>
    <apex:outputLabel value="End Year"/>
    <apex:inputText value="{!EndYear}"/>
    <apex:commandButton value="GO!" action="{!Go}" />
    <apex:pageblockTable value="{!CustomerNames}" var="key" id="theTable"
        rowClasses="odd,even" styleClass="tableClass">
        <apex:column >
            <apex:facet name="header">Customer</apex:facet>
            <apex:outputText value="{!key}"/>
        </apex:column>
        
         <apex:column >
            <apex:facet name="header">{!setYearQuarter[0]}</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][0].Q1_Score__c}" rendered="{!!mapCustomerSatsfaction[key][0].Percentage__c}"/>
            <apex:outputText value="{!mapCustomerSatsfaction[key][0].Q1__c}" rendered="{!mapCustomerSatsfaction[key][0].Percentage__c}"/>
        </apex:column>
        <apex:column >
            <apex:facet name="header">{!setYearQuarter[1]}</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][1].Q1_Score__c}" rendered="{!!mapCustomerSatsfaction[key][1].Percentage__c}"/>
            <apex:outputText value="{!mapCustomerSatsfaction[key][1].Q1__c}" rendered="{!mapCustomerSatsfaction[key][1].Percentage__c}"/>        </apex:column>
        <apex:column >
            <apex:facet name="header">{!setYearQuarter[2]}</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][2].Q1_Score__c}" rendered="{!!mapCustomerSatsfaction[key][2].Percentage__c}"/>
            <apex:outputText value="{!mapCustomerSatsfaction[key][2].Q1__c}" rendered="{!mapCustomerSatsfaction[key][2].Percentage__c}"/>        </apex:column>
         <apex:column >
            <apex:facet name="header">{!setYearQuarter[3]}</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][3].Q1_Score__c}" rendered="{!!mapCustomerSatsfaction[key][3].Percentage__c}"/>
            <apex:outputText value="{!mapCustomerSatsfaction[key][3].Q1__c}" rendered="{!mapCustomerSatsfaction[key][3].Percentage__c}"/>        </apex:column>
        <!--<apex:column >
            <apex:facet name="header">4Q trend</apex:facet>   
            <apex:outputText value="{!mapCustomerSatsfaction[key][3].X4Q_trend__c}" escape="false"/>
        </apex:column>-->
        <apex:column >
            <apex:facet name="header">Merit Range Red</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][3].Merit_Index_for_customers__r.RED__c}"/>
        </apex:column>
        <apex:column >
            <apex:facet name="header">Merit Range Green</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][3].Merit_Index_for_customers__r.GREEN__c}"/>
        </apex:column>
        <apex:column >
            <apex:facet name="header">Merit Index</apex:facet>
            <apex:outputText value="{!mapCustomerSatsfaction[key][3].MeritIndex__c}" escape="false" rendered="{!(mapCustomerSatsfaction[key][3].Q1_Score__c!=null || mapCustomerSatsfaction[key][3].Q1__c!=null)}"/>
            <apex:outputText value="{!mapCustomerSatsfaction[key][2].MeritIndex__c}" escape="false" rendered="{!(mapCustomerSatsfaction[key][3].Q1_Score__c==null && mapCustomerSatsfaction[key][3].Q1__c==null) && (mapCustomerSatsfaction[key][2].Q1_Score__c!=null || mapCustomerSatsfaction[key][2].Q1__c!=null)}"/>
            <apex:outputText value="{!mapCustomerSatsfaction[key][1].MeritIndex__c}" escape="false" rendered="{!(mapCustomerSatsfaction[key][3].Q1_Score__c==null && mapCustomerSatsfaction[key][3].Q1__c==null) && (mapCustomerSatsfaction[key][2].Q1_Score__c==null && mapCustomerSatsfaction[key][2].Q1__c==null) && (mapCustomerSatsfaction[key][1].Q1_Score__c!=null || mapCustomerSatsfaction[key][1].Q1__c!=null)}"/>
        </apex:column>
    </apex:pageblocktable>
   
   </apex:pageBlock>
  </apex:form>
</apex:page>