<!-- 
    Author: Anil Kumar Reddy L
    Company: GLOBALFOUNDRIES
    Project: FMS 2.0
    Description: Page used choose notification perferences for Search subscription of FMS records.
    Change History: 
    Date               Name                    Comments
    -->
<apex:page controller="FMSSubscribeSearchCtrl" >
    <!--<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.9.2.custom.js')}"/>-->
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.8.3.js')}"/>
    
    <script>
    
    /*
        * set all other checkboxes based on "all Events" state
        */
        function toggleSelectAll(checkbox){
        
            var $j = jQuery.noConflict();
            
            //all checkbox is selected
            if(checkbox.checked){

                //set all row level checkboxes selected
                $j( ".notifySelect" ).prop('checked', true);
                
            }
            else{

                //set all row level checkboxes de-selected
                $j( ".notifySelect" ).prop('checked', false);
                
            }
            
        }
    
    
    /*
        * set "all checkbox" based on state of row level checkboxes
        */
        function toggleItem(checkbox){
            
            var $j = jQuery.noConflict();
            var nss = $j('.notifySelect');
            if(nss.filter(':not(:checked)').length==0){
                //set "all checkbox" selected
                $j("input[id$=allEvents]").prop('checked', true);   
            }
            else{             
                //set "all checkboxes" de-selected
                $j("input[id$=allEvents]").prop('checked', false);    
                
            }            
        }
    
    </script>
        
    <apex:form >
        <apex:pageBlock rendered="{!!fmsRecResult}">
          <apex:outputLabel style="font-size: 136%;color: blue;" > No Records to Subscribe, Please click&nbsp;<apex:outputLink value="/apex/FormManagementMainPage">HERE</apex:outputLink>&nbsp;to navigate back.</apex:outputLabel>
        </apex:pageBlock>
        
           <apex:pageBlock rendered="{!fmsRecResult}"> 
            
            
            <apex:pageBlockSection id="searchSub" title="Create a Search based Subscription" columns="1" collapsible="false">
                <p>
                    This page allows you to create a subscription to your saved search specified above. You can select the types of events for which you desire notification.
                    Then whenever one of these events occurs on a form that you have access to and which matches your saved search criteria, you will receive an e-mail notice.
                </p>
            </apex:pageBlockSection>
            <apex:pageBlockSection >
                
                <apex:pageBlockSectionItem dataStyle="width:1%;" >
                    <apex:outputLabel style="font-weight: bold;">Notify me when:</apex:outputLabel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem dataStyle="width:56%;" >
                    <apex:outputPanel >
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:inputCheckbox id="allEvents" value="{!allEvents}" onchange="toggleSelectAll(this);"/>
                                    <apex:outputLabel >All Events</apex:outputLabel>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:inputCheckbox id="formCreated" value="{!formCreated}" styleClass="notifySelect"  onchange="toggleItem();"/>
                                    <apex:outputLabel >Form is created</apex:outputLabel>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:inputCheckbox id="formEdited" value="{!formEdited}" styleClass="notifySelect"  onchange="toggleItem();"/>
                                    <apex:outputLabel >Form is edited</apex:outputLabel>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:inputCheckbox id="formStatusChng" value="{!formStatusChange}" styleClass="notifySelect" onchange="toggleItem();" />
                                    <apex:outputLabel >Form has a status change</apex:outputLabel>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:inputCheckbox id="formDeleted" value="{!formDeleted}" styleClass="notifySelect" onchange="toggleItem();"/>
                                    <apex:outputLabel >Form is deleted</apex:outputLabel>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
             <p>
                  Notifications will be sent to: {!$User.Email}
            </p>
             <apex:pageBlockButtons location="bottom" >
                <apex:commandButton action="{!submit}" value="Submit" title="Submit"  />
                 <apex:commandButton action="/apex/FormManagementMainPage" value="Cancel" title="Cancel" />
             </apex:pageBlockButtons>
            
            
        </apex:pageBlock>
           
    </apex:form>
</apex:page>