<apex:page standardController="CPK_Report__c" extensions="CPKReportRelatedList" showChat="false" showHeader="false" sidebar="true">
    <apex:form >
        <!-- apex:actionFunction action="{!NewReport}" name="InsertRecord_JS" oncomplete="CallWebService_JS();"/ -->
        <!-- apex:actionFunction name="CallWebService_JS" action="{!Createfolder}" / --> 
        
        <apex:pageBlock >
            <apex:pageBlockSection columns="2" >
                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="butPanel">
                        <div align="right">
                            <!-- apex:commandButton value="NEW" action="{!empty}" rendered="{!renderNewButton}" oncomplete="InsertRecord_JS();"/>&nbsp;&nbsp;&nbsp;
                            <!--<apex:commandButton value="NEW" action="{!empty}" oncomplete="InsertRecord_JS();"/>&nbsp;&nbsp;&nbsp;>                          
                            <apex:commandButton value="No Reports For Current Month" action="{!empty}" rendered="{!renderNewButton}" oncomplete="InsertRecord_JS();"  rerender="butPanel">
                           <!--<apex:commandButton value="No Reports For Current Month" action="{!empty}" oncomplete="InsertRecord_JS();" rerender="butPanel">
                            <apex:param id="norep" name="noreports" value="true" assignTo="{!noreptm}" />
                            </apex:commandbutton -->
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>

            <apex:pageBlockTable id="table" columns="6" value="{!report}"
                            var="rpt"
                            cellPadding="4" border="1" rendered="{!NOT(renderTable)}">
                <apex:column headerValue="Action" rendered="{!$Profile.Name == 'System Administrator'}">
                    <apex:outputLink onclick="window.top.location='/{!rpt.id}'; return false"> Edit</apex:outputLink> &nbsp;|&nbsp;
                    <apex:commandLink action="{!deleteRecord}" onclick="if(!confirm('Are you sure?')) return false;">Del
                    <apex:param value="{!rpt.id}" name="idToDel" assignTo="{!recId}"/>
                    </apex:commandLink>
                </apex:column>
                <apex:column headerValue="Name">
                    <apex:outputLink onclick="window.top.location='/{!rpt.id}'; return false"  >{!rpt.Name}</apex:outputLink>
                </apex:column>
                <apex:column headerValue="{!$ObjectType.Monthly_CPK_Report__c.fields.Month__c.label}">{!rpt.Month__c}</apex:column>
                <apex:column headerValue="{!$ObjectType.Monthly_CPK_Report__c.fields.Approved__c.label}">{!rpt.Approved__c}</apex:column>
                <apex:column headerValue="Created Date">{!rpt.createdDate }</apex:column>
                <apex:column headerValue="{!$ObjectType.Monthly_CPK_Report__c.fields.Report_Due_Date__c.label}">{!rpt.Report_Due_Date__c}</apex:column>
            </apex:pageBlockTable>

        </apex:pageBlock>
        
    </apex:form>
</apex:page>