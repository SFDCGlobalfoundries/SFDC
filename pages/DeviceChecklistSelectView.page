<apex:page standardController="Checklist_Container__c" extensions="DeviceChecklistSelectCtrlExt" tabStyle="DeviceChecklist__tab">
  <apex:pageBlock mode="edit">
  <apex:form >
  <apex:actionFunction name="lookForPrograms" action="{!getPrograms}" reRender="device message programs"/>
  <apex:pageBlockSection title="Lookup for Device">
      <apex:inputField styleClass="deviceNameInput" value="{!Checklist_Container__c.Device__c}" required="true" onchange="lookForPrograms()" id="device"/>
      <apex:outputText value="{!message}" rendered="{!IF(message<> null, true, false)}" id='message'/>
      <apex:commandButton action="{!getPrograms}" value="Get Checklist"/>
  </apex:pageBlockSection>
  <apex:pageBlockSection id="programs" rendered="{!IF(programs<>null, true, false)}" columns='1'>
      <apex:pageBlockTable value="{!programs}" var="project">
          <apex:column headerValue="Checklist Name">
              <a target="_parent" href="/apex/DeviceChecklistHierarchyView?id={!project.id}">{!project.Name}</a>
          </apex:column>
          <apex:column value="{!project.Account__c}"/>
          <apex:column value="{!project.Device__c}"/>
          <apex:column value="{!project.Opportunity__c}"/>
          <apex:column value="{!project.Opportunity_Program__c}"/>
      </apex:pageBlockTable>
  </apex:pageBlockSection>
  </apex:form>
  <script type="text/javascript">
    document.getElementsByClassName('deviceNameInput')[0].disabled = true;
    document.getElementsByClassName('deviceNameInput')[0].placeholder = 'Use Lookup  -->';
  </script>
  </apex:pageBlock>
</apex:page>