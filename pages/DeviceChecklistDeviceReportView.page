<apex:page standardController="Device__c" extensions="DeviceChecklistCreateCtrlExt">
<apex:stylesheet value="{!URLFOR($Resource.ChecklistResouces, 'ChecklistResouces/css/npi.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.ChecklistResouces, 'ChecklistResouces/css/DeviceChecklistDeviceReports.css')}" />
    <div style='display: block; overflow-y:auto;height: 190px;width: 99%;'>
    <apex:outputPanel rendered="{!devc.Checklist__c != null}">
        <div class='datagrid'>
                 <table>
                    <thead>
                       <tr>
                         <th rowspan="2">Name</th>         
                         <th colspan = "3" style='border-bottom: 1px solid #ececec;'>Open</th>
                         <th rowspan="2">Closed</th>
                         <th rowspan="2">Red Flagged</th>
                         <th rowspan="2">Progress</th>
                         <th rowspan="2">Total</th>
                       </tr>
                      <tr>
                        <th>Due</th>
                        <th>Due Soon</th>
                        <th>Overdue</th>
                      </tr>
                    </thead>
                    <tbody>
                    <tr>
                      <td> <a href="/apex/DeviceChecklistHierarchyView?Id={!devc.Checklist__c}" target='_parent'>{!reportUtil.programTree.name}</a></td>
                      <td style='width: 100px;' class='emph'>{!reportUtil.programTree.status.due}</td>
                      <td class="{!IF(reportUtil.programTree.status.dueSoon > 0, 'orange','')} emph" style='width: 100px;'>{!reportUtil.programTree.status.dueSoon}</td>
                      <td class="{!IF(reportUtil.programTree.status.overdue > 0, 'lightred','')} emph" style='width: 100px;'>{!reportUtil.programTree.status.overdue}</td>
                      <td style='width: 120px;background:green;' class='emph'>{!reportUtil.programTree.status.closed}</td>
                      <td class="{!IF(reportUtil.programTree.status.flagged > 0, 'red','')} emph" style='width: 10px;'>{!reportUtil.programTree.status.flagged}</td>
                      <td style='width: 120px;' class='emph'>{!reportUtil.programTree.status.progress}%</td>
                      <td style='width: 100px;' class='emph'>{!reportUtil.programTree.status.total}</td>
                    </tr>
                    <apex:repeat value="{!reportUtil.programTree.children}" var="child">
                        <tr>
                          <td style='padding-left:30px;' class='emph'>{!child.name}</td>
                          <td style='width: 100px;' class='emph'>{!child.status.due}</td>
                          <td class="{!IF(child.status.dueSoon > 0, 'orange','')} emph" style='width: 100px;'>{!child.status.dueSoon}</td>
                          <td class="{!IF(child.status.overdue > 0, 'lightred','')} emph" style='width: 100px;'>{!child.status.overdue}</td>
                          <td style='width: 120px;background:green;' class='emph'>{!child.status.closed}</td>
                          <td class="{!IF(child.status.flagged > 0, 'red','')} emph" style='width: 100px;'>{!child.status.flagged}</td>
                          <td style='width: 120px;' class='emph'>{!child.status.progress}%</td>
                          <td style='width: 100px;' class='emph'>{!child.status.total}</td>
                        </tr>
                      </apex:repeat>
                    </tbody>
                  </table>
                 </div>
      </apex:outputPanel>
          <apex:outputPanel rendered="{!devc.Checklist__c == null}">
            <div class='datagrid'>
               <table>
                  <thead>
                     <tr>
                       <th rowspan="2">Name</th>         
                       <th colspan = "3" style='border-bottom: 1px solid #ececec;'>Open</th>
                       <th rowspan="2">Closed</th>
                       <th rowspan="2">Red Flagged</th>
                       <th rowspan="2">Progress</th>
                       <th rowspan="2">Total</th>
                     </tr>
                    <tr>
                      <th>Due</th>
                      <th>Due Soon</th>
                      <th>Overdue</th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
                  <tfoot><tr><td>No Checklist is created for this device...</td></tr></tfoot>
              </table>
            </div>
        </apex:outputPanel>
    </div>
</apex:page>