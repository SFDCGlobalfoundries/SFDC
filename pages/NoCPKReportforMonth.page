<apex:page standardController="Monthly_CPK_Report__c" extensions="NoCPKReportforMonthController" showHeader="false" sidebar="false">

    <apex:form >
    
        <apex:pageBlock title="Reason" id="pageBlock">
        <p align="center">
            <b>Reason for No Reports</b>&nbsp;&nbsp;<apex:inputField value="{!Monthly_CPK_Report__c.Reason_for_No_Reports__c}"/>
            </p>
            <br/>
            <apex:pageBlockButtons location="Bottom">
            <apex:commandButton action="{!saveReport}" value="Save" onComplete="closeAndRefresh();" status="actionStatus" reRender="pageBlock" />
            <apex:actionStatus id="actionStatus">
                <apex:facet name="start"> 
                    <img src="/img/loading.gif"/>
                </apex:facet>
            </apex:actionStatus>
            <apex:commandButton value="Cancel" onClick="cancel();"/>
            </apex:pageBlockButtons>
            
        </apex:pageBlock>
        
    </apex:form>
    <script>
        function closeAndRefresh(){
            console.log('clicked on the button');
            window.top.location = '/{!$CurrentPage.parameters.id}';
        }
        function cancel(){
            window.top.location = '/{!$CurrentPage.parameters.id}';
            return false;            
        }
    </script>
    
</apex:page>