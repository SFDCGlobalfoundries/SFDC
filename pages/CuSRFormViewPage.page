<!--
Author: Shyam Ravindra Nair
Description: Custom page to view CuSR Form
History:
SNair     11112014     - code creation
SNair     14112014     - updated section for Attachment
SNair     02122014     - updated ui.
SNair     03122014     - included View action for Implementation records.
SNair     17122014     - added logic for tab navigation.
SNair     29122014     - added tab for PM.
SNair     30122014     - updated fields for Implementation.
SNair     03012015     - add ui for Notification Group.
SNair     09012015     - updated UI for Implementation.
SNair     10012015     - added Submit For Approval button.
PSamal    06122017     - Case-00051184(Changes for new site - Essex Junction, East Fishkill, ASIC)
--->
<apex:page standardController="CuSR_Form__c"
    extensions="CuSRFormExtension" tabStyle="CuSR_Form__c" id="thepage">

    <apex:stylesheet value="/sCSS/21.0/sprites/1297816277000/Theme3/default/gc/versioning.css" />

    <!--<style>
    .activeTab {background-color: #79b4cd; color:white; background-image:none;font-size:15px;}
    .inactiveTab { background-color: lightgrey; color:black; background-image:none;font-size:11px;}
    </style>-->

    <style>
.customLink {
    text-decoration: none;
    color: #015ba7;
    font-family: 'Verdana', 'Geneva', sans-serif;
    font-size: 91.3%;
}
</style>

    <apex:sectionHeader title="{!$ObjectType.CuSR_Form__c.label}"
        subtitle="{!cusrForm.Name}" />
    <chatter:feedWithFollowers entityId="{!cusrForm.id}" />
    <br />
    <apex:form >
        <apex:commandLink value="Back to CuSR Form" styleClass="customLink"
            action="/{!cusrTabURL}" />
        &nbsp;
        <apex:pageBlock >

            <!--<apex:tabPanel id="theTabPanel" selectedTab="initiator" switchType="client" tabClass="activeTab" inactiveTabClass="inactiveTab">-->
            <apex:tabPanel id="theTabPanel" value="{!selectedTabName}"
                switchType="client">
                <apex:tab label="Request Details" name="initiator" id="initiatorTab">
                    <apex:pageBlock >
                        <apex:pageBlockButtons location="top"
                            rendered="{!cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Implemented' || cusrForm.Status__c == 'Rejected' || cusrForm.Status__c == 'Pending Implementation'}">
                            <apex:commandButton value="Edit"
                                action="{!EditButtonOnInitiatorTab}"
                                rendered="{!(cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected') && cusrFormInitiator == true}" />
                            <apex:commandButton value="Update CuSR"
                                action="/apex/CuSRFormUpdatePage?Id={!cusrForm.Id}"
                                onclick="return confirm('This CuSR is already approved and implemented. Do you still want to update?');"
                                rendered="{!(cusrForm.Status__c == 'Implemented') && (cusrFormInitiator == true || afterImplementationAccessForSelectedCE == true)}" />
                            <apex:commandButton value="Add Additional FAB"
                                action="{!EditButtonOnInitiatorTab}"
                                onclick="return confirm('This CuSR is already approved and implemented. Do you still want to update?');"
                                rendered="{!(cusrForm.Status__c == 'Implemented') && (cusrFormInitiator == true || afterImplmentationAccess == true)}" />
                            <!-- <apex:commandButton value="Void" action="{!voidAction}"
                                rendered="{!(cusrForm.Status__c == 'New'|| cusrForm.Status__c == 'Rejected' || cusrForm.Status__c == 'Implemented') && (cusrFormInitiator == true || afterImplementationVoidAccess == true)}" /> -->
                            <apex:commandButton value="Void"
                                action="/apex/CuSRFormReasonToVoidForm?CuSRFormId={!cusrForm.Id}"
                                rendered="{!(cusrForm.Status__c == 'New'|| cusrForm.Status__c == 'Rejected' || cusrForm.Status__c == 'Pending Implementation' || cusrForm.Status__c == 'Implemented') && (cusrFormInitiator == true || afterImplementationVoidAccess == true)}" />
                            <!--<apex:commandButton value="Submit for Approval" action="{!submitForApproval}" rendered="{!cusrForm.Status__c == 'New'}"/>-->
                        </apex:pageBlockButtons>
                        <apex:pageMessage id="pendingSites"
                            summary="Waiting for the CE owner to assign the approvers for the following sites : {!if(cusrForm.Status__c == 'New' && cusrForm.FAB_1__c == true && cusrForm.Dresden_Ready_for_Approval__c == false,'Dresden','')} {!if(cusrForm.Status__c == 'New' && (cusrForm.FAB_2__c == true || cusrForm.FAB_3__c == true || cusrForm.FAB_3E__c == true || cusrForm.FAB_5__c == true || cusrForm.FAB_6__c == true || cusrForm.FAB_7__c == true) && cusrForm.Singapore_Ready_for_Approval__c == false,'Singapore','')} {!if(cusrForm.Status__c == 'New' && cusrForm.FAB_8__c == true && cusrForm.Malta_Ready_for_Approval__c == false,'Malta','')} {!if(cusrForm.Status__c == 'New' && cusrForm.FAB_9__c == true && cusrForm.Essex_Junction_Ready_for_Approval__c == false,'Essex Junction','')} {!if(cusrForm.Status__c == 'New' && cusrForm.FAB_10__c == true && cusrForm.East_Fishkill_Ready_for_Approval__c == false,'East Fishkill','')}{!if(cusrForm.Status__c == 'New' && cusrForm.ASIC__c   == true && cusrForm.ASIC_Ready_for_Approval__c == false,'ASIC','')}"
                            severity="info" strength="1"
                            rendered="{!cusrForm.Status__c == 'New' && (cusrForm.FAB_1__c == true || cusrForm.FAB_2__c == true || cusrForm.FAB_3__c == true || cusrForm.FAB_3E__c == true || cusrForm.FAB_5__c == true || cusrForm.FAB_6__c == true || cusrForm.FAB_7__c == true || cusrForm.FAB_8__c == true || cusrForm.FAB_9__c == true || cusrForm.FAB_10__c == true || cusrForm.ASIC__c == true)}" />
                        <apex:pageMessage id="additionalFabInfo"
                            summary="Following additional FABs are added: {!If(cusrForm.Additional_FAB_1__c && !(cusrForm.FAB_1_Void__c),'FAB 1','')} {!If(cusrForm.Additional_FAB_2__c && !(cusrForm.FAB_2_Void__c) ,'FAB 2','')} {!If(cusrForm.Additional_FAB_3__c && !(cusrForm.FAB_3_Void__c),'FAB 3','')} {!If(cusrForm.Additional_FAB_3E__c && !(cusrForm.FAB_3E_Void__c),'FAB 3E','')} {!If(cusrForm.Additional_FAB_5__c && !(cusrForm.FAB_5_Void__c),'FAB 5','')} {!If(cusrForm.Additional_FAB_6__c && !(cusrForm.FAB_6_Void__c),'FAB 6','')} {!If(cusrForm.Additional_FAB_7__c && !(cusrForm.FAB_7_Void__c),'FAB 7','')} {!If(cusrForm.Additional_FAB_8__c && !(cusrForm.FAB_8_Void__c),'FAB 8','')} {!If(cusrForm.Additional_FAB_9__c && !(cusrForm.FAB_9_Void__c),'FAB 9','')} {!If(cusrForm.Additional_FAB_10__c && !(cusrForm.FAB_10_Void__c),'FAB 10','')} {!If(cusrForm.Additional_ASIC__c && !(cusrForm.ASIC_Void__c),'ASIC','')}"
                            severity="info" strength="1"
                            rendered="{!displayAdditionalFabMessage}" />
                        <apex:pageMessage id="pendingAdditionalFabInfo"
                            summary="Following additional FABs are waiting for approval: {!if(additionalFAB1Pending,'FAB 1','')} {!if(additionalFAB2Pending,'FAB 2','')} {!if(additionalFAB3Pending,'FAB 3','')} {!if(additionalFAB3EPending,'FAB 3E','')} {!if(additionalFAB5Pending,'FAB 5','')} {!if(additionalFAB6Pending,'FAB 6','')} {!if(additionalFAB7Pending,'FAB 7','')} {!if(additionalFAB8Pending,'FAB 8','')} {!if(additionalFAB9Pending,'FAB 9','')} {!if(additionalFAB10Pending,'FAB 10','')} {!if(additionalASICPending,'ASIC','')}"
                            severity="info" strength="1"
                            rendered="{!displayPendingAdditionalFabMessage}" />
                        <apex:pageMessage id="approvedAdditionalFabInfo"
                            summary="Following additional FABs are approved: {!if(additionalFAB1Approved,'FAB 1','')} {!if(additionalFAB2Approved,'FAB 2','')} {!if(additionalFAB3Approved,'FAB 3','')} {!if(additionalFAB3EApproved,'FAB 3E','')} {!if(additionalFAB5Approved,'FAB 5','')} {!if(additionalFAB6Approved,'FAB 6','')} {!if(additionalFAB7Approved,'FAB 7','')} {!if(additionalFAB8Approved,'FAB 8','')} {!if(additionalFAB9Approved,'FAB 9','')} {!if(additionalFAB10Approved,'FAB 10','')} {!if(additionalASICApproved,'ASIC','')}"
                            severity="info" strength="1"
                            rendered="{!displayApprovedAdditionalFabMessage}" />

                        <apex:pageBlockSection title="Initiator Section"
                            collapsible="false" columns="2" rendered="{!editOwner == false}">
                            <apex:outputField value="{!cusrForm.Name}" />
                            <apex:outputField value="{!cusrForm.ownerId}" />
                            <apex:outputField value="{!cusrForm.Status__c}" />
                            <apex:outputField value="{!cusrForm.Legacy_Status_Migrated__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                            <apex:outputField value="{!cusrForm.Request_Received_Date__c}" />
                            <apex:outputField value="{!cusrForm.Reason__c}"
                                rendered="{!showRaisedDateReasonField}" />
                            <apex:outputField value="{!cusrForm.Reason_to_Void__c}"
                                rendered="{!cusrForm.Status__c == 'Void'}" />
                            <apex:outputField value="{!cusrForm.Created_Date__c}" />
                            <apex:outputField value="{!cusrForm.Implemented_Date__c}" />
                        </apex:pageBlockSection>

                        <apex:pageBlockSection title="Initiator Section"
                            collapsible="false" columns="2" rendered="{!editOwner}">
                            <apex:outputField value="{!cusrForm.Name}" />
                            <!-- <apex:outputField value="{!cusrForm.ownerId}" /> -->
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.CuSR_Form__c.fields.ownerId.label}" />
                                <apex:pageBlockSectionItem >
                                    <apex:outputField value="{!cusrForm.ownerId}" />
                                    <a href="/{!cusrForm.Id}/a?retURL=/{!cusrForm.Id}">[Change]</a>
                                </apex:pageBlockSectionItem>
                            </apex:pageBlockSectionItem>
                            <apex:outputField value="{!cusrForm.Status__c}" />
                            <apex:outputField value="{!cusrForm.Legacy_Status_Migrated__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                            <apex:outputField value="{!cusrForm.Request_Received_Date__c}" />
                            <apex:outputField value="{!cusrForm.Reason__c}"
                                rendered="{!showRaisedDateReasonField}" />
                            <apex:outputField value="{!cusrForm.Reason_to_Void__c}"
                                rendered="{!cusrForm.Status__c == 'Void'}" />
                            <apex:outputField value="{!cusrForm.Created_Date__c}" />
                            <apex:outputField value="{!cusrForm.Implemented_Date__c}" />
                        </apex:pageBlockSection>

                        <apex:pageblockSection title="Fab" collapsible="false" columns="2"
                            id="scope">
                            <apex:outputField value="{!cusrForm.FAB_1__c}" />
                            <apex:outputField value="{!cusrForm.FAB_2__c}" />
                            <apex:outputField value="{!cusrForm.FAB_3__c}" />
                            <apex:outputField value="{!cusrForm.FAB_3E__c}" />
                            <apex:outputField value="{!cusrForm.FAB_5__c}" />
                            <apex:outputField value="{!cusrForm.FAB_6__c}" />
                            <apex:outputField value="{!cusrForm.FAB_7__c}" />
                            <apex:outputField value="{!cusrForm.FAB_8__c}" />                            
                            <apex:outputField value="{!cusrForm.FAB_9__c}" />
                            <apex:outputField value="{!cusrForm.FAB_10__c}" />
                            <apex:outputField value="{!cusrForm.ASIC__c}" />
                        </apex:pageblockSection>

                        <!-- Added by Shyam Nair section for Void History -->
                        <apex:pageBlockSection title="Voided Fabs" collapsible="false"
                            columns="1" rendered="{!showVoidHistory}">
                            <apex:pageBlockTable value="{!cusrVoidHistoryList}"
                                var="cusrvoidhistory">
                                <apex:column headerValue="Fab">
                                    <apex:outputField value="{!cusrvoidhistory.Fab__c}" />
                                </apex:column>
                                <apex:column headerValue="Reason To Void">
                                    <apex:outputField value="{!cusrvoidhistory.Reason_to_Void__c}" />
                                </apex:column>
                                <apex:column headerValue="Voided By">
                                    <apex:outputField value="{!cusrvoidhistory.Voided_By__c}" />
                                </apex:column>
                                <apex:column headerValue="Voided On">
                                    <apex:outputField value="{!cusrvoidhistory.Voided_On__c}" />
                                </apex:column>
                            </apex:pageBlockTable>
                        </apex:pageBlockSection>
                        <!-- End -->

                        <apex:pageBlockSection title="Customer Detail" collapsible="false"
                            columns="1">
                            <apex:outputField value="{!cusrForm.Customer_Name__c}" />
                            <apex:outputField value="{!cusrForm.System__c}" />
                            <apex:outputField value="{!cusrForm.Technology__c}" />
                        </apex:pageBlockSection>

                        <apex:pageBlockSection title="Customer Requirements"
                            collapsible="false" columns="2">
                            <apex:outputField value="{!cusrForm.Customer_Requestor__c}" />
                            <apex:outputField value="{!cusrForm.Customer_Requestor_Email__c}"
                                id="customeremail" />
                            <apex:outputField value="{!cusrForm.Customer_Requestor_Lotus_Notes__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                            <apex:outputField value="{!cusrForm.Customer_Requestor_Email_Lotus_Notes__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                            <apex:outputField value="{!cusrForm.Notify_Customer_after_Implementation__c}" />
                            <apex:outputField value="{!cusrForm.Requested_Effective_Date__c}" />
                            <apex:outputField value="{!cusrForm.Validity_Period_of_this_Request__c}" />
                            <apex:pageBlockSectionItem rendered="{!cusrForm.Validity_Period_of_this_Request__c != 'EOL'}">
                                <apex:outputLabel value="{!$ObjectType.CuSR_Form__c.fields.Validity_Period__c.label}" />
                                <apex:outputField value="{!cusrForm.Validity_Period__c}" />
                            </apex:pageBlockSectionItem>
                            <apex:pageblocksectionitem rendered="{!cusrForm.Validity_Period_of_this_Request__c == 'EOL'}" />
                            <apex:outputField value="{!cusrForm.Actual_Requirement__c}" />
                            <apex:outputField value="{!cusrForm.Justification_for_Request__c}" />
                            <apex:outputField value="{!cusrForm.Scope_of_the_CuSR__c}" />
                            <apex:outputField value="{!cusrForm.If_Others__c}" />
                            <apex:outputField value="{!cusrForm.Is_this_a_one_time_requirement__c}" />
                            <apex:outputField value="{!cusrForm.If_No_then_provide_details__c}"
                                rendered="{!cusrForm.Is_this_a_one_time_requirement__c != 'Yes'}" />
                            <apex:pageblocksectionitem rendered="{!cusrForm.Is_this_a_one_time_requirement__c != 'No'}" />
                            <apex:outputField value="{!cusrForm.Special_Requirement__c}" />
                            <br />
                            <apex:outputField value="{!cusrForm.Customer_Specification_Name__c}" />
                            <apex:outputField value="{!cusrForm.Version__c}" />
                            <apex:outputField value="{!cusrForm.Link_to_Customer_Document_Website__c}" />
                        </apex:pageBlockSection>
                        <apex:pageBlockSection title="Remarks For Update"
                            collapsible="false"
                            rendered="{!cusrForm.Status__c == 'Implemented'}">
                            <apex:outputField value="{!cusrForm.Remark__c}" />
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1" title="Approval History"
                            rendered="{!cusrForm.Approval_History__c != '' || cusrForm.Approval_History__c != null}">
                            <apex:outputField value="{!cusrForm.Approval_History__c}" />
                        </apex:pageBlockSection>
                    </apex:pageBlock>

                    <apex:outputPanel id="notificationgroup">
                        <apex:pageblock title="Notification Group Members">
                            <apex:pageblocktable value="{!cusrNotificationGroupList}"
                                var="cusrNG">
                                <apex:column headerValue="Action" styleClass="actionColumn">
                                    <apex:commandLink value="Del"
                                        action="{!delRowFromNotificationGroupList}"
                                        styleClass="actionLink"
                                        rendered="{!cusrNG.Id != null && cusrForm.Status__c != 'Void'}"
                                        rerender="notificationgroup">
                                        <apex:param name="memberid" assignTo="{!memberId}"
                                            value="{!cusrNG.Id}" />
                                    </apex:commandLink>
                                </apex:column>
                                <apex:column headerValue="User">
                                    <apex:outputField value="{!cusrNG.User_Name__c}" />
                                </apex:column>

                            </apex:pageblocktable>
                        </apex:pageblock>
                    </apex:outputPanel>


                    <!-- Custom Attachment Related List -->
                    <apex:outputPanel id="feedattachments">
                        <apex:pageBlock title="Attachments">
                            <apex:pageBlockButtons location="top"
                                rendered="{!cusrForm.Status__c != 'Void'}">
                                <apex:commandButton value="Add"
                                    action="/apex/CuSRFormAttachmentPage?RecordId={!cusrForm.Id}&ObjectName=CuSR_Form__c" />
                            </apex:pageBlockButtons>
                            <apex:pageBlockTable value="{!contentDocumentList}"
                                var="contentDocument">
                                <apex:column headerValue="Action" styleClass="actionColumn">
                                    <a
                                        href="/sfc/servlet.shepherd/version/download/{!contentDocument.ContentDocument.LatestPublishedVersionId}"
                                        class="actionLink" target="_document">Download</a>
                                    <apex:outputLabel value=" | "
                                        rendered="{!editOwner == true && contentDocument.ContentDocumentId != null && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                                    <apex:commandLink value="Del" action="{!deleteFeedAttachment}"
                                        styleClass="actionLink"
                                        rendered="{!editOwner == true && contentDocument.ContentDocumentId != null && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}">
                                        <apex:param name="contentid" assignTo="{!contentId}"
                                            value="{!contentDocument.ContentDocumentId}" />
                                    </apex:commandLink>
                                </apex:column>
                                <apex:column headerValue="Type"> 
                                    File
                                </apex:column>
                                <apex:column headerValue="Title">
                                    <apex:commandLink value="{!contentDocument.ContentDocument.Title}"
                                        action="/{!contentDocument.ContentDocumentId}" />
                                </apex:column>
                                <apex:column headerValue="Last Modified"
                                    value="{!contentDocument.ContentDocument.ContentModifiedDate}" />
                                <apex:column headerValue="Created By"
                                    value="{!contentDocument.ContentDocument.OwnerId}" />
                            </apex:pageBlockTable>
                        </apex:pageBlock>
                    </apex:outputPanel>

                    <c:GenericHistoryComponent Limit="20" Object="{!CuSR_Form__c}" />

                </apex:tab>

                <apex:tab label="Product Marketing" name="pm" id="pmTab"
                    rendered="{!cusrForm.Stakeholder_Approval_Completed__c}">
                    <apex:pageblock >
                        <apex:pageblockButtons location="top"
                            rendered="{!cusrForm.Status__c != 'Void'}">
                            <!-- <apex:commandButton value="Edit" action="{!EditButtonOnPMTab}" /> -->
                            <apex:commandButton value="Approve/Reject"
                                action="{!EditButtonOnPMTab}"
                                rendered="{!cusrForm.PM_Approved__c != true && pmUser == true}" />
                            <!-- <apex:commandButton value="Approve" action="{!pmApproved}" /> -->
                        </apex:pageblockButtons>
                        <apex:pageblockSection collapsible="false">
                            <apex:outputField value="{!cusrForm.Any_Cost_Impact__c}" />
                            <!-- <apex:outputField value="{!cusrForm.Cost_Impact__c}" /> -->
                            <apex:outputField value="{!cusrForm.PM_Comments__c}" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Approver" />
                                <apex:commandLink value="{!pmGroup.Name}"
                                    action="/p/own/Queue/d?id={!pmGroup.Id}" target="_blank" />
                            </apex:pageBlockSectionItem>
                            <apex:outputField value="{!cusrForm.PM_Approved_By__c}"
                                rendered="{!cusrForm.PM_Approved__c}" />
                            <apex:outputField value="{!cusrForm.PM_Approved_On__c}"
                                rendered="{!cusrForm.PM_Approved__c}" />
                            <apex:outputField value="{!cusrForm.Legacy_PM_Approved_By__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                            <apex:outputField value="{!cusrForm.Legacy_PM_Approved_DateTime__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                        </apex:pageblockSection>
                    </apex:pageblock>
                </apex:tab>

                <apex:tab label="Account Manager" name="am" id="amTab"
                    rendered="{!showAMTab}">
                    <apex:pageblock >
                        <apex:pageBlockButtons location="bottom"
                            rendered="{!amApprover.Status__c != 'New' && cusrForm.Status__c != 'Void'}">
                            <!-- <apex:commandButton value="Approval History"
                                action="/apex/CuSRApprovalViewForm?Id={!amApprover.Id}&fromForm=true" /> -->
                            <apex:commandButton value="Approve/Reject"
                                action="/apex/CuSRApprovalEditForAMPage?Id={!amApprover.Id}"
                                rendered="{!isAMUser && amApprover.Status__c != 'Approved'}" />
                        </apex:pageBlockButtons>
                        <apex:pageBlockSection collapsible="false"
                            title="Approver's Details">
                            <apex:outputField value="{!amApprover.No_of_Approvers__c}" />
                            <apex:outputField value="{!amApprover.Status__c}" />
                            <apex:outputField value="{!amApprover.Approver1__c}"
                                rendered="{!amApprover.Approver1__c != null}" />
                            <apex:outputField value="{!amApprover.Approver2__c}"
                                rendered="{!amApprover.Approver2__c != null}" />
                            <apex:outputField value="{!amApprover.Approver3__c}"
                                rendered="{!amApprover.Approver3__c != null}" />
                            <apex:outputField value="{!amApprover.Approver4__c}"
                                rendered="{!amApprover.Approver4__c != null}" />
                            <apex:outputField value="{!amApprover.Approver5__c}"
                                rendered="{!amApprover.Approver5__c != null}" />
                            <br />
                            <apex:outputField value="{!amApprover.AM_Approved_By__c}"
                                rendered="{!amApprover.Status__c == 'Approved'}" />
                            <apex:outputField value="{!amApprover.AM_Approved_On__c}"
                                rendered="{!amApprover.Status__c == 'Approved'}" />
                            <apex:outputField value="{!amApprover.Legacy_Approved_By__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                            <apex:outputField value="{!amApprover.Legacy_Approved_DateTime__c}"
                                rendered="{!cusrForm.Legacy__c}" />
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="1" collapsible="false">
                            <apex:outputField value="{!amApprover.Will_GLOBALFOUNDRIES_charge_the_customer__c}" />
                            <apex:outputField value="{!amApprover.If_No_Please_provide_justification__c}"
                                rendered="{!amApprover.Will_GLOBALFOUNDRIES_charge_the_customer__c == 'No'}" />
                            <apex:outputField value="{!amApprover.Does_the_customer_agree_to_pay_for_CUSR__c}" />
                            <apex:outputField value="{!amApprover.If_No_Please_provide_justification_2__c}"
                                rendered="{!amApprover.Does_the_customer_agree_to_pay_for_CUSR__c == 'No'}" />
                            <apex:outputField value="{!amApprover.Pricing_quote_reference_number__c}"
                                rendered="{!amApprover.Does_the_customer_agree_to_pay_for_CUSR__c == 'Yes'}" />
                        </apex:pageBlockSection>
                        <apex:pageBlockTable value="{!amApproverList}" var="am"
                            rendered="{!amApproverList != null && amApprover.Am_Info_Added__c}">
                            <apex:column headerValue="Action" styleClass="actionColumn">
                                <apex:commandLink value="Approve/Reject" styleClass="actionLink"
                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!am.procId}"
                                    rendered="{!isAMUser && loggedInUser.Id == am.ApproverId.Id}" />
                            </apex:column>
                            <apex:column headerValue="Approver">
                                <apex:commandLink value="{!am.ApproverId.Name}"
                                    action="/{!am.ApproverId.Id}" />
                            </apex:column>
                            <!-- <apex:column headerValue="Appover" value="{!am.ApproverId.Name}"/> -->
                            <apex:column headerValue="Status" value="{!am.StepStatus}" />
                        </apex:pageBlockTable>
                    </apex:pageblock>
                </apex:tab>

                <apex:tab label="Dresden" name="dresden" id="dresdentab"
                    rendered="{!showDresdenSection}">
                    <apex:pageBlock >
                        <apex:pagemessage severity="INFO" strength="1"
                            summary="Waiting to Submit for Approval for other sites."
                            rendered="{!cusrForm.Dresden_Ready_for_Approval__c == true && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                        <apex:tabPanel id="dresdensubtab"
                            value="{!selectedDresdenSubTabName}" switchType="client">
                            <apex:tab id="dresdencosttab" label="Costing & Time Line"
                                name="dresdencost"
                                rendered="{!cusrForm.Dresden_Ready_for_Approval__c}">
                                <apex:pageblock >
                                    <apex:pageblockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_1__c) && accessToAddButtonOnCostAndImplementation && cusrForm.FAB_1_Void__c == false}">
                                        <apex:commandButton value="Add"
                                            action="{!addCuSRCostForDresden}" />
                                    </apex:pageblockButtons>
                                    <apex:outputPanel id="dresdencosttable"
                                        rendered="{!showDresdenCostTable}">
                                        <apex:pageBlock >

                                            <apex:pageBlockTable value="{!dresdenCostList}"
                                                var="dresdencost">
                                                <apex:column headerValue="Action" styleClass="actionColumn">
                                                    <apex:actionRegion >
                                                        <!-- <apex:commandLink value="View" action="/{!dresdencost.Id}"
                                                            styleClass="actionLink"
                                                            rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false}" /> -->
                                                        <apex:commandLink value="View" action="/{!dresdencost.Id}"
                                                            styleClass="actionLink" />
                                                    </apex:actionRegion>
                                                </apex:column>
                                                <apex:column value="{!dresdencost.Implementation__c}" />
                                                <apex:column value="{!dresdencost.Implementation_Comments__c}" />
                                                <apex:column value="{!dresdencost.Fab__c}" />
                                                <apex:column value="{!dresdencost.Total_Labour_Cost__c}" />
                                                <apex:column value="{!dresdencost.Labour_Hours__c}" />
                                                <apex:column value="{!dresdencost.Hardware_Cost__c}" />
                                                <apex:column value="{!dresdencost.Software_Cost__c}" />
                                                <apex:column value="{!dresdencost.Other_Cost__c}" />
                                                <apex:column value="{!dresdencost.Total_Cost__c}" />
                                            </apex:pageBlockTable>
                                            <br />
                                        </apex:pageBlock>
                                    </apex:outputPanel>
                                    <apex:outputpanel id="dresdensummary">
                                        <apex:pageblockSection title="Summary" collapsible="false">
                                            <apex:outputField value="{!cusrForm.Total_Cost_for_Dresden__c}" />
                                        </apex:pageblockSection>
                                    </apex:outputpanel>
                                </apex:pageblock>
                            </apex:tab>

                            <apex:tab id="dresdenapprovaltab" label="Stakeholder's Approval"
                                name="dresdenapproval">
                                <apex:pageblock >
                                    <apex:pageblockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false && cusrForm.Status__c != 'Implemented') && cusrForm.Dresden_Ready_for_Approval__c == false) || (cusrForm.Status__c == 'Implemented' && cusrForm.FAB_1_Void__c == false && cusrForm.Additional_FAB_1__c) }">
                                        <apex:commandButton value="Edit"
                                            action="{!EditButtonOnDresdenApprovalTab}" />
                                        <apex:commandButton value="Submit for Approval"
                                            action="{!dresdenSubmitForApproval}"
                                            rendered="{!cusrForm.Dresden_Ready_for_Approval__c == false}" />
                                    </apex:pageblockButtons>
                                    <apex:pagemessages id="dresdenApprovalError"
                                        rendered="{!showDresdenApprovalError}" />
                                    <apex:pageBlockSection columns="2">
                                        <apex:outputField value="{!cusrForm.Dresden_System_Owner_Approval_Required__c}"
                                            label="Is System Owner Approval Required?"
                                            id="dresdensystemownerapproval" />
                                        <!--<apex:outputField value="{!cusrForm.Dresden_Individual_Fab_Owner_Approval__c}" id="dresdenfabownerapproval"/>-->
                                    </apex:pageBlockSection>

                                    <apex:outputPanel id="dresden" rendered="{!showDresdenSection}">
                                        <apex:pageBlock title="FAB Approver Details">
                                            <!-- <apex:pageblockButtons location="bottom"
                                                rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false && fab1Approver.Status__c != 'New'}"> -->
                                            <apex:pageblockButtons location="bottom"
                                                rendered="{!fab1Approver.Status__c != 'New'}">
                                                <apex:commandButton value="Approval History"
                                                    action="/apex/CuSRApprovalViewForm?Id={!fab1Approver.Id}&fromForm=true"
                                                    rendered="{!fab1Approver.Status__c != 'Pending Approval'}" />
                                            </apex:pageblockButtons>
                                            <apex:pageBlockSection collapsible="false" columns="2"
                                                title="FAB 1 {!IF(cusrForm.FAB_1_Void__c,'(Fab has been Voided)','')}"
                                                rendered="{!showFab1table}">
                                                <apex:outputField value="{!fab1Approver.No_of_Approvers__c}" />
                                                <apex:outputField value="{!fab1Approver.Do_you_require_approval_from_all_users__c}" />
                                                <apex:outputField value="{!fab1Approver.Status__c}" />
                                                <br />
                                                <apex:outputField value="{!fab1Approver.Approver1__c}"
                                                    rendered="{!enableFab1Approver1}" />
                                                <apex:outputField value="{!fab1Approver.Approver2__c}"
                                                    rendered="{!enableFab1Approver2}" />
                                                <apex:outputField value="{!fab1Approver.Approver3__c}"
                                                    rendered="{!enableFab1Approver3}" />
                                                <apex:outputField value="{!fab1Approver.Approver4__c}"
                                                    rendered="{!enableFab1Approver4}" />
                                                <apex:outputField value="{!fab1Approver.Approver5__c}"
                                                    rendered="{!enableFab1Approver5}" />
                                                <apex:outputField value="{!fab1Approver.Legacy_Approved_By__c}"
                                                    rendered="{!cusrForm.Legacy__c}" />
                                                <apex:outputField value="{!fab1Approver.Legacy_Approved_DateTime__c}"
                                                    rendered="{!cusrForm.Legacy__c}" />
                                            </apex:pageBlockSection>
                                            <apex:pageBlockTable value="{!fab1ApproverList}"
                                                var="fab1Appr" rendered="{!fab1ApproverList != null}">
                                                <apex:column headerValue="Action" styleClass="actionColumn">
                                                    <!-- <apex:commandLink value="Approve/Reject"
                                                        styleClass="actionLink"
                                                        action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab1Appr.procId}"
                                                        rendered="{!(showApproveReject || (fab1ApprovalUser && loggedInUser.Id == fab1Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_1_Void__c)}" /> -->
                                                    <apex:commandLink value="Approve/Reject"
                                                        styleClass="actionLink"
                                                        action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab1Appr.procId}"
                                                        rendered="{!(showApproveReject || (fab1ApprovalUser && loggedInUser.Id == fab1Appr.ApproverId.Id))}" />
                                                </apex:column>
                                                <apex:column headerValue="Approver">
                                                    <apex:commandLink value="{!fab1Appr.ApproverId.Name}"
                                                        action="/{!fab1Appr.ApproverId.Id}" />
                                                </apex:column>
                                                <apex:column headerValue="Status"
                                                    value="{!fab1Appr.StepStatus}" />
                                            </apex:pageBlockTable>
                                        </apex:pageBlock>
                                    </apex:outputPanel>

                                    <apex:outputPanel id="dresdensysownerpanel"
                                        rendered="{!showDresdenSystemOwner}">
                                        <apex:pageBlock title="System Owner Approval Details">
                                            <!-- <apex:pageblockButtons location="bottom"
                                                rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false && dresdenSystemOwnerApproval.Status__c != 'New'}"> -->
                                            <apex:pageblockButtons location="bottom"
                                                rendered="{!dresdenSystemOwnerApproval.Status__c != 'New'}">
                                                <apex:commandButton value="Approval History"
                                                    action="/apex/CuSRApprovalViewForm?Id={!dresdenSystemOwnerApproval.Id}&fromForm=true"
                                                    rendered="{!dresdenSystemOwnerApproval.Status__c != 'Pending Approval'}" />
                                            </apex:pageblockButtons>
                                            <apex:pageBlockSection collapsible="false" columns="2">
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.No_of_Approvers__c}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Status__c}" />
                                                <br />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Approver1__c}"
                                                    rendered="{!enableDresdenSystemApprover1}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Approver2__c}"
                                                    rendered="{!enableDresdenSystemApprover2}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Approver3__c}"
                                                    rendered="{!enableDresdenSystemApprover3}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Approver4__c}"
                                                    rendered="{!enableDresdenSystemApprover4}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Approver5__c}"
                                                    rendered="{!enableDresdenSystemApprover5}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Legacy_Approved_By__c}"
                                                    rendered="{!cusrForm.Legacy__c}" />
                                                <apex:outputField value="{!dresdenSystemOwnerApproval.Legacy_Approved_DateTime__c}"
                                                    rendered="{!cusrForm.Legacy__c}" />
                                            </apex:pageBlockSection>
                                            <apex:pageBlockTable value="{!dresdenSystemOwnerApproverList}"
                                                var="dresdenSysAppr"
                                                rendered="{!dresdenSystemOwnerApproverList != null}">
                                                <apex:column headerValue="Action" styleClass="actionColumn">
                                                    <apex:commandLink value="Approve/Reject"
                                                        styleClass="actionLink"
                                                        action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!dresdenSysAppr.procId}"
                                                        rendered="{!(showApproveReject || (dresdenSytemOwnerApprover && loggedInUser.Id == dresdenSysAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_1_Void__c)}" />
                                                </apex:column>
                                                <apex:column headerValue="Approver">
                                                    <apex:commandLink value="{!dresdenSysAppr.ApproverId.Name}"
                                                        action="/{!dresdenSysAppr.ApproverId.Id}" />
                                                </apex:column>
                                                <apex:column headerValue="Status"
                                                    value="{!dresdenSysAppr.StepStatus}" />
                                            </apex:pageBlockTable>
                                        </apex:pageBlock>
                                    </apex:outputPanel>
                                </apex:pageblock>
                            </apex:tab>

                            <apex:tab id="dresdenimplementationtab"
                                label="Implementation Details" name="dresdenimplementation"
                                rendered="{!cusrForm.Dresden_Ready_for_Approval__c}">
                                <apex:outputPanel rendered="{!showDresdenSection}">
                                    <apex:pageBlock title="Implementation Details : Dresden">
                                        <apex:pageblockButtons location="top"
                                            rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_1__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_1_Void__c == false}">
                                            <!-- <apex:commandButton value="Edit"
                                                action="{!EditButtonOnDresdenImplementationTab}" />  -->
                                            <apex:commandButton value="Add"
                                                action="{!addNewFab1Implementation}" />
                                        </apex:pageblockButtons>
                                        <apex:outputPanel id="Fab1TaskTable"
                                            rendered="{!showFab1table}">
                                            <apex:pageBlockSection title="FAB 1 {!IF(cusrForm.FAB_1_Void__c,'(Fab has been Voided)','')}"
                                                collapsible="false" columns="1">
                                                <apex:pageBlockTable value="{!fab1TaskList}" var="fab1">
                                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                                        <apex:actionRegion >
                                                            <!-- <apex:commandLink value="View" action="/{!fab1.Id}"
                                                                styleClass="actionLink"
                                                                rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false}" /> -->
                                                            <apex:commandLink value="View" action="/{!fab1.Id}"
                                                                styleClass="actionLink" />
                                                            <apex:outputLabel value=" | "
                                                                rendered="{!fab1.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab1.Assignee__c || loggedInUser.Id == fab1.CreatedById)}" />
                                                            <apex:commandLink value="Edit" styleClass="actionLink"
                                                                action="/apex/CuSRImplementationEditPage?Id={!fab1.Id}"
                                                                rendered="{!fab1.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_1_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab1.Assignee__c || loggedInUser.Id == fab1.CreatedById)}" />
                                                        </apex:actionRegion>
                                                    </apex:column>
                                                    <apex:column value="{!fab1.Fab__c}" />
                                                    <apex:column value="{!fab1.Assignee__c}" />
                                                    <apex:column value="{!fab1.Action__c}" />
                                                    <apex:column value="{!fab1.Comments__c}" />
                                                    <apex:column value="{!fab1.Planned_End_Date__c}" />
                                                    <apex:column value="{!fab1.Status__c}" />
                                                    <apex:column value="{!fab1.Actual_End_Date__c}" />
                                                </apex:pageBlockTable>
                                            </apex:pageBlockSection>
                                        </apex:outputPanel>
                                    </apex:pageBlock>
                                </apex:outputPanel>
                            </apex:tab>
                        </apex:tabPanel>
                    </apex:pageBlock>
                </apex:tab>

                <apex:tab label="Singapore" name="singapore" id="singaporetab"
                    rendered="{!showSingaporeSection}">
                    <apex:pageBlock >
                        <apex:pagemessage severity="INFO" strength="1"
                            summary="Waiting to Submit for Approval for other sites."
                            rendered="{!cusrForm.Singapore_Ready_for_Approval__c == true && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                        <apex:tabPanel id="singaporesubtab"
                            value="{!selectedSingaporeSubTabName}" switchType="client">
                            <apex:tab id="singaprecosttab" label="Costing & Time Line"
                                name="singaporecost"
                                rendered="{!cusrForm.Singapore_Ready_for_Approval__c}">
                                <apex:pageblock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_2__c || cusrForm.Additional_FAB_3__c || cusrForm.Additional_FAB_3E__c || cusrForm.Additional_FAB_5__c || cusrForm.Additional_FAB_6__c || cusrForm.Additional_FAB_7__c) && accessToAddButtonOnCostAndImplementation == true && disableSingaporeForVoid == false}">
                                        <apex:commandButton value="Add"
                                            action="{!addCuSRCostForSingapore}" />
                                    </apex:pageBlockButtons>
                                    <apex:outputPanel id="singaporecosttable"
                                        rendered="{!showSingaporeCostTable}">
                                        <apex:pageBlock >

                                            <apex:pageBlockTable value="{!singaporeCostList}"
                                                var="singaporecost">
                                                <apex:column headerValue="Action" styleClass="actionColumn">
                                                    <apex:actionRegion >
                                                        <!-- <apex:commandLink value="View"
                                                            action="/{!singaporecost.Id}" styleClass="actionLink"
                                                            rendered="{!cusrForm.Status__c != 'Void' && singaporecost.Voided__c == false}" /> -->
                                                        <apex:commandLink value="View"
                                                            action="/{!singaporecost.Id}" styleClass="actionLink" />
                                                    </apex:actionRegion>
                                                </apex:column>
                                                <apex:column value="{!singaporecost.Implementation__c}" />
                                                <apex:column value="{!singaporecost.Implementation_Comments__c}" />
                                                <apex:column value="{!singaporecost.Fab__c}" />
                                                <apex:column value="{!singaporecost.Total_Labour_Cost__c}" />
                                                <apex:column value="{!singaporecost.Labour_Hours__c}" />
                                                <apex:column value="{!singaporecost.Hardware_Cost__c}" />
                                                <apex:column value="{!singaporecost.Software_Cost__c}" />
                                                <apex:column value="{!singaporecost.Other_Cost__c}" />
                                                <apex:column value="{!singaporecost.Total_Cost__c}" />
                                            </apex:pageBlockTable>
                                            <br />
                                        </apex:pageBlock>
                                    </apex:outputPanel>
                                    <apex:outputpanel id="singaporesummary">
                                        <apex:pageblockSection title="Summary" collapsible="false">
                                            <apex:outputField value="{!cusrForm.Total_Cost_for_Singapore__c}" />
                                        </apex:pageblockSection>
                                    </apex:outputpanel>
                                </apex:pageblock>
                            </apex:tab>

                            <apex:tab id="singaporeapprovaltab"
                                label="Stakeholder's Approval" name="singaporeapproval">
                                <apex:pageblock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && disableSingaporeForVoid == false && cusrForm.Status__c != 'Implemented') && cusrForm.Singapore_Ready_for_Approval__c == false) || (cusrForm.Status__c == 'Implemented' && disableSingaporeForVoid == false && (cusrForm.Additional_FAB_2__c || cusrForm.Additional_FAB_3__c || cusrForm.Additional_FAB_3E__c || cusrForm.Additional_FAB_5__c || cusrForm.Additional_FAB_6__c || cusrForm.Additional_FAB_7__c))}">
                                        <apex:commandButton value="Edit"
                                            action="{!EditButtonOnSingaporeApprovalTab}" />
                                        <apex:commandButton value="Submit for Approval"
                                            action="{!singaporeSubmitForApproval}"
                                            rendered="{!cusrForm.Singapore_Ready_for_Approval__c == false}" />
                                    </apex:pageBlockButtons>
                                    <apex:pagemessages id="singaporeApprovalError"
                                        rendered="{!showSingaporeApprovalError}" />
                                    <apex:pageBlockSection >
                                        <apex:outputField value="{!cusrForm.Singapore_System_Owner_Approval_Required__c}"
                                            label="Is System Owner Approval Required?"
                                            id="singaporesystemownerapproval" />
                                        <apex:outputField value="{!cusrForm.Singapore_Individual_Fab_Owner_Approval__c}"
                                            label="Is Individual Fab Owner Approval Required?"
                                            id="singaporefabownerapproval" />
                                    </apex:pageBlockSection>
                                </apex:pageblock>


                                <apex:outputPanel id="singaporefabownerpanel"
                                    rendered="{!showSingaporeSection == true && cusrForm.Singapore_Individual_Fab_Owner_Approval__c=='No'}">
                                    <apex:pageBlock title="FAB Owner Approval Details">
                                        <!-- <apex:pageblockButtons location="bottom"
                                            rendered="{!cusrForm.Status__c != 'Void' && disableSingaporeForVoid == false && singaporeFabOwnerApproval.Status__c != 'New'}"> -->
                                        <apex:pageblockButtons location="bottom"
                                            rendered="{!singaporeFabOwnerApproval.Status__c != 'New'}">
                                            <apex:commandButton value="Approval History"
                                                action="/apex/CuSRApprovalViewForm?Id={!singaporeFabOwnerApproval.Id}&fromForm=true"
                                                rendered="{!singaporeFabOwnerApproval.Status__c != 'Pending Approval'}" />
                                        </apex:pageblockButtons>
                                        <apex:pageBlockSection collapsible="false" columns="2">
                                            <apex:outputField value="{!singaporeFabOwnerApproval.No_of_Approvers__c}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Status__c}" />
                                            <br />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Approver1__c}"
                                                rendered="{!enableSingaporeFabApprover1==true}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Approver2__c}"
                                                rendered="{!enableSingaporeFabApprover2==true}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Approver3__c}"
                                                rendered="{!enableSingaporeFabApprover3==true}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Approver4__c}"
                                                rendered="{!enableSingaporeFabApprover4==true}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Approver5__c}"
                                                rendered="{!enableSingaporeFabApprover5==true}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Legacy_Approved_By__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                            <apex:outputField value="{!singaporeFabOwnerApproval.Legacy_Approved_DateTime__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                        </apex:pageBlockSection>
                                        <apex:pageBlockTable value="{!singaporeFabOwnerApproverList}"
                                            var="singaporeFabAppr"
                                            rendered="{!singaporeFabOwnerApproverList != null}">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:commandLink value="Approve/Reject"
                                                    styleClass="actionLink"
                                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!singaporeFabAppr.procId}"
                                                    rendered="{!(showApproveReject || (fabApprovalUser && loggedInUser.Id == singaporeFabAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && disableSingaporeForVoid == false}" />
                                            </apex:column>
                                            <apex:column headerValue="Approver">
                                                <apex:commandLink value="{!singaporeFabAppr.ApproverId.Name}"
                                                    action="/{!singaporeFabAppr.ApproverId.Id}" />
                                            </apex:column>
                                            <apex:column headerValue="Status"
                                                value="{!singaporeFabAppr.StepStatus}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlock>
                                </apex:outputPanel>

                                <apex:outputPanel id="singapore"
                                    rendered="{!showSingaporeSection == true && cusrForm.Singapore_Individual_Fab_Owner_Approval__c == 'Yes'}">
                                    <apex:pageblock title="FAB Approver Details">
                                        <apex:pageBlock rendered="{!showFab2table}">
                                            <!-- <apex:pageblockButtons location="bottom"
                                                rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_2_Void__c == false && fab2Approver.Status__c != 'New'}"> -->
                                            <apex:pageblockButtons location="bottom"
                                                rendered="{!fab2Approver.Status__c != 'New'}">
                                                <apex:commandButton value="Approval History"
                                                    action="/apex/CuSRApprovalViewForm?Id={!fab2Approver.Id}&fromForm=true"
                                                    rendered="{!fab2Approver.Status__c != 'Pending Approval'}" />
                                            </apex:pageblockButtons>
                                            <apex:pageBlockSection collapsible="false" columns="2"
                                                title="FAB 2 {!IF(cusrForm.FAB_2_Void__c,'(Fab has been Voided)','')}">
                                                <apex:outputField value="{!fab2Approver.No_of_Approvers__c}" />
                                                <apex:outputField value="{!fab2Approver.Do_you_require_approval_from_all_users__c}" />
                                                <apex:outputField value="{!fab2Approver.Status__c}" />
                                                <br />
                                                <apex:outputField value="{!fab2Approver.Approver1__c}"
                                                    rendered="{!enableFab2Approver1 == true}" />
                                                <apex:outputField value="{!fab2Approver.Approver2__c}"
                                                    rendered="{!enableFab2Approver2 == true}" />
                                                <apex:outputField value="{!fab2Approver.Approver3__c}"
                                                    rendered="{!enableFab2Approver3 == true}" />
                                                <apex:outputField value="{!fab2Approver.Approver4__c}"
                                                    rendered="{!enableFab2Approver4 == true}" />
                                                <apex:outputField value="{!fab2Approver.Approver5__c}"
                                                    rendered="{!enableFab2Approver5 == true}" />
                                                <apex:outputField value="{!fab2Approver.Legacy_Approved_By__c}"
                                                    rendered="{!cusrForm.Legacy__c}" />
                                                <apex:outputField value="{!fab2Approver.Legacy_Approved_DateTime__c}"
                                                    rendered="{!cusrForm.Legacy__c}" />
                                            </apex:pageBlockSection>
                                            <apex:pageBlockTable value="{!fab2ApproverList}"
                                                var="fab2Appr" rendered="{!fab2ApproverList != null}">
                                                <apex:column headerValue="Action" styleClass="actionColumn">
                                                    <apex:commandLink value="Approve/Reject"
                                                        styleClass="actionLink"
                                                        action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab2Appr.procId}"
                                                        rendered="{!(showApproveReject || (fab2ApprovalUser && loggedInUser.Id == fab2Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_2_Void__c)}" />
                                                </apex:column>
                                                <apex:column headerValue="Approver">
                                                    <apex:commandLink value="{!fab2Appr.ApproverId.Name}"
                                                        action="/{!fab2Appr.ApproverId.Id}" />
                                                </apex:column>
                                                <apex:column headerValue="Status"
                                                    value="{!fab2Appr.StepStatus}" />
                                            </apex:pageBlockTable>
                                    </apex:pageblock>

                                    <apex:pageblock rendered="{!showFab3table}">
                                        <!-- <apex:pageblockButtons location="bottom"
                                            rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_3_Void__c == false && fab3Approver.Status__c != 'New'}"> -->
                                        <apex:pageblockButtons location="bottom"
                                            rendered="{!fab3Approver.Status__c != 'New'}">
                                            <apex:commandButton value="Approval History"
                                                action="/apex/CuSRApprovalViewForm?Id={!fab3Approver.Id}&fromForm=true"
                                                rendered="{!fab3Approver.Status__c != 'Pending Approval'}" />
                                        </apex:pageblockButtons>
                                        <apex:pageBlockSection collapsible="false" columns="2"
                                            title="FAB 3 {!IF(cusrForm.FAB_3_Void__c,'(Fab has been Voided)','')}">
                                            <apex:outputField value="{!fab3Approver.No_of_Approvers__c}" />
                                            <apex:outputField value="{!fab3Approver.Do_you_require_approval_from_all_users__c}" />
                                            <apex:outputField value="{!fab3Approver.Status__c}" />
                                            <br />
                                            <apex:outputField value="{!fab3Approver.Approver1__c}"
                                                rendered="{!enableFab3Approver1}" />
                                            <apex:outputField value="{!fab3Approver.Approver2__c}"
                                                rendered="{!enableFab3Approver2}" />
                                            <apex:outputField value="{!fab3Approver.Approver3__c}"
                                                rendered="{!enableFab3Approver3}" />
                                            <apex:outputField value="{!fab3Approver.Approver4__c}"
                                                rendered="{!enableFab3Approver4}" />
                                            <apex:outputField value="{!fab3Approver.Approver5__c}"
                                                rendered="{!enableFab3Approver5}" />
                                            <apex:outputField value="{!fab3Approver.Legacy_Approved_By__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                            <apex:outputField value="{!fab3Approver.Legacy_Approved_DateTime__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                        </apex:pageBlockSection>
                                        <apex:pageBlockTable value="{!fab3ApproverList}"
                                            var="fab3Appr" rendered="{!fab3ApproverList != null}">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:commandLink value="Approve/Reject"
                                                    styleClass="actionLink"
                                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab3Appr.procId}"
                                                    rendered="{!(showApproveReject || (fab3ApprovalUser && loggedInUser.Id == fab3Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_3_Void__c)}" />
                                            </apex:column>
                                            <apex:column headerValue="Approver">
                                                <apex:commandLink value="{!fab3Appr.ApproverId.Name}"
                                                    action="/{!fab3Appr.ApproverId.Id}" />
                                            </apex:column>
                                            <apex:column headerValue="Status"
                                                value="{!fab3Appr.StepStatus}" />
                                        </apex:pageBlockTable>
                                    </apex:pageblock>

                                    <apex:pageblock rendered="{!showFab3etable}">
                                        <!-- <apex:pageblockButtons location="bottom"
                                            rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_3E_Void__c == false && fab3eApprover.Status__c != 'New'}"> -->
                                        <apex:pageblockButtons location="bottom"
                                            rendered="{!fab3eApprover.Status__c != 'New'}">
                                            <apex:commandButton value="Approval History"
                                                action="/apex/CuSRApprovalViewForm?Id={!fab3eApprover.Id}&fromForm=true"
                                                rendered="{!fab3eApprover.Status__c != 'Pending Approval'}" />
                                        </apex:pageblockButtons>
                                        <apex:pageBlockSection collapsible="false" columns="2"
                                            title="FAB 3E {!IF(cusrForm.FAB_3E_Void__c,'(Fab has been Voided)','')}">
                                            <apex:outputField value="{!fab3eApprover.No_of_Approvers__c}" />
                                            <apex:outputField value="{!fab3eApprover.Do_you_require_approval_from_all_users__c}" />
                                            <apex:outputField value="{!fab3eApprover.Status__c}" />
                                            <br />
                                            <apex:outputField value="{!fab3eApprover.Approver1__c}"
                                                rendered="{!enableFab3eApprover1}" />
                                            <apex:outputField value="{!fab3eApprover.Approver2__c}"
                                                rendered="{!enableFab3eApprover2}" />
                                            <apex:outputField value="{!fab3eApprover.Approver3__c}"
                                                rendered="{!enableFab3eApprover3}" />
                                            <apex:outputField value="{!fab3eApprover.Approver4__c}"
                                                rendered="{!enableFab3eApprover4}" />
                                            <apex:outputField value="{!fab3eApprover.Approver5__c}"
                                                rendered="{!enableFab3eApprover5}" />
                                            <apex:outputField value="{!fab3eApprover.Legacy_Approved_By__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                            <apex:outputField value="{!fab3eApprover.Legacy_Approved_DateTime__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                        </apex:pageBlockSection>
                                        <apex:pageBlockTable value="{!fab3eApproverList}"
                                            var="fab3eAppr" rendered="{!fab3eApproverList != null}">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:commandLink value="Approve/Reject"
                                                    styleClass="actionLink"
                                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab3eAppr.procId}"
                                                    rendered="{!(showApproveReject || (fab3eApprovalUser && loggedInUser.Id == fab3eAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_3E_Void__c)}" />
                                            </apex:column>
                                            <apex:column headerValue="Approver">
                                                <apex:commandLink value="{!fab3eAppr.ApproverId.Name}"
                                                    action="/{!fab3eAppr.ApproverId.Id}" />
                                            </apex:column>
                                            <apex:column headerValue="Status"
                                                value="{!fab3eAppr.StepStatus}" />
                                        </apex:pageBlockTable>
                                    </apex:pageblock>


                                    <apex:pageblock rendered="{!showFab5table}">
                                        <!-- <apex:pageblockButtons location="bottom"
                                            rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_5_Void__c == false && fab5Approver.Status__c != 'New'}"> -->
                                        <apex:pageblockButtons location="bottom"
                                            rendered="{!fab5Approver.Status__c != 'New'}">
                                            <apex:commandButton value="Approval History"
                                                action="/apex/CuSRApprovalViewForm?Id={!fab5Approver.Id}&fromForm=true"
                                                rendered="{!fab5Approver.Status__c != 'Pending Approval'}" />
                                        </apex:pageblockButtons>
                                        <apex:pageBlockSection collapsible="false" columns="2"
                                            title="FAB 5 {!IF(cusrForm.FAB_5_Void__c,'(Fab has been Voided)','')}">
                                            <apex:outputField value="{!fab5Approver.No_of_Approvers__c}" />
                                            <apex:outputField value="{!fab5Approver.Do_you_require_approval_from_all_users__c}" />
                                            <apex:outputField value="{!fab5Approver.Status__c}" />
                                            <br />
                                            <apex:outputField value="{!fab5Approver.Approver1__c}"
                                                rendered="{!enableFab5Approver1}" />
                                            <apex:outputField value="{!fab5Approver.Approver2__c}"
                                                rendered="{!enableFab5Approver2}" />
                                            <apex:outputField value="{!fab5Approver.Approver3__c}"
                                                rendered="{!enableFab5Approver3}" />
                                            <apex:outputField value="{!fab5Approver.Approver4__c}"
                                                rendered="{!enableFab5Approver4}" />
                                            <apex:outputField value="{!fab5Approver.Approver5__c}"
                                                rendered="{!enableFab5Approver5}" />
                                            <apex:outputField value="{!fab5Approver.Legacy_Approved_By__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                            <apex:outputField value="{!fab5Approver.Legacy_Approved_DateTime__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                        </apex:pageBlockSection>
                                        <apex:pageBlockTable value="{!fab5ApproverList}"
                                            var="fab5Appr" rendered="{!fab5ApproverList != null}">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:commandLink value="Approve/Reject"
                                                    styleClass="actionLink"
                                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab5Appr.procId}"
                                                    rendered="{!(showApproveReject || (fab5ApprovalUser && loggedInUser.Id == fab5Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_5_Void__c)}" />
                                            </apex:column>
                                            <apex:column headerValue="Approver">
                                                <apex:commandLink value="{!fab5Appr.ApproverId.Name}"
                                                    action="/{!fab5Appr.ApproverId.Id}" />
                                            </apex:column>
                                            <apex:column headerValue="Status"
                                                value="{!fab5Appr.StepStatus}" />
                                        </apex:pageBlockTable>
                                    </apex:pageblock>

                                    <apex:pageblock rendered="{!showFab6table}">
                                        <!-- <apex:pageblockButtons location="bottom"
                                            rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_6_Void__c == false && fab6Approver.Status__c != 'New'}"> -->
                                        <apex:pageblockButtons location="bottom"
                                            rendered="{!fab6Approver.Status__c != 'New'}">
                                            <apex:commandButton value="Approval History"
                                                action="/apex/CuSRApprovalViewForm?Id={!fab6Approver.Id}&fromForm=true"
                                                rendered="{!fab6Approver.Status__c != 'Pending Approval'}" />
                                        </apex:pageblockButtons>
                                        <apex:pageBlockSection collapsible="false" columns="2"
                                            title="FAB 6 {!IF(cusrForm.FAB_6_Void__c,'(Fab has been Voided)','')}">
                                            <apex:outputField value="{!fab6Approver.No_of_Approvers__c}" />
                                            <apex:outputField value="{!fab6Approver.Do_you_require_approval_from_all_users__c}" />
                                            <apex:outputField value="{!fab6Approver.Status__c}" />
                                            <br />
                                            <apex:outputField value="{!fab6Approver.Approver1__c}"
                                                rendered="{!enableFab6Approver1}" />
                                            <apex:outputField value="{!fab6Approver.Approver2__c}"
                                                rendered="{!enableFab6Approver2}" />
                                            <apex:outputField value="{!fab6Approver.Approver3__c}"
                                                rendered="{!enableFab6Approver3}" />
                                            <apex:outputField value="{!fab6Approver.Approver4__c}"
                                                rendered="{!enableFab6Approver4}" />
                                            <apex:outputField value="{!fab6Approver.Approver5__c}"
                                                rendered="{!enableFab6Approver5}" />
                                            <apex:outputField value="{!fab6Approver.Legacy_Approved_By__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                            <apex:outputField value="{!fab6Approver.Legacy_Approved_DateTime__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                        </apex:pageBlockSection>
                                        <apex:pageBlockTable value="{!fab6ApproverList}"
                                            var="fab6Appr" rendered="{!fab6ApproverList != null}">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:commandLink value="Approve/Reject"
                                                    styleClass="actionLink"
                                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab6Appr.procId}"
                                                    rendered="{!(showApproveReject || (fab6ApprovalUser && loggedInUser.Id == fab6Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_6_Void__c)}" />
                                            </apex:column>
                                            <apex:column headerValue="Approver">
                                                <apex:commandLink value="{!fab6Appr.ApproverId.Name}"
                                                    action="/{!fab6Appr.ApproverId.Id}" />
                                            </apex:column>
                                            <apex:column headerValue="Status"
                                                value="{!fab6Appr.StepStatus}" />
                                        </apex:pageBlockTable>
                                    </apex:pageblock>

                                    <apex:pageblock rendered="{!showFab7table}">
                                        <!-- <apex:pageblockButtons location="bottom"
                                            rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_7_Void__c == false && fab7Approver.Status__c != 'New'}"> -->
                                        <apex:pageblockButtons location="bottom"
                                            rendered="{!fab7Approver.Status__c != 'New'}">
                                            <apex:commandButton value="Approval History"
                                                action="/apex/CuSRApprovalViewForm?Id={!fab7Approver.Id}&fromForm=true"
                                                rendered="{!fab7Approver.Status__c != 'Pending Approval'}" />
                                        </apex:pageblockButtons>
                                        <apex:pageBlockSection collapsible="false" columns="2"
                                            title="FAB 7 {!IF(cusrForm.FAB_7_Void__c,'(Fab has been Voided)','')}">
                                            <apex:outputField value="{!fab7Approver.No_of_Approvers__c}" />
                                            <apex:outputField value="{!fab7Approver.Do_you_require_approval_from_all_users__c}" />
                                            <apex:outputField value="{!fab7Approver.Status__c}" />
                                            <br />
                                            <apex:outputField value="{!fab7Approver.Approver1__c}"
                                                rendered="{!enableFab7Approver1}" />
                                            <apex:outputField value="{!fab7Approver.Approver2__c}"
                                                rendered="{!enableFab7Approver2}" />
                                            <apex:outputField value="{!fab7Approver.Approver3__c}"
                                                rendered="{!enableFab7Approver3}" />
                                            <apex:outputField value="{!fab7Approver.Approver4__c}"
                                                rendered="{!enableFab7Approver4}" />
                                            <apex:outputField value="{!fab7Approver.Approver5__c}"
                                                rendered="{!enableFab7Approver5}" />
                                            <apex:outputField value="{!fab7Approver.Legacy_Approved_By__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                            <apex:outputField value="{!fab7Approver.Legacy_Approved_DateTime__c}"
                                                rendered="{!cusrForm.Legacy__c}" />
                                        </apex:pageBlockSection>
                                        <apex:pageBlockTable value="{!fab7ApproverList}"
                                            var="fab7Appr" rendered="{!fab7ApproverList != null}">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:commandLink value="Approve/Reject"
                                                    styleClass="actionLink"
                                                    action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab7Appr.procId}"
                                                    rendered="{!(showApproveReject || (fab7ApprovalUser && loggedInUser.Id == fab7Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_7_Void__c)}" />
                                            </apex:column>
                                            <apex:column headerValue="Approver">
                                                <apex:commandLink value="{!fab7Appr.ApproverId.Name}"
                                                    action="/{!fab7Appr.ApproverId.Id}" />
                                            </apex:column>
                                            <apex:column headerValue="Status"
                                                value="{!fab7Appr.StepStatus}" />
                                        </apex:pageBlockTable>
                    </apex:pageBlock>
                    </apex:pageblock>
                    </apex:outputPanel>

                    <apex:outputPanel id="singaporesysownerpanel"
                        rendered="{!showSingaporeSystemOwner}">
                        <apex:pageBlock title="System Owner Approval Details">
                            <!-- <apex:pageblockButtons location="bottom"
                                rendered="{!cusrForm.Status__c != 'Void' && disableSingaporeForVoid == false && singaporeSystemOwnerApproval.Status__c != 'New'}"> -->
                            <apex:pageblockButtons location="bottom"
                                rendered="{!singaporeSystemOwnerApproval.Status__c != 'New'}">
                                <apex:commandButton value="Approval History"
                                    action="/apex/CuSRApprovalViewForm?Id={!singaporeSystemOwnerApproval.Id}&fromForm=true"
                                    rendered="{!singaporeSystemOwnerApproval.Status__c != 'Pending Approval'}" />
                            </apex:pageblockButtons>
                            <apex:pageBlockSection collapsible="false" columns="2">
                                <apex:outputField value="{!singaporeSystemOwnerApproval.No_of_Approvers__c}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Status__c}" />
                                <br />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Approver1__c}"
                                    rendered="{!enableSingaporeSystemApprover1}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Approver2__c}"
                                    rendered="{!enableSingaporeSystemApprover2}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Approver3__c}"
                                    rendered="{!enableSingaporeSystemApprover3}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Approver4__c}"
                                    rendered="{!enableSingaporeSystemApprover4}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Approver5__c}"
                                    rendered="{!enableSingaporeSystemApprover5}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Legacy_Approved_By__c}"
                                    rendered="{!cusrForm.Legacy__c}" />
                                <apex:outputField value="{!singaporeSystemOwnerApproval.Legacy_Approved_DateTime__c}"
                                    rendered="{!cusrForm.Legacy__c}" />
                            </apex:pageBlockSection>
                            <apex:pageBlockTable value="{!singaporeSystemOwnerApproverList}"
                                var="singaporeSysAppr"
                                rendered="{!singaporeSystemOwnerApproverList != null}">
                                <apex:column headerValue="Action" styleClass="actionColumn">
                                    <apex:commandLink value="Approve/Reject"
                                        styleClass="actionLink"
                                        action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!singaporeSysAppr.procId}"
                                        rendered="{!(showApproveReject || (singaporeSytemOwnerApprover && loggedInUser.Id == singaporeSysAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && disableSingaporeForVoid == false}" />
                                </apex:column>
                                <apex:column headerValue="Approver">
                                    <apex:commandLink value="{!singaporeSysAppr.ApproverId.Name}"
                                        action="/{!singaporeSysAppr.ApproverId.Id}" />
                                </apex:column>
                                <apex:column headerValue="Status"
                                    value="{!singaporeSysAppr.StepStatus}" />
                            </apex:pageBlockTable>
                        </apex:pageBlock>
                    </apex:outputPanel>
                </apex:tab>

                <apex:tab id="singaporeimplementationtab"
                    label="Implementation Details" name="singaporeimplementation"
                    rendered="{!cusrForm.Singapore_Ready_for_Approval__c}">
                    <apex:outputPanel rendered="{!showSingaporeSection}">
                        <apex:pageBlock title="Implementation Details : Singapore">
                            <!-- <apex:pageblockButtons location="top">
                                <apex:commandButton value="Edit"
                                    action="{!EditButtonOnSingaporeImplementationTab}" />
                            </apex:pageblockButtons> -->
                            <apex:outputPanel id="Fab2TaskTable" rendered="{!showFab2table}">
                                <apex:pageBlock >
                                    <apex:pageblockbuttons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_2__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_2_Void__c == false}">
                                        <apex:commandButton value="Add"
                                            action="{!addNewFab2Implementation}" />
                                    </apex:pageblockbuttons>
                                    <apex:pageBlockSection title="FAB 2 {!IF(cusrForm.FAB_2_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab2TaskList}" var="fab2">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab2.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_2_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab2.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab2.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_2_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab2.Assignee__c || loggedInUser.Id == fab2.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab2.Id}"
                                                        rendered="{!fab2.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_2_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab2.Assignee__c || loggedInUser.Id == fab2.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab2.Fab__c}" />
                                            <apex:column value="{!fab2.Assignee__c}" />
                                            <apex:column value="{!fab2.Action__c}" />
                                            <apex:column value="{!fab2.Comments__c}" />
                                            <apex:column value="{!fab2.Planned_End_Date__c}" />
                                            <apex:column value="{!fab2.Status__c}" />
                                            <apex:column value="{!fab2.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>
                            </apex:outputPanel>

                            <apex:outputPanel id="Fab3TaskTable" rendered="{!showFab3table}">
                                <apex:pageBlock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_3__c) &&accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_3_Void__c == false}">
                                        <apex:commandButton value="Add"
                                            action="{!addNewFab3Implementation}" />
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockSection title="FAB 3 {!IF(cusrForm.FAB_3_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab3TaskList}" var="fab3">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab3.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_3_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab3.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab3.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_3_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab3.Assignee__c || loggedInUser.Id == fab3.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab3.Id}"
                                                        rendered="{!fab3.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_3_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab3.Assignee__c || loggedInUser.Id == fab3.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab3.Fab__c}" />
                                            <apex:column value="{!fab3.Assignee__c}" />
                                            <apex:column value="{!fab3.Action__c}" />
                                            <apex:column value="{!fab3.Comments__c}" />
                                            <apex:column value="{!fab3.Planned_End_Date__c}" />
                                            <apex:column value="{!fab3.Status__c}" />
                                            <apex:column value="{!fab3.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>
                            </apex:outputPanel>

                            <apex:outputPanel id="Fab3eTaskTable"
                                rendered="{!showFab3etable}">
                                <apex:pageBlock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_3E__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_3E_Void__c == false }">
                                        <apex:commandButton value="Add"
                                            action="{!addNewFab3eImplementation}" />
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockSection title="FAB 3E {!IF(cusrForm.FAB_3E_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab3eTaskList}" var="fab3e">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab3e.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_3E_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab3e.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab3e.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_3E_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab3e.Assignee__c || loggedInUser.Id == fab3e.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab3e.Id}"
                                                        rendered="{!fab3e.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_3E_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab3e.Assignee__c || loggedInUser.Id == fab3e.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab3e.Fab__c}" />
                                            <apex:column value="{!fab3e.Assignee__c}" />
                                            <apex:column value="{!fab3e.Action__c}" />
                                            <apex:column value="{!fab3e.Comments__c}" />
                                            <apex:column value="{!fab3e.Planned_End_Date__c}" />
                                            <apex:column value="{!fab3e.Status__c}" />
                                            <apex:column value="{!fab3e.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>
                            </apex:outputPanel>

                            <apex:outputPanel id="Fab5TaskTable" rendered="{!showFab5table}">
                                <apex:pageBlock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_5__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_5_Void__c == false}">
                                        <apex:commandButton value="Add"
                                            action="{!addNewFab5Implementation}" />
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockSection title="FAB 5 {!IF(cusrForm.FAB_5_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab5TaskList}" var="fab5">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab5.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_5_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab5.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab5.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_5_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab5.Assignee__c || loggedInUser.Id == fab5.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab5.Id}"
                                                        rendered="{!fab5.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_5_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab5.Assignee__c || loggedInUser.Id == fab5.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab5.Fab__c}" />
                                            <apex:column value="{!fab5.Assignee__c}" />
                                            <apex:column value="{!fab5.Action__c}" />
                                            <apex:column value="{!fab5.Comments__c}" />
                                            <apex:column value="{!fab5.Planned_End_Date__c}" />
                                            <apex:column value="{!fab5.Status__c}" />
                                            <apex:column value="{!fab5.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>
                            </apex:outputPanel>

                            <apex:outputPanel id="Fab6TaskTable" rendered="{!showFab6table}">
                                <apex:pageBlock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_6__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_6_Void__c == false }">
                                        <apex:commandButton value="Add"
                                            action="{!addNewFab6Implementation}" />
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockSection title="FAB 6 {!IF(cusrForm.FAB_6_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab6TaskList}" var="fab6">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab6.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_6_Void__c == false }" /> -->
                                                    <apex:commandLink value="View" action="/{!fab6.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab6.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_6_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab6.Assignee__c || loggedInUser.Id == fab6.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab6.Id}"
                                                        rendered="{!fab6.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_6_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab6.Assignee__c || loggedInUser.Id == fab6.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab6.Fab__c}" />
                                            <apex:column value="{!fab6.Assignee__c}" />
                                            <apex:column value="{!fab6.Action__c}" />
                                            <apex:column value="{!fab6.Comments__c}" />
                                            <apex:column value="{!fab6.Planned_End_Date__c}" />
                                            <apex:column value="{!fab6.Status__c}" />
                                            <apex:column value="{!fab6.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>
                            </apex:outputPanel>

                            <apex:outputPanel id="Fab7TaskTable" rendered="{!showFab7table}">
                                <apex:pageBlock >
                                    <apex:pageBlockButtons location="top"
                                        rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_7__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_7_Void__c == false }">
                                        <apex:commandButton value="Add"
                                            action="{!addNewFab7Implementation}" />
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockSection title="FAB 7 {!IF(cusrForm.FAB_7_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab7TaskList}" var="fab7">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab7.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_7_Void__c == false }" /> -->
                                                    <apex:commandLink value="View" action="/{!fab7.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab7.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_7_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab7.Assignee__c || loggedInUser.Id == fab7.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab7.Id}"
                                                        rendered="{!fab7.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_7_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab7.Assignee__c || loggedInUser.Id == fab7.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab7.Fab__c}" />
                                            <apex:column value="{!fab7.Assignee__c}" />
                                            <apex:column value="{!fab7.Action__c}" />
                                            <apex:column value="{!fab7.Comments__c}" />
                                            <apex:column value="{!fab7.Planned_End_Date__c}" />
                                            <apex:column value="{!fab7.Status__c}" />
                                            <apex:column value="{!fab7.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>
                            </apex:outputPanel>

                        </apex:pageBlock>
                    </apex:outputPanel>
                </apex:tab>
            </apex:tabPanel>
        </apex:pageBlock>
        </apex:tab>

        <apex:tab label="Malta" name="malta" id="maltatab"
            rendered="{!showMaltaSection}">
            <apex:pageblock >
                <apex:pagemessage severity="INFO" strength="1"
                    summary="Waiting to Submit for Approval for other sites."
                    rendered="{!cusrForm.Malta_Ready_for_Approval__c == true && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                <apex:tabPanel id="maltasubtab" value="{!selectedMaltaSubTabName}"
                    switchType="client">
                    <apex:tab id="maltacosttab" label="Costing & Time Line"
                        name="maltacost"
                        rendered="{!cusrForm.Malta_Ready_for_Approval__c}">
                        <apex:pageBlock >
                            <apex:pageblockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_8__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_8_Void__c == false}">
                                <apex:commandButton value="Add" action="{!addCuSRCostForMalta}" />
                            </apex:pageblockButtons>
                            <apex:outputPanel id="maltacosttable"
                                rendered="{!showMaltaCostTable}">
                                <apex:pageBlock >
                                    <apex:pageBlockTable value="{!maltaCostList}" var="maltacost">
                                        <apex:column headerValue="Action" styleClass="actionColumn">
                                            <apex:actionRegion >
                                                <!-- <apex:commandLink value="View" action="/{!maltacost.Id}"
                                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false}" /> -->
                                                <apex:commandLink value="View" action="/{!maltacost.Id}" />
                                            </apex:actionRegion>
                                        </apex:column>
                                        <apex:column value="{!maltacost.Implementation__c}" />
                                        <apex:column value="{!maltacost.Implementation_Comments__c}" />
                                        <apex:column value="{!maltacost.Fab__c}" />
                                        <apex:column value="{!maltacost.Total_Labour_Cost__c}" />
                                        <apex:column value="{!maltacost.Labour_Hours__c}" />
                                        <apex:column value="{!maltacost.Hardware_Cost__c}" />
                                        <apex:column value="{!maltacost.Software_Cost__c}" />
                                        <apex:column value="{!maltacost.Other_Cost__c}" />
                                        <apex:column value="{!maltacost.Total_Cost__c}" />
                                    </apex:pageBlockTable>
                                    <br />
                                </apex:pageBlock>
                            </apex:outputPanel>
                            <apex:outputpanel id="maltasummary">
                                <apex:pageblockSection title="Summary" collapsible="false">
                                    <apex:outputField value="{!cusrForm.Total_Cost_for_Malta__c}" />
                                </apex:pageblockSection>
                            </apex:outputpanel>
                        </apex:pageBlock>
                    </apex:tab>

                    <apex:tab id="maltaapprovaltab" label="Stakeholder's Approval"
                        name="maltaapproval">
                        <apex:pageblock >
                            <apex:pageBlockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && cusrForm.Status__c != 'Implemented') && cusrForm.Malta_Ready_for_Approval__c == false) || (cusrForm.Status__c == 'Implemented' && cusrForm.Additional_FAB_8__c && cusrForm.FAB_8_Void__c == false)}">
                                <apex:commandButton value="Edit"
                                    action="{!EditButtonOnMaltaApprovalTab}" />
                                <apex:commandButton value="Submit for Approval"
                                    action="{!maltaSubmitForApproval}"
                                    rendered="{!cusrForm.Malta_Ready_for_Approval__c == false}" />
                            </apex:pageBlockButtons>
                            <apex:pagemessages id="maltaApprovalError"
                                rendered="{!showMaltaApprovalError}" />
                            <apex:pageBlockSection >
                                <apex:outputField value="{!cusrForm.Malta_System_Owner_Approval_Required__c}"
                                    label="Is System Owner Approval Required?"
                                    id="maltasystemownerapproval" />
                                <!--<apex:outputField value="{!cusrForm.Malta_Individual_Fab_Owner_Approval__c}" id="maltafabownerapproval"/>-->
                            </apex:pageBlockSection>
                        </apex:pageblock>


                        <apex:outputPanel id="malta" rendered="{!showMaltaSection}">
                            <apex:pageBlock title="FAB Approver Details">
                            
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && fab8Approver.Status__c != 'New'}"> -->
                                    <!---jabee--->
                                <!--<apex:pageblockButtons location="bottom"
                                    rendered="{!fab8Approver.Status__c != 'New' && fab8Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab8Approver.Id}&fromForm=true"
                                        rendered="{!fab8Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>      
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab9Approver.Status__c != 'New' && fab9Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab9Approver.Id}&fromForm=true"
                                        rendered="{!fab9Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab10Approver.Status__c != 'New' && fab10Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab10Approver.Id}&fromForm=true"
                                        rendered="{!fab10Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>-->
                                <apex:pageBlockSection collapsible="false" columns="2"
                                    title="FAB 8 {!IF(cusrForm.FAB_8_Void__c,'(Fab has been Voided)','')}"
                                    rendered="{!showFab8table}">
                                    <apex:outputField value="{!fab8Approver.No_of_Approvers__c}" />
                                    <apex:outputField value="{!fab8Approver.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!fab8Approver.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!fab8Approver.Approver1__c}"
                                        rendered="{!enableFab8Approver1}" />
                                    <apex:outputField value="{!fab8Approver.Approver2__c}"
                                        rendered="{!enableFab8Approver2}" />
                                    <apex:outputField value="{!fab8Approver.Approver3__c}"
                                        rendered="{!enableFab8Approver3}" />
                                    <apex:outputField value="{!fab8Approver.Approver4__c}"
                                        rendered="{!enableFab8Approver4}" />
                                    <apex:outputField value="{!fab8Approver.Approver5__c}"
                                        rendered="{!enableFab8Approver5}" />
                                    <apex:outputField value="{!fab8Approver.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!fab8Approver.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <!--<div align="center">       
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab8Approver.Id}&fromForm=true"
                                        rendered="{!fab8Approver.Status__c != 'Pending Approval'}" />
                                    </div> -->
                                </apex:pageBlockSection>
                                     <apex:outputPanel rendered="{!fab8Approver.Status__c != 'New' && fab8Approver.Id!=null}">
                                         <div align="center">                              
                                            <apex:commandButton value="Fab 8 Approval History"
                                            action="/apex/CuSRApprovalViewForm?Id={!fab8Approver.Id}&fromForm=true"
                                            rendered="{!fab8Approver.Status__c != 'Pending Approval'}" />
                                          </div>
                                    </apex:outputPanel>
                                
                                <!--TEST-->
                                <apex:pageBlockTable value="{!fab8ApproverList}" var="fab8Appr"
                                    rendered="{!fab8ApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab8Appr.procId}"
                                            rendered="{!(showApproveReject || (fab8ApprovalUser && loggedInUser.Id == fab8Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_8_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!fab8Appr.ApproverId.Name}"
                                            action="/{!fab8Appr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!fab8Appr.StepStatus}" />
                                </apex:pageBlockTable>
                                
                            </apex:pageBlock>
                        </apex:outputPanel>

                        <apex:outputPanel id="maltasysownerpanel"
                            rendered="{!showMaltaSystemOwner}">
                            <apex:pageBlock title="System Owner Approval Details">
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && maltaSystemOwnerApproval.Status__c != 'New'}"> -->
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!maltaSystemOwnerApproval.Status__c != 'New'}">
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!maltaSystemOwnerApproval.Id}&fromForm=true"
                                        rendered="{!maltaSystemOwnerApproval.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageBlockSection collapsible="false" columns="2">
                                    <apex:outputField value="{!maltaSystemOwnerApproval.No_of_Approvers__c}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Approver1__c}"
                                        rendered="{!enableMaltaSystemApprover1}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Approver2__c}"
                                        rendered="{!enableMaltaSystemApprover2}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Approver3__c}"
                                        rendered="{!enableMaltaSystemApprover3}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Approver4__c}"
                                        rendered="{!enableMaltaSystemApprover4}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Approver5__c}"
                                        rendered="{!enableMaltaSystemApprover5}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!maltaSystemOwnerApproval.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                </apex:pageBlockSection>
                                <apex:pageBlockTable value="{!maltaSystemOwnerApproverList}"
                                    var="maltaSysAppr"
                                    rendered="{!maltaSystemOwnerApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!maltaSysAppr.procId}"
                                            rendered="{!(showApproveReject || (maltaSytemOwnerApprover && loggedInUser.Id == maltaSysAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_8_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!maltaSysAppr.ApproverId.Name}"
                                            action="/{!maltaSysAppr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!maltaSysAppr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                    </apex:tab>

                    <apex:tab id="maltaimplementationtab"
                        label="Implementation Details" name="maltaimplementation"
                        rendered="{!cusrForm.Malta_Ready_for_Approval__c}">
                        <apex:outputPanel rendered="{!showMaltaSection}">
                            <apex:pageBlock title="Implementation Details : Malta">
                                 <!--<apex:pageBlockButtons location="top"
                                                    rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_8__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_8_Void__c == false}">   
                                        <apex:commandButton value="Add"
                                                    action="{!addNewFab8Implementation}" /> 
                                </apex:pageBlockButtons>-->
                                
                                <apex:outputPanel id="Fab8TaskTable" rendered="{!showFab8table}">
                                    <div align="center">
                                     <apex:commandButton value="Add" action="{!addNewFab8Implementation}"/> 
                                     </div>
                                    <apex:pageBlockSection title="FAB 8 {!IF(cusrForm.FAB_8_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab8TaskList}" var="fab8">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab8.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab8.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab8.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab8.Assignee__c || loggedInUser.Id == fab8.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab8.Id}"
                                                        rendered="{!fab8.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab8.Assignee__c || loggedInUser.Id == fab8.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab8.Fab__c}" />
                                            <apex:column value="{!fab8.Assignee__c}" />
                                            <apex:column value="{!fab8.Action__c}" />
                                            <apex:column value="{!fab8.Comments__c}" />
                                            <apex:column value="{!fab8.Planned_End_Date__c}" />
                                            <apex:column value="{!fab8.Status__c}" />
                                            <apex:column value="{!fab8.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                    </apex:outputPanel>
                                    <!--TEST-->
                            </apex:pageBlock>
                        </apex:outputPanel>
                    </apex:tab>
                </apex:tabPanel>
            </apex:pageblock>
        </apex:tab>
        
        
        <!--FAB 9 Start-->
        <apex:tab label="Essex Junction" name="essexjunction" id="essexjunctiontab"
            rendered="{!showEssexJunctionSection}">
            <apex:pageblock >
                <apex:pagemessage severity="INFO" strength="1"
                    summary="Waiting to Submit for Approval for other sites."
                    rendered="{!cusrForm.Essex_Junction_Ready_for_Approval__c == true && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                <apex:tabPanel id="essexjunctionsubtab" value="{!selectedEssexJunctionSubTabName}"
                    switchType="client">
                    <apex:tab id="essexjunctioncosttab" label="Costing & Time Line"
                        name="essexjunctioncost"
                        rendered="{!cusrForm.Essex_Junction_Ready_for_Approval__c}">
                        <apex:pageBlock >
                            <apex:pageblockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_9__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_9_Void__c == false}">
                                <apex:commandButton value="Add" action="{!addCuSRCostForEssexJunction}" />
                            </apex:pageblockButtons>
                            <apex:outputPanel id="essexjunctioncosttable"
                                rendered="{!showEssexJunctionCostTable}">
                                <apex:pageBlock >
                                    <apex:pageBlockTable value="{!essexJunctionCostList }" var="essexjunctioncost">
                                        <apex:column headerValue="Action" styleClass="actionColumn">
                                            <apex:actionRegion >
                                                <!-- <apex:commandLink value="View" action="/{!essexjunctioncost.Id}"
                                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false}" /> -->
                                                <apex:commandLink value="View" action="/{!essexjunctioncost.Id}" />
                                            </apex:actionRegion>
                                        </apex:column>
                                        <apex:column value="{!essexjunctioncost.Implementation__c}" />
                                        <apex:column value="{!essexjunctioncost.Implementation_Comments__c}" />
                                        <apex:column value="{!essexjunctioncost.Fab__c}" />
                                        <apex:column value="{!essexjunctioncost.Total_Labour_Cost__c}" />
                                        <apex:column value="{!essexjunctioncost.Labour_Hours__c}" />
                                        <apex:column value="{!essexjunctioncost.Hardware_Cost__c}" />
                                        <apex:column value="{!essexjunctioncost.Software_Cost__c}" />
                                        <apex:column value="{!essexjunctioncost.Other_Cost__c}" />
                                        <apex:column value="{!essexjunctioncost.Total_Cost__c}" />
                                    </apex:pageBlockTable>
                                    <br />
                                </apex:pageBlock>
                            </apex:outputPanel>
                            <apex:outputpanel id="essexjunctionsummary">
                                <apex:pageblockSection title="Summary" collapsible="false">
                                    <apex:outputField value="{!cusrForm.Total_Cost_for_Essex_Junction__c}" />
                                </apex:pageblockSection>
                            </apex:outputpanel>
                        </apex:pageBlock>
                    </apex:tab>

                    <apex:tab id="essexjunctionapprovaltab" label="Stakeholder's Approval"
                        name="essexjunctionapproval">
                        <apex:pageblock >
                            <apex:pageBlockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.FAB_9_Void__c == false && cusrForm.Status__c != 'Implemented') && cusrForm.Essex_Junction_Ready_for_Approval__c == false) || (cusrForm.Status__c == 'Implemented' && cusrForm.Additional_FAB_9__c && cusrForm.FAB_9_Void__c == false)}">
                                <apex:commandButton value="Edit"
                                    action="{!EditButtonOnEssexJunctionApprovalTab}" />
                                <apex:commandButton value="Submit for Approval"
                                    action="{!essexJunctionSubmitForApproval}"
                                    rendered="{!cusrForm.Essex_Junction_Ready_for_Approval__c == false}" />
                            </apex:pageBlockButtons>
                            <apex:pagemessages id="essexJunctionApprovalError"
                                rendered="{!showEssexJunctionApprovalError}" />
                            <apex:pageBlockSection >
                                <apex:outputField value="{!cusrForm.Esx_Jun_System_Owner_Approval_Required__c}"
                                    label="Is System Owner Approval Required?"
                                    id="essexjunctionsystemownerapproval" />
                                <!--<apex:outputField value="{!cusrForm.Malta_Individual_Fab_Owner_Approval__c}" id="maltafabownerapproval"/>-->
                            </apex:pageBlockSection>
                        </apex:pageblock>


                        <apex:outputPanel id="essexjunction" rendered="{!showEssexJunctionSection}">
                            <apex:pageBlock title="FAB Approver Details">
                            
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && fab8Approver.Status__c != 'New'}"> -->
                                    <!---jabee--->
                                <!--<apex:pageblockButtons location="bottom"
                                    rendered="{!fab8Approver.Status__c != 'New' && fab8Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab8Approver.Id}&fromForm=true"
                                        rendered="{!fab8Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>      
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab9Approver.Status__c != 'New' && fab9Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab9Approver.Id}&fromForm=true"
                                        rendered="{!fab9Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab10Approver.Status__c != 'New' && fab10Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab10Approver.Id}&fromForm=true"
                                        rendered="{!fab10Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>-->
                                
                                <!--TEST--->
                                <apex:pageBlockSection collapsible="false" columns="2"
                                    title="FAB 9 {!IF(cusrForm.FAB_9_Void__c,'(Fab has been Voided)','')}"
                                    rendered="{!showFab9table}">
                                   
                                    <apex:outputField value="{!fab9Approver.No_of_Approvers__c}" />
                                    <apex:outputField value="{!fab9Approver.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!fab9Approver.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!fab9Approver.Approver1__c}"
                                        rendered="{!enableFab9Approver1}" />
                                    <apex:outputField value="{!fab9Approver.Approver2__c}"
                                        rendered="{!enableFab9Approver2}" />
                                    <apex:outputField value="{!fab9Approver.Approver3__c}"
                                        rendered="{!enableFab9Approver3}" />
                                    <apex:outputField value="{!fab9Approver.Approver4__c}"
                                        rendered="{!enableFab9Approver4}" />
                                    <apex:outputField value="{!fab9Approver.Approver5__c}"
                                        rendered="{!enableFab9Approver5}" />
                                    <apex:outputField value="{!fab9Approver.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />                                        
                                    <apex:outputField value="{!fab9Approver.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                        

                                </apex:pageBlockSection>
                                <apex:outputPanel rendered="{!fab9Approver.Status__c != 'New' && fab9Approver.Id!=null}">
                                    <div align="center">
                                        <apex:commandButton value="Fab 9 Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab9Approver.Id}&fromForm=true"
                                        rendered="{!fab9Approver.Status__c != 'Pending Approval'}" />
                                    </div>
                                </apex:outputPanel>
                                
                                <!--TEST-->
                                <apex:pageBlockTable value="{!fab9ApproverList}" var="fab9Appr"
                                    rendered="{!fab9ApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab9Appr.procId}"
                                            rendered="{!(showApproveReject || (fab9ApprovalUser && loggedInUser.Id == fab9Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_9_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!fab9Appr.ApproverId.Name}"
                                            action="/{!fab9Appr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!fab9Appr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                        <apex:outputPanel id="essexjunctionsysownerpanel"
                            rendered="{!showEssexJunctionSystemOwner}">
                            <apex:pageBlock title="System Owner Approval Details">
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && maltaSystemOwnerApproval.Status__c != 'New'}"> -->
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!essexJunctionSystemOwnerApproval.Status__c != 'New'}">
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!essexJunctionSystemOwnerApproval.Id}&fromForm=true"
                                        rendered="{!essexJunctionSystemOwnerApproval.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageBlockSection collapsible="false" columns="2">
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.No_of_Approvers__c}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Approver1__c}"
                                        rendered="{!enableEssexJunctionSystemApprover1}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Approver2__c}"
                                        rendered="{!enableEssexJunctionSystemApprover2}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Approver3__c}"
                                        rendered="{!enableEssexJunctionSystemApprover3}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Approver4__c}"
                                        rendered="{!enableEssexJunctionSystemApprover4}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Approver5__c}"
                                        rendered="{!enableEssexJunctionSystemApprover5}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!essexJunctionSystemOwnerApproval.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                </apex:pageBlockSection>
                                <apex:pageBlockTable value="{!essexJunctionSystemOwnerApproverList}"
                                    var="essexJunctionSysAppr"
                                    rendered="{!essexJunctionSystemOwnerApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!essexJunctionSysAppr.procId}"
                                            rendered="{!(showApproveReject || (essexJunctionSytemOwnerApprover && loggedInUser.Id == essexJunctionSysAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_9_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!essexJunctionSysAppr.ApproverId.Name}"
                                            action="/{!essexJunctionSysAppr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!essexJunctionSysAppr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                    </apex:tab>

                    <apex:tab id="essexjunctionimplementationtab"
                        label="Implementation Details" name="essexjunctionimplementation"
                        rendered="{!cusrForm.Essex_Junction_Ready_for_Approval__c}">
                        <apex:outputPanel rendered="{!showEssexJunctionSection}">
                            <apex:pageBlock title="Implementation Details : Essex Junction">
                                 <!--<apex:pageBlockButtons location="top"
                                                    rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_8__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_8_Void__c == false}">   
                                        <apex:commandButton value="Add"
                                                    action="{!addNewFab8Implementation}" /> 
                                </apex:pageBlockButtons>-->
                                
                                    <!--TEST-->
                                    <apex:outputPanel id="Fab9TaskTable" rendered="{!showFab9table}">
                                     <div align="center">       
                                    <apex:commandButton value="Add" action="{!addNewFab9Implementation}" style="align:center" /> 
                                    </div> 
                                    <apex:pageBlockSection title="FAB 9 {!IF(cusrForm.FAB_9_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab9TaskList}" var="fab9">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab8.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_9_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab9.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab9.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_9_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab9.Assignee__c || loggedInUser.Id == fab9.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab9.Id}"
                                                        rendered="{!fab9.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_9_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab9.Assignee__c || loggedInUser.Id == fab9.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab9.Fab__c}" />
                                            <apex:column value="{!fab9.Assignee__c}" />
                                            <apex:column value="{!fab9.Action__c}" />
                                            <apex:column value="{!fab9.Comments__c}" />
                                            <apex:column value="{!fab9.Planned_End_Date__c}" />
                                            <apex:column value="{!fab9.Status__c}" />
                                            <apex:column value="{!fab9.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                    </apex:outputPanel>
                                    <!--TEST-->
                            </apex:pageBlock>
                        </apex:outputPanel>
                    </apex:tab>
                </apex:tabPanel>
            </apex:pageblock>
        </apex:tab>
        <!--FAB 9 End-->
        
        <!--FAB 10 Start-->
        <apex:tab label="East Fishkill" name="eastfishkill" id="eastfishkilltab"
            rendered="{!showEastFishkillSection}">
            <apex:pageblock >
                <apex:pagemessage severity="INFO" strength="1"
                    summary="Waiting to Submit for Approval for other sites."
                    rendered="{!cusrForm.East_Fishkill_Ready_for_Approval__c == true && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                <apex:tabPanel id="eastfishkillsubtab" value="{!selectedEastFishkillSubTabName}"
                    switchType="client">
                    <apex:tab id="eastfishkillcosttab" label="Costing & Time Line"
                        name="eastfishkillcost"
                        rendered="{!cusrForm.East_Fishkill_Ready_for_Approval__c}">
                        <apex:pageBlock >
                            <apex:pageblockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_10__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_10_Void__c == false}">
                                <apex:commandButton value="Add" action="{!addCuSRCostForEastFishkill}" />
                            </apex:pageblockButtons>
                            <apex:outputPanel id="eastfishkillcosttable"
                                rendered="{!showEastFishkillCostTable}">
                                <apex:pageBlock >
                                    <apex:pageBlockTable value="{!eastFishkillCostList}" var="eastfishkillcost">
                                        <apex:column headerValue="Action" styleClass="actionColumn">
                                            <apex:actionRegion >
                                                <!-- <apex:commandLink value="View" action="/{!eastfishkillcost.Id}"
                                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false}" /> -->
                                                <apex:commandLink value="View" action="/{!eastfishkillcost.Id}" />
                                            </apex:actionRegion>
                                        </apex:column>
                                        <apex:column value="{!eastfishkillcost.Implementation__c}" />
                                        <apex:column value="{!eastfishkillcost.Implementation_Comments__c}" />
                                        <apex:column value="{!eastfishkillcost.Fab__c}" />
                                        <apex:column value="{!eastfishkillcost.Total_Labour_Cost__c}" />
                                        <apex:column value="{!eastfishkillcost.Labour_Hours__c}" />
                                        <apex:column value="{!eastfishkillcost.Hardware_Cost__c}" />
                                        <apex:column value="{!eastfishkillcost.Software_Cost__c}" />
                                        <apex:column value="{!eastfishkillcost.Other_Cost__c}" />
                                        <apex:column value="{!eastfishkillcost.Total_Cost__c}" />
                                    </apex:pageBlockTable>
                                    <br />
                                </apex:pageBlock>
                            </apex:outputPanel>
                            <apex:outputpanel id="eastfishkillsummary">
                                <apex:pageblockSection title="Summary" collapsible="false">
                                    <apex:outputField value="{!cusrForm.Total_Cost_for_East_Fishkill__c}" />
                                </apex:pageblockSection>
                            </apex:outputpanel>
                        </apex:pageBlock>
                    </apex:tab>

                    <apex:tab id="eastfishkillapprovaltab" label="Stakeholder's Approval"
                        name="eastfishkillapproval">
                        <apex:pageblock >
                            <apex:pageBlockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.FAB_10_Void__c == false && cusrForm.Status__c != 'Implemented') && cusrForm.East_Fishkill_Ready_for_Approval__c == false) || (cusrForm.Status__c == 'Implemented' && cusrForm.Additional_FAB_10__c && cusrForm.FAB_10_Void__c == false)}">
                                <apex:commandButton value="Edit"
                                    action="{!EditButtonOnEastFishkillApprovalTab}" />
                                <apex:commandButton value="Submit for Approval"
                                    action="{!eastFishkillSubmitForApproval}"
                                    rendered="{!cusrForm.East_Fishkill_Ready_for_Approval__c == false}" />
                            </apex:pageBlockButtons>
                            <apex:pagemessages id="eastFishkillApprovalError"
                                rendered="{!showEastFishkillApprovalError}" />
                            <apex:pageBlockSection >
                                <apex:outputField value="{!cusrForm.EastFishkillSystemOwnerApproval_Required__c}"
                                    label="Is System Owner Approval Required?"
                                    id="eastfishkillsystemownerapproval" />
                                <!--<apex:outputField value="{!cusrForm.Malta_Individual_Fab_Owner_Approval__c}" id="maltafabownerapproval"/>-->
                            </apex:pageBlockSection>
                        </apex:pageblock>


                        <apex:outputPanel id="eastfishkill" rendered="{!showEastFishkillSection}">
                            <apex:pageBlock title="FAB Approver Details">
                            
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && fab8Approver.Status__c != 'New'}"> -->
                                    <!---jabee--->
                                <!--<apex:pageblockButtons location="bottom"
                                    rendered="{!fab8Approver.Status__c != 'New' && fab8Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab8Approver.Id}&fromForm=true"
                                        rendered="{!fab8Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>      
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab9Approver.Status__c != 'New' && fab9Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab9Approver.Id}&fromForm=true"
                                        rendered="{!fab9Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab10Approver.Status__c != 'New' && fab10Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab10Approver.Id}&fromForm=true"
                                        rendered="{!fab10Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>-->
                                
                                <!--TEST--->
                                <apex:pageBlockSection collapsible="false" columns="2"
                                    title="FAB 10 {!IF(cusrForm.FAB_10_Void__c,'(Fab has been Voided)','')}"
                                    rendered="{!showFab10table}">
                                    <apex:outputField value="{!fab10Approver.No_of_Approvers__c}" />
                                    <apex:outputField value="{!fab10Approver.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!fab10Approver.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!fab10Approver.Approver1__c}"
                                        rendered="{!enableFab10Approver1}" />
                                    <apex:outputField value="{!fab10Approver.Approver2__c}"
                                        rendered="{!enableFab10Approver2}" />
                                    <apex:outputField value="{!fab10Approver.Approver3__c}"
                                        rendered="{!enableFab10Approver3}" />
                                    <apex:outputField value="{!fab10Approver.Approver4__c}"
                                        rendered="{!enableFab10Approver4}" />
                                    <apex:outputField value="{!fab10Approver.Approver5__c}"
                                        rendered="{!enableFab10Approver5}" />
                                    <apex:outputField value="{!fab10Approver.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!fab10Approver.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                </apex:pageBlockSection> 
                                 <apex:outputPanel rendered="{!fab10Approver.Status__c != 'New' && fab10Approver.Id!=null}">
                                    <div align="center">
                                        <apex:commandButton value="Fab 10 Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab10Approver.Id}&fromForm=true"
                                        rendered="{!fab10Approver.Status__c != 'Pending Approval'}" />
                                    </div>
                                </apex:outputPanel>
                                
                                <!--TEST-->
                                <apex:pageBlockTable value="{!fab10ApproverList}" var="fab10Appr"
                                    rendered="{!fab10ApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!fab10Appr.procId}"
                                            rendered="{!(showApproveReject || (fab10ApprovalUser && loggedInUser.Id == fab10Appr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_10_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!fab10Appr.ApproverId.Name}"
                                            action="/{!fab10Appr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!fab10Appr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                        <apex:outputPanel id="eastfishkillsysownerpanel"
                            rendered="{!showEastFishkillSystemOwner}">
                            <apex:pageBlock title="System Owner Approval Details">
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && maltaSystemOwnerApproval.Status__c != 'New'}"> -->
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!eastFishkillSystemOwnerApproval.Status__c != 'New'}">
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!eastFishkillSystemOwnerApproval.Id}&fromForm=true"
                                        rendered="{!eastFishkillSystemOwnerApproval.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageBlockSection collapsible="false" columns="2">
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.No_of_Approvers__c}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Approver1__c}"
                                        rendered="{!enableEastFishkillSystemApprover1}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Approver2__c}"
                                        rendered="{!enableEastFishkillSystemApprover2}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Approver3__c}"
                                        rendered="{!enableEastFishkillSystemApprover3}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Approver4__c}"
                                        rendered="{!enableEastFishkillSystemApprover4}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Approver5__c}"
                                        rendered="{!enableEastFishkillSystemApprover5}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!eastFishkillSystemOwnerApproval.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                </apex:pageBlockSection>
                                <apex:pageBlockTable value="{!eastFishkillSystemOwnerApproverList}"
                                    var="eastFishkillSysAppr"
                                    rendered="{!eastFishkillSystemOwnerApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!eastFishkillSysAppr.procId}"
                                            rendered="{!(showApproveReject || (eastFishkillSytemOwnerApprover && loggedInUser.Id == eastFishkillSysAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.FAB_10_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!eastFishkillSysAppr.ApproverId.Name}"
                                            action="/{!eastFishkillSysAppr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!eastFishkillSysAppr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                    </apex:tab>

                    <apex:tab id="eastfishkillimplementationtab"
                        label="Implementation Details" name="eastfishkillimplementation"
                        rendered="{!cusrForm.East_Fishkill_Ready_for_Approval__c}">
                        <apex:outputPanel rendered="{!showEastFishkillSection}">
                            <apex:pageBlock title="Implementation Details : Essex Junction">
                                 <!--<apex:pageBlockButtons location="top"
                                                    rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_8__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_8_Void__c == false}">   
                                        <apex:commandButton value="Add"
                                                    action="{!addNewFab8Implementation}" /> 
                                </apex:pageBlockButtons>-->
                                
                                    <!--TEST-->
                                    <apex:outputPanel id="Fab10TaskTable" rendered="{!showFab10table}">
                                        <div align="center"> 
                                        <apex:commandButton value="Add" action="{!addNewFab10Implementation}" style="align:center"/> 
                                        </div>
                                    <apex:pageBlockSection title="FAB 10 {!IF(cusrForm.FAB_10_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!fab10TaskList}" var="fab10">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!fab10.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_10_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!fab10.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!fab10.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_10_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab10.Assignee__c || loggedInUser.Id == fab10.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!fab10.Id}"
                                                        rendered="{!fab10.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.FAB_10_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == fab10.Assignee__c || loggedInUser.Id == fab10.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!fab10.Fab__c}" />
                                            <apex:column value="{!fab10.Assignee__c}" />
                                            <apex:column value="{!fab10.Action__c}" />
                                            <apex:column value="{!fab10.Comments__c}" />
                                            <apex:column value="{!fab10.Planned_End_Date__c}" />
                                            <apex:column value="{!fab10.Status__c}" />
                                            <apex:column value="{!fab10.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                    <!--TEST-->
                                </apex:outputPanel>
                            </apex:pageBlock>
                        </apex:outputPanel>
                    </apex:tab>
                </apex:tabPanel>
            </apex:pageblock>
        </apex:tab>
        <!--FAB 10 End-->
        
        <!--ASIC Start-->
        <apex:tab label="ASIC" name="asic" id="asictab"
            rendered="{!showASICSection}">
            <apex:pageblock >
                <apex:pagemessage severity="INFO" strength="1"
                    summary="Waiting to Submit for Approval for other sites."
                    rendered="{!cusrForm.ASIC_Ready_for_Approval__c == true && (cusrForm.Status__c == 'New' || cusrForm.Status__c == 'Rejected')}" />
                <apex:tabPanel id="asicsubtab" value="{!selectedASICSubTabName}"
                    switchType="client">
                    <apex:tab id="asiccosttab" label="Costing & Time Line"
                        name="asiccost"
                        rendered="{!cusrForm.ASIC_Ready_for_Approval__c}">
                        <apex:pageBlock >
                            <apex:pageblockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_ASIC__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.ASIC_Void__c == false}">
                                <apex:commandButton value="Add" action="{!addCuSRCostForASIC}" />
                            </apex:pageblockButtons>
                            <apex:outputPanel id="asiccosttable"
                                rendered="{!showASICCostTable}">
                                <apex:pageBlock >
                                    <apex:pageBlockTable value="{!asicCostList}" var="asiccost">
                                        <apex:column headerValue="Action" styleClass="actionColumn">
                                            <apex:actionRegion >
                                                <!-- <apex:commandLink value="View" action="/{!asiccost.Id}"
                                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false}" /> -->
                                                <apex:commandLink value="View" action="/{!asiccost.Id}" />
                                            </apex:actionRegion>
                                        </apex:column>
                                        <apex:column value="{!asiccost.Implementation__c}" />
                                        <apex:column value="{!asiccost.Implementation_Comments__c}" />
                                        <apex:column value="{!asiccost.Fab__c}" />
                                        <apex:column value="{!asiccost.Total_Labour_Cost__c}" />
                                        <apex:column value="{!asiccost.Labour_Hours__c}" />
                                        <apex:column value="{!asiccost.Hardware_Cost__c}" />
                                        <apex:column value="{!asiccost.Software_Cost__c}" />
                                        <apex:column value="{!asiccost.Other_Cost__c}" />
                                        <apex:column value="{!asiccost.Total_Cost__c}" />
                                    </apex:pageBlockTable>
                                    <br />
                                </apex:pageBlock>
                            </apex:outputPanel>
                            <apex:outputpanel id="asicsummary">
                                <apex:pageblockSection title="Summary" collapsible="false">
                                    <apex:outputField value="{!cusrForm.Total_Cost_for_ASIC__c}" />
                                </apex:pageblockSection>
                            </apex:outputpanel>
                        </apex:pageBlock>
                    </apex:tab>

                    <apex:tab id="asicapprovaltab" label="Stakeholder's Approval"
                        name="asicapproval">
                        <apex:pageblock >
                            <apex:pageBlockButtons location="top"
                                rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.ASIC_Void__c == false && cusrForm.Status__c != 'Implemented') && cusrForm.ASIC_Ready_for_Approval__c == false) || (cusrForm.Status__c == 'Implemented' && cusrForm.Additional_ASIC__c && cusrForm.ASIC_Void__c == false)}">
                                <apex:commandButton value="Edit"
                                    action="{!EditButtonOnASICApprovalTab}" />
                                <apex:commandButton value="Submit for Approval"
                                    action="{!asicSubmitForApproval}"
                                    rendered="{!cusrForm.ASIC_Ready_for_Approval__c == false}" />
                            </apex:pageBlockButtons>
                            <apex:pagemessages id="asicApprovalError"
                                rendered="{!showASICApprovalError}" />
                            <apex:pageBlockSection >
                                <apex:outputField value="{!cusrForm.ASIC_System_Owner_Approval_Required__c}"
                                    label="Is System Owner Approval Required?"
                                    id="asicsystemownerapproval" />
                                <!--<apex:outputField value="{!cusrForm.Malta_Individual_Fab_Owner_Approval__c}" id="maltafabownerapproval"/>-->
                            </apex:pageBlockSection>
                        </apex:pageblock>


                        <apex:outputPanel id="asic" rendered="{!showASICSection}">
                            <apex:pageBlock title="FAB Approver Details">
                            
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && fab8Approver.Status__c != 'New'}"> -->
                                    <!---jabee--->
                                <!--<apex:pageblockButtons location="bottom"
                                    rendered="{!fab8Approver.Status__c != 'New' && fab8Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab8Approver.Id}&fromForm=true"
                                        rendered="{!fab8Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>      
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab9Approver.Status__c != 'New' && fab9Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab9Approver.Id}&fromForm=true"
                                        rendered="{!fab9Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!fab10Approver.Status__c != 'New' && fab10Approver.Id!=null}">                                    
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!fab10Approver.Id}&fromForm=true"
                                        rendered="{!fab10Approver.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>-->
                                
                                <!--TEST--->
                                <apex:pageBlockSection collapsible="false" columns="2"
                                    title="ASIC {!IF(cusrForm.ASIC_Void__c,'(Fab has been Voided)','')}"
                                    rendered="{!showASICtable}">
                                    <apex:outputField value="{!asicApprover.No_of_Approvers__c}" />
                                    <apex:outputField value="{!asicApprover.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!asicApprover.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!asicApprover.Approver1__c}"
                                        rendered="{!enableASICApprover1}" />
                                    <apex:outputField value="{!asicApprover.Approver2__c}"
                                        rendered="{!enableASICApprover2}" />
                                    <apex:outputField value="{!asicApprover.Approver3__c}"
                                        rendered="{!enableASICApprover3}" />
                                    <apex:outputField value="{!asicApprover.Approver4__c}"
                                        rendered="{!enableASICApprover4}" />
                                    <apex:outputField value="{!asicApprover.Approver5__c}"
                                        rendered="{!enableASICApprover5}" />
                                    <apex:outputField value="{!asicApprover.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!asicApprover.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                </apex:pageBlockSection> 
                                 <apex:outputPanel rendered="{!asicApprover.Status__c != 'New' && asicApprover.Id!=null}">
                                    <div align="center">
                                        <apex:commandButton value="ASIC Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!asicApprover.Id}&fromForm=true"
                                        rendered="{!asicApprover.Status__c != 'Pending Approval'}" />
                                    </div>
                                </apex:outputPanel>
                                
                                <!--TEST-->
                                <apex:pageBlockTable value="{!asicApproverList}" var="asicAppr"
                                    rendered="{!asicApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!asicAppr.procId}"
                                            rendered="{!(showApproveReject || (asicApprovalUser && loggedInUser.Id == asicAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.ASIC_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!asicAppr.ApproverId.Name}"
                                            action="/{!asicAppr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!asicAppr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                        <apex:outputPanel id="asicsysownerpanel"
                            rendered="{!showASICSystemOwner }">
                            <apex:pageBlock title="System Owner Approval Details">
                                <!-- <apex:pageblockButtons location="bottom"
                                    rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_8_Void__c == false && maltaSystemOwnerApproval.Status__c != 'New'}"> -->
                                <apex:pageblockButtons location="bottom"
                                    rendered="{!asicSystemOwnerApproval.Status__c != 'New'}">
                                    <apex:commandButton value="Approval History"
                                        action="/apex/CuSRApprovalViewForm?Id={!asicSystemOwnerApproval.Id}&fromForm=true"
                                        rendered="{!asicSystemOwnerApproval.Status__c != 'Pending Approval'}" />
                                </apex:pageblockButtons>
                                <apex:pageBlockSection collapsible="false" columns="2">
                                    <apex:outputField value="{!asicSystemOwnerApproval.No_of_Approvers__c}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Do_you_require_approval_from_all_users__c}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Status__c}" />
                                    <br />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Approver1__c}"
                                        rendered="{!enableASICSystemApprover1}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Approver2__c}"
                                        rendered="{!enableASICSystemApprover2}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Approver3__c}"
                                        rendered="{!enableASICSystemApprover3}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Approver4__c}"
                                        rendered="{!enableASICSystemApprover4}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Approver5__c}"
                                        rendered="{!enableASICSystemApprover5}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Legacy_Approved_By__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                    <apex:outputField value="{!asicSystemOwnerApproval.Legacy_Approved_DateTime__c}"
                                        rendered="{!cusrForm.Legacy__c}" />
                                </apex:pageBlockSection>
                                <apex:pageBlockTable value="{!asicSystemOwnerApproverList}"
                                    var="asicSysAppr"
                                    rendered="{!asicSystemOwnerApproverList != null}">
                                    <apex:column headerValue="Action" styleClass="actionColumn">
                                        <apex:commandLink value="Approve/Reject"
                                            styleClass="actionLink"
                                            action="/p/process/ProcessInstanceWorkitemWizardStageManager?id={!asicSysAppr.procId}"
                                            rendered="{!(showApproveReject || (asicSytemOwnerApprover && loggedInUser.Id == asicSysAppr.ApproverId.Id)) && cusrForm.Status__c != 'Void' && !(cusrForm.ASIC_Void__c)}" />
                                    </apex:column>
                                    <apex:column headerValue="Approver">
                                        <apex:commandLink value="{!asicSysAppr.ApproverId.Name}"
                                            action="/{!asicSysAppr.ApproverId.Id}" />
                                    </apex:column>
                                    <apex:column headerValue="Status"
                                        value="{!asicSysAppr.StepStatus}" />
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </apex:outputPanel>

                    </apex:tab>

                    <apex:tab id="asicimplementationtab"
                        label="Implementation Details" name="asicimplementation"
                        rendered="{!cusrForm.ASIC_Ready_for_Approval__c}">
                        <apex:outputPanel rendered="{!showASICSection}">
                            <apex:pageBlock title="Implementation Details : ASIC">
                                 <!--<apex:pageBlockButtons location="top"
                                                    rendered="{!((cusrForm.Status__c != 'Void' && cusrForm.Status__c != 'Implemented') || cusrForm.Additional_FAB_8__c) && accessToAddButtonOnCostAndImplementation == true && cusrForm.FAB_8_Void__c == false}">   
                                        <apex:commandButton value="Add"
                                                    action="{!addNewFab8Implementation}" /> 
                                </apex:pageBlockButtons>-->
                                
                                    <!--TEST-->
                                    <apex:outputPanel id="ASICTaskTable" rendered="{!showASICtable}">
                                        <div align="center"> 
                                        <apex:commandButton value="Add" action="{!addNewASICImplementation}" style="align:center"/> 
                                        </div>
                                    <apex:pageBlockSection title="ASIC {!IF(cusrForm.ASIC_Void__c,'(Fab has been Voided)','')}"
                                        collapsible="false" columns="1">
                                        <apex:pageBlockTable value="{!asicTaskList}" var="asic">
                                            <apex:column headerValue="Action" styleClass="actionColumn">
                                                <apex:actionRegion >
                                                    <!-- <apex:commandLink value="View" action="/{!asic.Id}"
                                                        styleClass="actionLink"
                                                        rendered="{!cusrForm.Status__c != 'Void' && cusrForm.FAB_10_Void__c == false}" /> -->
                                                    <apex:commandLink value="View" action="/{!asic.Id}"
                                                        styleClass="actionLink" />
                                                    <apex:outputLabel value=" | "
                                                        rendered="{!asic.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.ASIC_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == asic.Assignee__c || loggedInUser.Id == asic.CreatedById)}" />
                                                    <apex:commandLink value="Edit" styleClass="actionLink"
                                                        action="/apex/CuSRImplementationEditPage?Id={!asic.Id}"
                                                        rendered="{!asic.Status__c == 'Pending' && cusrForm.Status__c != 'Void' && cusrForm.ASIC_Void__c == false && (cusrFormInitiator == true || loggedInUser.Id == asic.Assignee__c || loggedInUser.Id == asic.CreatedById)}" />
                                                </apex:actionRegion>
                                            </apex:column>
                                            <apex:column value="{!asic.Fab__c}" />
                                            <apex:column value="{!asic.Assignee__c}" />
                                            <apex:column value="{!asic.Action__c}" />
                                            <apex:column value="{!asic.Comments__c}" />
                                            <apex:column value="{!asic.Planned_End_Date__c}" />
                                            <apex:column value="{!asic.Status__c}" />
                                            <apex:column value="{!asic.Actual_End_Date__c}" />
                                        </apex:pageBlockTable>
                                    </apex:pageBlockSection>
                                    <!--TEST-->
                                </apex:outputPanel>
                            </apex:pageBlock>
                        </apex:outputPanel>
                    </apex:tab>
                </apex:tabPanel>
            </apex:pageblock>
        </apex:tab>
        <!--ASIC End-->
        
        </apex:tabPanel>
        </apex:pageBlock>

    </apex:form>
    <!-- <apex:relatedList list="CombinedAttachments" />
    <apex:relatedList list="ProcessSteps" /> -->
</apex:page>