<!-- 
    Type Name: opportunitysurvey.page
    Author: Cognizant 
    Created Date: 30-Apr-2014
    Reason: 
    Change History:
    Author: 
    Modified Date: 
    Reason: 
    -->
<apex:page Id="PageId"  standardStylesheets="true" cache="false" sidebar="false" showheader="false" controller="OpportunitySurveyController" showChat="false">


    <style>
    table tr td {
        padding: 3px !important;
    }
    </style>
    <html>
        <head>
            <title>Design Win\Loss Survey Page</title>
            <style type="text/css">
                body { background-color:#EEE;font-family:arial,sans-serif;padding:0px 0; }
                #container { background-color:#FFF;max-width:950px;margin:10px auto 10px auto;padding:0px 0 0px 0;border:2px solid #FFA62F;text-align:center;border-radius:20px; }
                #container2 { background-color:#FFF;max-width:900px;margin:20px auto 20px auto;padding:20px 0 20px 0;border:2px solid #CCC;text-align:left;border-radius:5px; }
                #logo { margin-bottom:15px; }
                p { padding:0;margin:0 0 10 10;color:#333; }
                /** Default view **/
                #divider { margin: 0 auto auto auto;width:65%;max-width:840px;border:0px;height:1px;background-color:#EEE; }
                #divider2 { width:100%;max-width:100%;border:1px;height:2px;background-color:#EEE; }
                textarea { width:90%;max-width:410px;border:1px solid #CCC;padding:5px;margin-top:5px;margin-bottom:5px;min-height:30px;max-height:200px;height:70px; }
                inputText{ width:90%;max-width:410px;border:1px solid #CCC;padding:5px;margin-top:5px;height:30px}
                table { margin: 0 auto; }
                label { font-weight: normal; font-weight: normal; font-size: 1.0em; color: #333; margin-center: 10px; display: inline-block;}  
                table tr:nth-child(odd) td { background: #FFFFFF;}
                table tr:nth-child(even) td{ background: #F0F0F0;}                  
            </style>
        </head>        
        <script type="text/javascript">
            window.history.forward();
            function noBack() { window.history.forward(); }
        </script>
        <script type="text/javascript">
            function enableLost()
            {
             if (document.getElementById("PageId:formId:Lost_to__c_Lost").value=='Other/Unknown'){
               document.getElementById("PageId:formId:Competitor_wafer_ASP_avg__c_Lost").disabled = true;
               document.getElementById("PageId:formId:Competitor_wafer_ASP_avg__c_Lost").value = '';
             }else{
               document.getElementById("PageId:formId:Competitor_wafer_ASP_avg__c_Lost").disabled = false;
             }
            }
            function enableDropped()
            {
             if (document.getElementById("PageId:formId:Lost_to__c_Dropped").value=='Other/Unknown'){
               document.getElementById("PageId:formId:Competitor_wafer_ASP_avg__c_Dropped").disabled = true;
               document.getElementById("PageId:formId:Competitor_wafer_ASP_avg__c_Dropped").value = '';
             }else{
               document.getElementById("PageId:formId:Competitor_wafer_ASP_avg__c_Dropped").disabled = false;
             }
            }
            
        </script>
        <body onload="window.resizeTo(screen.width,screen.height);">
        <div id="container">
            <apex:image id="logo" url="{!setting.Survey_Site_Logo__c}" height="30%" width="70%"/>
            <div id="container2">
                <apex:form Id="formId">
                
                    <apex:pagemessages id="msg" />
                    <apex:outputPanel Id="pnlNotPreview" rendered="{!isPreview == FALSE}" >
                        <table style="text-align:left;">
                            <tr>
                                <td Style="width:100%;">
                                    <apex:outputLabel value="{!$Label.OpportunitySurvey_Message3}" style="text-align:left;"   />
                                    <apex:outputLabel value=" (Note: All fields are mandatory.)" style="color: #FF0000;text-align:left;"   />
                                </td>
                            </tr>
                        </table>
                    </apex:outputPanel>
                    <apex:outputPanel Id="pnlPreview" rendered="{!isPreview == TRUE}">
                        <apex:outputLabel value="{!statusMessage}" style="text-align:left;font-weight: bold;" />
                    </apex:outputPanel>
                    
                    <table id="table21" width="95%" style="border-collapse: collapse;">
                        <tr >
                            <td style="width: 35%">                                        
                                <br/>                                                                 
                            </td>
                            <td style="width: 25%; align:right;">
                                <apex:outputLabel value="[0=Non-factor, 4=Primary factor]" style="color: #FF0000;text-align:right;"   />
                            </td>
                            <td style="width: 30%; align:left;">
                                <apex:outputLabel value="Comments [Optional,but  Required for 3 & 4]" style="color: #FF0000;text-align:left;"   />
                            </td>
                        </tr>
                    </table>
                    <hr id="divider2" />
                    <!-- #################################### Lost Start ####################################  -->  
                    <apex:outputPanel Id="pnlLost" rendered="{!varSurvey.SurveyFor__c == 'Lost'}">
                        <apex:outputPanel Id="pnlLostEdit" >
                            <table id="table21" width="95%" style="border-collapse: collapse;">
                                <tr >
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Relationship__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Relationship__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Customer_Relationship__c}" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true"   />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Customer_Relationship_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Relationship_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Slow_GF_Responsiveness__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Slow_GF_Responsiveness__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Slow_GF_Responsiveness__c}"  disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Slow_GF_Responsiveness_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Slow_GF_Responsiveness_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Poor_Perception_Confidence_of_GF__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Poor_Perception_Confidence_of_GF__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Poor_Perception_Confidence_of_GF__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Poor_Perception_Confidence_of_GF_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Poor_Perception_Confidence_of_GF_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Wafer_or_Die_Pricing__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Wafer_or_Die_Pricing__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Wafer_or_Die_Pricing__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Wafer_or_Die_Pricing_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Wafer_or_Die_Pricing_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Non_wafer_Pricing_NRE__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Non_wafer_Pricing_NRE__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Non_wafer_Pricing_NRE__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Non_wafer_Pricing_NRE_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Non_wafer_Pricing_NRE_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Turnkey_Support__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Turnkey_Support__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Turnkey_Support__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Turnkey_Support_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Turnkey_Support_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Capacity_Limitation__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Capacity_Limitation__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Capacity_Limitation__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Capacity_Limitation_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Capacity_Limitation_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.MPW_Prototyping_Gap__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.MPW_Prototyping_Gap__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.MPW_Prototyping_Gap__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.MPW_Prototyping_Gap_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.MPW_Prototyping_Gap_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Design_Partner_Gap__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Design_Partner_Gap__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Design_Partner_Gap__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Design_Partner_Gap_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Design_Partner_Gap_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.IP_gap__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.IP_gap__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.IP_gap__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.IP_Gap_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.IP_Gap_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Process_gap_device_performanc__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Process_gap_device_performanc__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Process_gap_device_performanc__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Process_Gap_Device_or_Performance_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Process_Gap_Device_or_Performance_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Incomplete_PDK_Modeling_Support__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Incomplete_PDK_Modeling_Support__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Incomplete_PDK_Modeling_Support__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Incomplete_PDK_Modeling_Support_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Incomplete_PDK_Modeling_Support_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Inadequate_technology_Process_maturit__c.inlineHelpText}" value="{!inadequateLabel}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Inadequate_technology_Process_maturit__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Inadequate_Technology_Process_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Inadequate_Technology_Process_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Quality_Issue__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Quality_Issue__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Quality_Issue__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Quality_Issue_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Quality_Issue_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.GF_is_not_the_incumbent__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.GF_is_not_the_incumbent__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.GF_is_not_the_incumbent__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.GF_is_not_the_incumbent_text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Quality_Issue_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                            <td style="width: 32%;align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Schedule_too_late__c.inlineHelpText}" value="{!ScheduletoolateLabel}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%;">
                                        <apex:selectRadio value="{!varSurvey.Schedule_too_late__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Schedule_too_late_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Schedule_too_late_Text__c.inlineHelpText}" />
                                    </td>
                            </tr>
                            </table>
                            <table id="table22" width="95%" style="border-collapse: collapse;">
                            
                            
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Lost_to__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Lost_to__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}"  id="Lost_to__c_Lost" value="{!varSurvey.Lost_to__c}" required="true" onchange="enableLost()" />
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Lost_to__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Competitor_wafer_ASP_avg__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Competitor_wafer_ASP_avg__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" id="Competitor_wafer_ASP_avg__c_Lost" value="{!varSurvey.Competitor_wafer_ASP_avg__c}" />
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Competitor_wafer_ASP_avg__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Design_Loss_as_the__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Design_Loss_as_the__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Design_Loss_as_the__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Design_Loss_as_the__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Comments_for_better__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Comments_for_better__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 90%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Comments_for_better__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Comments_for_better__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Corrective_Actions__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Corrective_Actions__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Corrective_Actions__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Corrective_Actions__c}" />
                                    </td>
                                </tr>
                            </table>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <!-- ################################## Lost End #########################################  --> 
                    
                    <!-- ################################## Dropped Start ####################################  -->  
                    <apex:outputPanel Id="pnlDropped" rendered="{!varSurvey.SurveyFor__c == 'Dropped'}">
                        <apex:outputPanel Id="pnlDroppedEdit" >
                            <table id="table21" width="95%" style="border-collapse: collapse;">
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Pricing_Margin_too_Low__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Pricing_Margin_too_Low__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Pricing_Margin_too_Low__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Pricing_or_Margin_too_Low_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Pricing_or_Margin_too_Low_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.PLC_rejection__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.PLC_rejection__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.PLC_rejection__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.PLC_Rejection_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.PLC_Rejection_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.No_Capacity_to_Support__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.No_Capacity_to_Support__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.No_Capacity_to_Support__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.No_Capacity_to_Support_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.No_Capacity_to_Support_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.No_Technology_Match__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.No_Technology_Match__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.No_Technology_Match__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.No_Technology_Match_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.No_Technology_Match_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Project_Cancelled__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Project_Cancelled__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Customer_Project_Cancelled__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Customer_Project_Lost_or_Cancelled_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Project_Lost_or_Cancelled_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Process_EOL__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Process_EOL__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Process_EOL__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Process_EOL_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Process_EOL_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Device_EOL__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Device_EOL__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Device_EOL__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Device_EOL_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Device_EOL_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Unsupported_Market_Segment__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Unsupported_Market_Segment__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Unsupported_Market_Segment__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Unsupported_Market_Segment_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Unsupported_Market_Segment_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Stability__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Stability__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Customer_Stability__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Customer_Stability_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Stability_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Failed_ASICS_or_SiPh_grading__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Failed_ASICS_or_SiPh_grading__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Failed_ASICS_or_SiPh_grading__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Failed_ASICS_or_SiPh_grading_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Customer_Stability_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                            </table>
                            <table id="table22" width="95%" style="border-collapse: collapse;">
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Lost_to__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Lost_to__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" id="Lost_to__c_Dropped" value="{!varSurvey.Lost_to__c}" required="true" onchange="enableDropped()" />
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Lost_to__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Competitor_wafer_ASP_avg__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Competitor_wafer_ASP_avg__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputText disabled="{!isPreview}" id="Competitor_wafer_ASP_avg__c_Dropped" value="{!varSurvey.Competitor_wafer_ASP_avg__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Design_Loss_as_the__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Design_Loss_as_the__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Design_Loss_as_the__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Design_Loss_as_the__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Comments_for_better__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Comments_for_better__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 70%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Comments_for_better__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Comments_for_better__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Corrective_Actions__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Corrective_Actions__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Corrective_Actions__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Corrective_Actions__c}" />
                                    </td>
                                </tr>
                            </table>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <!-- ################################# Dropped End ####################################  --> 
                    
                    <!-- ################################# Void Start #####################################  -->  
                    <apex:outputPanel Id="pnlVoid" rendered="{!varSurvey.SurveyFor__c == 'Void'}">
                        <apex:outputPanel Id="pnlVoidEdit" >
                            <table id="table21" width="95%" style="border-collapse: collapse;">
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Duplicate_Opportunity__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Duplicate_Opportunity__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Duplicate_Opportunity__c}" disabledClass="true" disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Duplicate_Opportunity_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Duplicate_Opportunity_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 30%">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Entered_in_Error__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Entered_in_Error__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:selectRadio value="{!varSurvey.Entered_in_Error__c}"  disabled="{!isPreview}" enabledClass="True" required="true"  >
                                            <apex:selectOptions value="{!items}"   rendered="true" />
                                        </apex:selectRadio>
                                    </td>
                                    <td style="width: 30%; align:left;">
                                        <apex:inputText size="30" disabled="{!isPreview}" value="{!varSurvey.Entered_in_Error_Text__c}" title="{!$ObjectType.OpportunitySurvey__c.fields.Entered_in_Error_Text__c.inlineHelpText}" />
                                    </td>
                                </tr>
                            </table>
                            <table id="table22" width="95%" style="border-collapse: collapse;">
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Comments_for_better__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Comments_for_better__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Comments_for_better__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Comments_for_better__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 35%; align:left;">
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields.Corrective_Actions__c.inlineHelpText}" value="{!$ObjectType.OpportunitySurvey__c.fields.Corrective_Actions__c.label}" />
                                        <br/>                                                                 
                                    </td>
                                    <td style="width: 50%; align:left;">
                                        <apex:inputField rendered="{!NOT(isPreview)}" value="{!varSurvey.Corrective_Actions__c}" required="true"/>
                                        <apex:outputField rendered="{!isPreview}"  value="{!varSurvey.Corrective_Actions__c}" />
                                    </td>
                                </tr>
                            </table>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <!-- ############################### Void End ############################################  --> 
                    
                    <!-- ############################ commandButton Start ####################################  --> 
                    <apex:outputPanel Id="pnlSubmit" >
                        <table id="table311" width="30%">
                            <tbody style="vertical-align: middle;">
                                <tr>
                                    <td style="width: 50%">
                                        <apex:commandButton style="float: right;" rendered="{!isPreview == FALSE}" styleclass="submit" id="submit" action="{!submitForm}" value="{!$Label.OpportunitySurvey_Submit_Button}" rerender="formId" status="ProcessingStatus" oncomplete="complete();"/>
                                    </td>
                                    <td style="width: 50%">
                                        <apex:commandButton styleclass="submit" value="Close" onclick="cancel();" Immediate="true"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                  
                    
                    <!-- ############################ commandButton End ####################################  --> 
                      
                        <apex:actionStatus id="ProcessingStatus">
                         <apex:facet name="start">
                                 <div><img class="waitingImage" src="/img/loading.gif" title="Processing...Please Wait..."/>Processing...Please Wait...</div>
                         </apex:facet>
                    </apex:actionStatus> 
                </apex:form>
            </div>
            <!-- ############################ Opportunity Details Start ####################################  -->         
            <apex:outputPanel Id="pnlOppDetails" rendered="{!fslistOpp != NULL}">
                <div id="container2">
                    <table id="tableCase" width="95%" style="border-collapse: collapse;">
                        <tbody style="vertical-align: bottom" >
                            <apex:repeat var="f" value="{!fslistOpp}" rendered="{!fslistOpp != NULL}"   >
                                <tr>
                                    <td style="width: 30%">
                                        <br/>                                                                 
                                        <apex:outputLabel title="{!$ObjectType.OpportunitySurvey__c.fields[f].Label}" value="{!$ObjectType.OpportunitySurvey__c.fields[f].Label}" />
                                    </td>
                                    <td style="width: 70%">
                                        <apex:outputText value="{!varSurvey[f]}" />
                                    </td>
                                </tr>
                            </apex:repeat>
                        </tbody>
                    </table>
                </div>
            </apex:outputPanel>
            <!-- ############################ Opportunity Details End ####################################  --> 
        </div>
        </body>
    </html>
    <script>
    
    function cancel(){
        try{
            if(parent.location.href.indexOf('lightning')!=-1)
                parent.location.href='/one/one.app#/sObject/{!varSurvey.Opportunity__c}/view';
            else window.top.close();

        }catch(e){
            parent.location.href='/one/one.app#/sObject/{!varSurvey.Opportunity__c}/view';
        }
    }
    
    function complete(){
        if({!isMessage}=='true'){
            try{
                if(parent.location.href.indexOf('lightning')!=-1)
                    parent.location.href='/one/one.app#/sObject/{!varSurvey.Opportunity__c}/view';
                else window.close();
    
            }catch(e){
                parent.location.href='/one/one.app#/sObject/{!varSurvey.Opportunity__c}/view';
            }
    
        }
    }
        
    </script>
</apex:page>