<!--
    Author: Zymark Ambat
    Description: This serves as the List View page for MPW Process and MPW Process DM.
    History: 
        ZAmbat    050642015    - page creation.
-->
<apex:page id="MPWConfigSettingsTabVF" showHeader="true" sidebar="true" controller="MPWConfigSettingsTabController" cache="false">

	<apex:stylesheet value="{!URLFOR($Resource.MPWRelatedCSS, '/MPWRelatedCSS/MPWConfigSettingsTabVF.css')}" />

    <apex:sectionHeader title="MPW" subtitle="{!IF(selectedTab == 'MPWProcess', 'Process', 'ProcessDM')}" help="https://help.salesforce.com/htviewhelpdoc?id=co_edit.htm&siteLang=en_US" />
    <apex:pageMessages id="errorSection" />
    
    <apex:form id="form1">
        <apex:pageBlock id="mainBlock"> 
        
            <apex:panelGrid columns="3">
                <apex:outputLabel value="View:" style="text-align:left;font-weight:bold;padding-right:.230em;"/>
                <apex:selectList id="geometry" value="{!geometry.Geometry__c}" size="1">
                      <apex:selectOptions value="{!geometryOptions}"/>
                </apex:selectList>
                <apex:commandButton value="Go!" action="{!optionRecords}" reRender="mainBlock"/>
            </apex:panelGrid>
            
            <apex:pageBlockButtons location="top">
                <apex:commandButton value="Add New MPW Process" action="{!addNew}" />
            </apex:pageBlockButtons>
            
            <apex:pageBlockTable id="mpwConfigList" value="{!listMPWConfigSettings}" var="m" rendered="{!IF(OR(listMPWConfigSettings.size == null,listMPWConfigSettings.size > 0), true, false)}">
                <apex:column >
                    <apex:facet name="header">Action</apex:facet>
                    <apex:commandLink value="Edit" action="/apex/MPWConfigSettingsTranxVF?Id={!m.Id}&&tranx=Edit&&from={!selectedTab}&&returnURL={!currentURL}&link=true"/>
                    <apex:outputLabel value="  | " />
                    <apex:commandLink value="Clone" action="/apex/MPWConfigSettingsTranxVF?Id={!m.Id}&&tranx=Edit&&from={!selectedTab}&&returnURL={!currentURL}&clone=1&link=true"/>
                </apex:column>
                <apex:column value="{!m.Geometry__c}">
                    <apex:facet name="header">
                        <apex:outputPanel layout="block">
                            <apex:outputLabel value="{!$ObjectType.MPW_Config_Settings__c.fields.Geometry__c.label}" styleClass="hand colDiv" onclick="sort('Geometry__c','{!IF(ISBLANK(sortType),'asc',IF(sortType == 'desc','asc','desc'))}');"/>
                            <apex:image value="/img/sort_asc_arrow.gif" rendered="{!AND(sortField = 'Geometry__c',sortType ='asc')}" styleClass="colDiv"/>
                            <apex:image value="/img/sort_desc_arrow.gif" rendered="{!AND(sortField = 'Geometry__c',sortType ='desc')}" styleClass="colDiv"/>
                        </apex:outputPanel>
                    </apex:facet>  
                </apex:column>                
                <apex:column >
                    <apex:facet name="header">
                        <apex:outputPanel layout="block">
                            <apex:outputLabel value="{!$ObjectType.MPW_Config_Settings__c.fields.Name.label}" styleClass="hand colDiv" onclick="sort('Name','{!IF(ISBLANK(sortType),'asc',IF(sortType == 'desc','asc','desc'))}');"/>
                            <apex:image value="/img/sort_asc_arrow.gif" rendered="{!AND(sortField = 'Name',sortType ='asc')}" styleClass="colDiv"/>
                            <apex:image value="/img/sort_desc_arrow.gif" rendered="{!AND(sortField = 'Name',sortType ='desc')}" styleClass="colDiv"/>
                        </apex:outputPanel>
                    </apex:facet>     
                    <apex:outputLink onclick="viewRecord('{!m.Id}');">{!m.Name}</apex:outputLink>
                </apex:column>
                <apex:column value="{!m.Active__c}" rendered="{!IF(selectedTab == 'MPWProcess', true, false)}" />
                <apex:column value="{!m.Rule__c}" rendered="{!IF(selectedTab == 'MPWProcessDM', true, false)}" />
                
                <apex:facet name="footer">Showing Page {!currentPageNo} of {!totalNoOfPages} ({!totalNoOfRecords} Records)</apex:facet>
            </apex:pageBlockTable>
           
            <apex:outputText value="No records retrieved." rendered="{!IF(listMPWConfigSettings.size == 0, true, false)}" />
            
            <!--Pagination Controls -->
            <apex:outputPanel id="controlPanel" layout="block" style="margin: 0; white-space: nowrap; align: center; position: relative;" rendered="{!IF(totalNoOfRecords > 0, true, false)}">
                <center>
                    <apex:commandLink action="{!first}" rendered="{!HasPrevious}" style="text-decoration: none; color: #333;">
                        <img src="/s.gif" title="First Page" alt="First Page" class="firstin" />
                    </apex:commandLink>
                    <apex:outputPanel layout="none" rendered="{!NOT(HasPrevious)}">
                        <img src="/s.gif" alt="First Page" class="firstoff" />
                        <apex:outputText style="color: #a8a8a8;" value="" />
                    </apex:outputPanel> 
                    <apex:commandLink action="{!previous}" rendered="{!HasPrevious}" style="text-decoration: none; color: #333;">
                        <img src="/s.gif" title="Previous" alt="Previous" class="prev" />Previous
                    </apex:commandLink>
                    <apex:outputPanel layout="none" rendered="{!NOT(HasPrevious)}">
                        <img src="/s.gif" alt="Previous" class="prevoff" />
                        <apex:outputText style="color: #a8a8a8;" value="Previous" />
                    </apex:outputPanel>                
                    &nbsp; &nbsp;
                    <apex:commandLink action="{!next}" rendered="{!HasNext}" style="text-decoration: none; color: #333;">
                        Next<img src="/s.gif" title="Next" alt="Next" class="next" />
                    </apex:commandLink>
                    <apex:outputPanel layout="none" rendered="{!NOT(HasNext)}" style="color: #a8a8a8;">
                        <apex:outputText style="color: #a8a8a8;" value="Next" />
                        <img src="/s.gif" alt="Next" class="nextoff" />
                    </apex:outputPanel>
                    <apex:commandLink action="{!last}" rendered="{!HasNext}" style="text-decoration: none; color: #0000;">
                        <img src="/s.gif" title="Last Page" alt="Last Page" class="lastin" />
                    </apex:commandLink>
                    <apex:outputPanel layout="none" rendered="{!NOT(HasNext)}">
                        <apex:outputText style="color: #a8a8a8;" value="" />
                        <img src="/s.gif" alt="Last Page" class="lastoff" />
                    </apex:outputPanel>
                </center>
            </apex:outputPanel>
                                                                              
        </apex:pageBlock>
        
        <apex:actionfunction name="sort" action="{!sort}" rerender="mpwConfigList" status="status">     
            <apex:param name="sortfield" assignTo="{!sortField}" value=""/>
            <apex:param name="sorttype" assignTo="{!sortType}" value=""/>            
        </apex:actionfunction>
        
        <apex:actionFunction name="viewRecord" action="{!viewRecord}" rerender="form1">
            <apex:param name="id" value="" />
        </apex:actionFunction>
    </apex:form>
</apex:page>