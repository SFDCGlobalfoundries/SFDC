<!--
* Author: Sakthi
* Project: Global Foundries 
* Description: Page is created for show the signoff approval page where user can approve the signoff for selecting milestone
* History:
*    Abhishek/Sandesh 10/09/2016 Modified Option and Opportunity Header
-->
<apex:page controller="DesignExecutionSignOffController" tabStyle="Custom_Design__c" action="{!getUserLavelSignOffAccess}">

    <apex:form enctype="multipart/form-data">
                <apex:pageBlock title="">
      
            <style>
                body .bPageBlock .pbBody .red .pbSubheader{
                    background-color:#c00000;
                }
                body .bPageBlock .pbBody .grey .pbSubheader{
                    background-color:#e9e9e9;
                }
                body .bPageBlock .pbBody .grey .pbSubheader h3{
                color:#000;
                }
                .tableHeader 
                {
                  padding: 0px 10px 10px 0px;
                  margin: 0px 0px 0px 0px;
                  color: #4A4A56;
                  font-size: 100%;
                  //font-weight: bold;
                  background: white;
                  font-family: Arial,Helvetica,sans-serif;
                }
            </style>
                        
                       <!-- <apex:pageMessages id="showmsg"></apex:pageMessages> -->
                        <apex:pageBlockButtons >
                                <apex:commandButton value="Save" action="{!saveSignOffDetail}" >
                                        <apex:param name="recordName" value="{!recordTypeName}"/>
                                </apex:commandButton> 
                                <apex:commandButton value="Back to Design Phase Form" action="{!cancelExecutionDetail}"/> 
                                <apex:commandButton value="Requote" action="{!requoteExecutionDetail}"/> 
                            	<apex:commandButton value="Waiver Summary" onclick="window.open('/apex/DesignExecutionWaiverCapabilityRec?scontrolCaching=1&deid={!designExecution.Id}'); return false;"/>
                        </apex:pageBlockButtons>

        <apex:outputPanel styleClass="tableHeader" layout="block" >        
            <apex:pageBlockSection collapsible="false" title="Design Schedule" columns="1">
                <c:BnP_OptionHeader RcId="{!designExecution.Option__c}"></c:BnP_OptionHeader>
                <!--<apex:pageBlockSection collapsible="false" title="Opportunity" >
                                        <table border="0" width="240%" >
                                                <tr>
                                                        <td width="25%">End Customer: </td>
                                                        <td width="25%">{!If(designExecution.End_Customer__c != "",designExecution.End_Customer__c,'')}</td>
                                                        <td width="25%">Control Number:</td>
                                                        <td width="25%">{!If(designExecution.Opp_Control_Number__c !="", designExecution.Opp_Control_Number__c ,'')}</td>
                                                </tr>
                                                <tr>
                                                        <td>Soldto Customer:</td>
                                                        <td>{!If(designExecution.Soldto_Customer__c != "",designExecution.Soldto_Customer__c,'')}</td>
                                                        <td>Status:</td>
                                                        <td>{!If(designExecution.Status__c != "",designExecution.Status__c,'')}</td>
                                                </tr>
                                                <tr>
                                                        <td>End Customer Project:</td>
                                                        <td>{!If(designExecution.End_Customer_Project__c != "",designExecution.End_Customer_Project__c, '')}</td>
                                                </tr>
                                                <tr> 
                                                        <td>Customer Part Name:</td>
                                                        <td>{!If(designExecution.Customer_Part_Name__c != NULL ,designExecution.Customer_Part_Name__c,'')}</td>
                                                </tr>
                                        </table>
                                </apex:pageBlockSection>
                <apex:pageBlockSection collapsible="false" title="Option" >
                                        <table border="0" width="240%" class="tableHeader">
                                                <tr>
                                                        <td width="25%">MD Part Name:</td>
                                                        <td width="25%">{!If(designExecution.MD_Part_Name__c != "" , designExecution.MD_Part_Name__c, '')}</td>
                                                        <td width="25%">Control Number:</td>
                                                        <td width="25%">{!If(designExecution.Option_Control_Number__c != "", designExecution.Option_Control_Number__c, '')}</td>
                                                </tr>
                                                <tr>
                                                        <td width="25%">Product Type:</td>
                                                        <td width="25%">{!If(designExecution.Deliverable_Part_Type__c != "" , designExecution.Deliverable_Part_Type__c, '')} </td>
                                                        <td width="25%">Status:</td>
                                                        <td width="25%">{!If(designExecution.Part_Number_Status__c != "" , designExecution.Part_Number_Status__c, '')} </td>
                                                </tr>
                                                <tr>
                                                        <td width="25%">Deliverable Part Type:     </td>
                                                        <td width="25%">{!If(designExecution.Deliverable_Part_Type__c != "" , designExecution.Deliverable_Part_Type__c,'')} </td>
                                                        <td width="25%">Life Cycle State:</td>
                                                        <td width="25%"><img src="/resource/TR_DesignExecution" alt=" " border="0"/>  </td>
                                                </tr>
                                                <tr>
                                                        <td width="25%">Deliverable Part Number (DPN):</td>
                                                        <td width="25%">{!If(designExecution.Deliverable_Part_Number_DPN__c != "" ,designExecution.Deliverable_Part_Number_DPN__c, '')} </td>
                                                        <td width="25%">Design assay part number (DAPN):</td>
                                                        <td width="25%">{!If(designExecution.Design_assay_part_number_DAPN__c != "" ,designExecution.Design_assay_part_number_DAPN__c, '')} </td>
                                                </tr>
                                        </table>
                </apex:pageBlockSection>-->
                        </apex:pageBlockSection>
        </apex:outputpanel>
                        <apex:outputPanel styleClass="tableHeader" layout="block"> 
                                <apex:pageBlockSection collapsible="false" columns="1" title="Sign Off Module (SOM) Methodology - {!recordTypeName}">
                                </apex:pageBlockSection>
                        </apex:outputPanel> 
                                <table border="0" width="100%" class="tableHeader">
                                        <tr>
                                                <td>
                                                  <apex:outputText value="{!signOffModue.IBM_ASIC__c}" escape="false"></apex:outputText>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                  <apex:outputText value="{!signOffModue.Customer_Details__c}" escape="false"></apex:outputText>
                                                </td>
                                        </tr>
                                </table>

                                <table border="0" width="100%" class="tableHeader">
                                        <tr>
                                                <td width="80%"><font color="red">*</font> Has the Sign Off Methodology (SOM) been run against this design to determine whether or not the RTL Checkpoint has been reached?
                                        (               DCE)
                                                </td>
                                                <td width="20%">
                                                    <apex:inputCheckbox disabled="{!signOffApprover.rtlCheckPointApproval}" label="Yes" value="{!signOffApprover.rtlChecked}" 
                                                        selected="true" rendered="{!signOffApprover.selectRTLDCE}"/> 
                                                    <apex:inputCheckbox disabled="{!signOffApprover.rtlCheckPointApproval}" label="Yes" value="{!signOffApprover.rtlChecked}" 
                                                        selected="false" rendered="{!NOT(signOffApprover.selectRTLDCE)}"/> 
                                                    
                                                </td>
                                        </tr>
                                        <tr><td>&nbsp;</td></tr>
                                        <tr>
                                                <td colspan="2"> Please attach the required SOM Capsule here: 
                                                        <apex:inputFile value="{!signOffAttachment.body}" filename="{!signOffAttachment.name}"/>
                                                        
                                                </td>
                                        </tr>
                                        
                                </table>
                                <apex:outputPanel styleClass="tableHeader" layout="block">
                                  <apex:pageBlockSection collapsible="false" columns="1" title="{!recordTypeName} Verification:">
                                        <table border="0" width="100%" class="tableHeader">
                                                <tr>
                                                        <td colspan="2"> <u>Application Engineer</u> </td>
                                                </tr>
                                                <tr>
                                                    <td width="80%"><font color="red">*</font> I have reviewed the answers in this document and to the best of my knowledge they are complete and accurate.
                                                    </td>
                                                    <td width="20%"> 
                                                    <apex:inputCheckbox disabled="{!signOffApprover.aeApproval}" label="Yes" value="{!signOffApprover.aeChecked}" 
                                                                        selected="true" rendered="{!signOffApprover.selectAE}"/>
                                                    <apex:inputCheckbox disabled="{!signOffApprover.aeApproval}" label="Yes" value="{!signOffApprover.aeChecked}" 
                                                                        selected="false" rendered="{!NOT(signOffApprover.selectAE)}"/>  
                                                    </td>
                                                </tr>
                                                <tr>
                                                        <td colspan="2"> <u>Field Design Center Engineer</u> </td>
                                                </tr>
                                                <tr>
                                                        <td width="80%"><font color="red">*</font> I have reviewed the answers in this document and to the best of my knowledge they are complete and accurate.
                                                </td>
                                                    <td width="20%"> 
                                                        <apex:inputCheckbox disabled="{!signOffApprover.dceApproval}" label="Yes" value="{!signOffApprover.dceChecked}" 
                                                                    selected="true" rendered="{!signOffApprover.selectDCE}"/> 
                                                        <apex:inputCheckbox disabled="{!signOffApprover.dceApproval}" label="Yes" value="{!signOffApprover.dceChecked}" 
                                                                    selected="false" rendered="{!NOT(signOffApprover.selectDCE)}"/> 
                                                    </td>
                                                </tr>
                                                <tr>
                                                        <td colspan="2"> <u>Physical Design Engineer</u> </td>
                                                </tr>
                                                <tr>
                                                        <td width="80%"><font color="red">*</font> I have reviewed the answers in this document and to the best of my knowledge they are complete and accurate.
                                                </td>
                                                        <td width="20%"> 
                                                            <apex:inputCheckbox disabled="{!signOffApprover.pdApproval}" label="Yes" value="{!signOffApprover.pdChecked}" 
                                                                                selected="true" rendered="{!signOffApprover.selectPD}"/>
                                                            <apex:inputCheckbox disabled="{!signOffApprover.pdApproval}" label="Yes" value="{!signOffApprover.pdChecked}" 
                                                                                selected="false" rendered="{!NOT(signOffApprover.selectPD)}"/>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td colspan="2"> <u>{ Product Engineer</u> </td>
                                                </tr>
                                                <tr>
                                                        <td width="80%"><font color="red">*</font> I have reviewed the answers in this document and to the best of my knowledge they are complete and accurate.
                                                </td>
                                                        <td width="20%"> 
                                                            <apex:inputCheckbox disabled="{!signOffApprover.peApproval}" label="Yes" value="{!signOffApprover.peChecked}" 
                                                                                selected="true" rendered="{!signOffApprover.selectPE}"/> 
                                                            <apex:inputCheckbox disabled="{!signOffApprover.peApproval}" label="Yes" value="{!signOffApprover.peChecked}" 
                                                                                selected="false" rendered="{!NOT(signOffApprover.selectPE)}"/> 
                                                    </td>
                                                </tr>
                                        </table>              
                                </apex:pageBlockSection>
                        </apex:outputPanel>
                        <apex:outputPanel styleClass="tableHeader" layout="block">
                                <apex:pageBlockSection collapsible="false" columns="1" title="Customer Approval">
                                </apex:pageBlockSection>           
                        </apex:outputPanel>
                        <table border="0" width="100%" class="tableHeader">

                                <tr><td>&nbsp;</td></tr>
                                <tr>
                                        <td colspan="2"> Please attach customer approval document here: 
                                        <apex:inputFile value="{!customerApprovalAttachment.body}" filename="{!customerApprovalAttachment.name}"/>
                                        
                                        </td>
                                </tr>
                                <tr>
                                        <td width="80%"> The customer has reviewed and approved the document (DCE) 
                                        </td>
                                        <td width="20%">
                                        <apex:inputCheckbox disabled="{!signOffApprover.dceReviewdApproval}" label="Yes" value="{!signOffApprover.dceReviewChecked}" 
                                                        selected="true" rendered="{!signOffApprover.selectDCEReview}"/> 
                                        <apex:inputCheckbox disabled="{!signOffApprover.dceReviewdApproval}" label="Yes" value="{!signOffApprover.dceReviewChecked}" 
                                                        selected="false" rendered="{!NOT(signOffApprover.selectDCEReview)}"/> 

                                        </td>
                                </tr>
                   </table>
                        <apex:pageBlocksection title="Attachments"> 
                                <apex:actionRegion >   
                                        <apex:outputPanel >
                                                <table class="ui-widget" style="width:1000px;table-layout:fixed;font-size:11px;" id="table_cds">
                                                        <thead> <tr>
                                                                <td class="ui-widget-header" style="width:270px">Action</td>
                                                                <td class="ui-widget-header" style="width:270px">Title</td>
                                                                <td class="ui-widget-header" style="width:270px">Created By</td>
                                                        </tr></thead>
                                                        <tbody>
                                                                <apex:repeat value="{!SOMAttachmentId}" var="na">
                                                                        <tr>
                                                                                <td class="ui-widget-content" > <apex:outputLink value="/servlet/servlet.FileDownload?file={!na.Id}" target="_blank" style="width:270px;">View</apex:outputLink>&nbsp;
                                                                                </td>
                                                                                <td class="ui-widget-content" > <apex:outputLink value="/{!na.Id}" target="_blank" style="width:270px;">{!SUBSTITUTE(na.Name,'CDS_HEADER_STARTSWITH','')}</apex:outputLink></td> 
                                                                                <td class="ui-widget-content" > <apex:outputText value="{!na.CreatedBy.Name}" style="width:270px;"></apex:outputText> </td>
                                                                        </tr>
                                                                </apex:repeat> 
                                                        </tbody>
                                                </table>
                                        </apex:outputPanel>
                                </apex:actionRegion>
                        </apex:pageBlockSection> 
                        
        </apex:pageBlock>
    </apex:form>
</apex:page>