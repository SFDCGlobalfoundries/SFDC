<apex:page controller="GF_DynamicQueryHandler" id="pageId" sidebar="false" showHeader="false" action="{!prepareGridColumn}">
   <c:JqueryLibrary />
      
      <Style>
      
            .ui-jqgrid-bdiv{
                max-height: 260px;
            }      
            .myBorder {
                background-color:#f8f8f8;border-width:1px;
                border-style:solid;
                border-color:#CCCCCC;
                border-radius:10px; 
            }
            .myButton {
                background-color:#ff8930;
                -moz-border-radius:7px;
                -webkit-border-radius:7px;
                border-radius:7px;
                border:1px solid #c97e1c;
                display:inline-block;
                color:#ffffff;
                font-family:Trebuchet MS;
                font-size:11px;
                font-weight:bold;
            }
            
      </Style>
      
      	 <apex:outputPanel id="dummyPanel">
         </apex:outputPanel>
            
        <!-- START OF FORM -->        
        <apex:form id="formId">
            <apex:actionFunction name="exportToExcel" action="{!exportToExcel}"/>
            
            <apex:actionFunction name="redirectToConverToExcel" action="{!redirectToConverToExcel}"/>
            <!-- 
            <apex:actionFunction name="exportToExcelOdata" action="{!exportToExcelReport}" rerender ="dummyPanel">
            	<apex:param name="para" assignTo="{!para}" value=""/>
            	<apex:param name="customerInitial" assignTo="{!customerInitial}" value=""/>
            </apex:actionFunction>
            --> 
            <!-- Start: Commented by Hitesh for resolving access of data to Portal User.
                                 
           <apex:actionFunction name="exportToExcelOdata" action="{!exportToExcelReport}" oncomplete="reDirectToExport();">
                <apex:param name="para" assignTo="{!para}" value=""/>
            </apex:actionFunction>
            
            <apex:actionFunction name="reDirectToExport" action="{!reDirectToExport}" rerender="dummyPanel"/> 
            
            End: Commented by Hitesh for resolving access of data to Portal User. -->                    
           
           <!-- Start: Code added by Hitesh in place of commented code -->
           <apex:actionFunction name="exportToExcelOdata" action="{!exportToExcelReport}"  rerender="dummyPanel" oncomplete="unBlockPage();reDirectToExport();">
                <apex:param name="para" assignTo="{!para}" value=""/>
            </apex:actionFunction>
            
            <apex:actionFunction name="reDirectToExport" action="{!reDirectToExport}" />  
            <!-- End: Code added by Hitesh in place of commented code  -->
            
            <!--START OF PAGE BLOCK TO SELECT ALL INPUT FIELD TO PERFORM DYNAMIC ORDER QUERY OPERATIONS -->
                <div id="innerPageBlkId" class="myBorder">
                       <table width="100%" border="0" style="margin-top:3px;margin-left:1px;">
                            <tr>
                                <td colspan="2">     
                                    <apex:outputLabel value="{!$Label.GF_DQ_PO}"
                                                      for="poId" id="label4"
                                                      title="Purchase Order"
                                                      style="padding-right:60px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                    </apex:outputLabel>
                                                      
                                    <apex:inputText value="{!orderQueryObj.orderQuery_PO}"
                                                    id="poId">
                                    </apex:inputText>
                                </td>
                                    
                                <td colspan="2">
                                    <apex:outputLabel value="{!$Label.GF_DQ_FAB}"
                                                      for="fId"
                                                      id="label1"
                                                      title="Clean Room"
                                                      style="padding-right:10px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                    </apex:outputLabel>
                                                      
                                    <apex:selectList value="{!orderQueryObj.orderQuery_FAB}"
                                                     size="1"
                                                     id="fId"
                                                     style="width:150px">
                                                     
                                        <apex:selectOptions value="{!orderQueryObj.fabList}"/>
                                    </apex:selectList>
                                </td> 
                                    
                                <td colspan="2">
                                    <apex:outputLabel value="{!$Label.GF_DQ_CUSTOMER_PART_NAME}"
                                                      for="cpName"
                                                      id="label3"
                                                      title="Item Identification as per customer definition"
                                                      style="padding-right:33px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                    </apex:outputLabel>
                                                      
                                    <apex:inputText value="{!orderQueryObj.orderQuery_customerPartName}" 
                                                    id="cpName">
                                    </apex:inputText>
                                </td>
                          </tr>          
                          
                          <tr>  
                          
                            <td colspan="2">
                                <apex:outputLabel value="{!$Label.GF_DQ_SO}" 
                                                  for="soId" id="label9" 
                                                  title="Sales Order Number"
                                                  style="padding-right:60px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                </apex:outputLabel>
                                                  
                                <apex:inputText value="{!orderQueryObj.orderQuery_SO}" 
                                                id="soId">
                                </apex:inputText>
                            </td>
                            
                            <td colspan="2">
                                <apex:outputLabel value="{!$Label.GF_DQ_GEOMETRY}"
                                                  for="gmId"
                                                  id="label21"
                                                  title="Technology Node"
                                                  style="padding-right:27px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                 </apex:outputLabel>
                                 
                                <apex:selectList value="{!orderQueryObj.orderQuery_geometry}"
                                                 size="1"
                                                 id="gmId"
                                                 style="width:150px">
                                    <apex:selectOptions value="{!orderQueryObj.geometryList}"/>
                                </apex:selectList>
                            </td>
                                 
                            <td colspan="2">
                                <apex:outputLabel value="{!$Label.GF_DQ_INTERNAL_PART_NAME}"
                                                  for="IpId"
                                                  id="label6"
                                                  title="Item Identification as per Internal Manufacturing  definition" 
                                                  style="padding-right:47px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                </apex:outputLabel>
                                
                                <apex:inputText value="{!orderQueryObj.orderQuery_internalPartName}"
                                                id="IpId">
                                </apex:inputText>
                            </td>
                            
                        </tr>       
                    
                        <tr>
                            <td colspan="2">
                                <apex:outputLabel value="{!$Label.GF_DQ_ORDER_STATUS}"
                                                  for="orderId"
                                                  id="orStatusId"
                                                  title="Order Status of PO"
                                                  style="padding-right:20px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                </apex:outputLabel>
                                
                                <apex:selectList value="{!orderQueryObj.orderQuery_orderStatus}"
                                                 size="1"
                                                 id="orderId"
                                                 style="width:156px">
                                    <apex:selectOptions value="{!orderQueryObj.orderStatusList}"/>
                                </apex:selectList>
                            </td>
                            
                            <td colspan="2">          
                                <apex:outputLabel value="{!$Label.GF_DQ_ORDER_TYPE}"
                                                  for="orderType"
                                                  id="orTypeId"
                                                  title="Type of Order (Standard or Blanket)"
                                                  style="padding-right:27px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                </apex:outputLabel>
                                
                                <apex:selectList value="{!orderQueryObj.orderQuery_orderType}"
                                                 size="1"
                                                 id="orderType"
                                                 style="width:150px">
                                    <apex:selectOptions value="{!orderQueryObj.orderTypeList}"/>
                                    
                                </apex:selectList>
                            </td> 
                            
                            <td colspan="2">
                                <apex:outputLabel value="{!$Label.GF_DQ_ORDER_FROM_DATE}"
                                                  for="fromId" 
                                                  id="frmId"
                                                  title="Order Creation Date (Book Date)" 
                                                  style="padding-right:55px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                </apex:outputLabel>
                                
                                <input type="text"
                                       placeholder="MM/DD/YYYY" 
                                       id="datepicker" />    
                            </td>
                        </tr>   
                        
                        <tr>
                            <td colspan="2">
                                <apex:outputLabel value="" 
                                                  id="label2"
                                                  style="padding-right:70px">
                                </apex:outputLabel>
                                
                                <apex:inputHidden ></apex:inputHidden>
                            </td>
                     
                           <td colspan="2"> 
                                <apex:outputLabel value="Customer" 
                                              for="custId" 
                                              id="custId" 
                                              rendered="{!IF(($Profile.Name=='GF CSR'),true,false)}" 
                                              style="padding-right:25px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                              
                            </apex:outputLabel>
                            
                             <apex:selectList value="{!custName}" 
                                                 size="1" 
                                                 id="cstShortNameId"
                                                 onchange="setCustomerShortName(this.value);" 
                                                 rendered="{!IF(($Profile.Name=='GF CSR'),true,false)}"

                                                 style="width:150px">
                                                 
                                    <apex:selectOptions value="{!customerList}"/>
                                    
                             </apex:selectList> 
                           </td>
                            
                           <td colspan="2">
                                <apex:outputLabel value="{!$Label.GF_DQ_ORDER_TO_DATE}"
                                                  id="ToId"
                                                  title="Order Creation Date (Book Date)" 
                                                  style="padding-right:70px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                                </apex:outputLabel>
                            
                                <input type="text" 
                                       placeholder="MM/DD/YYYY" 
                                       id="datepicker1"/>    
                          </td>
                      </tr>
                      
                       <tr>
                         <td colspan="2">
                             <apex:inputHidden />
                         </td>
                         
                         <td colspan="2">
                             <apex:inputHidden />
                             
                         </td>
                         
                         <td colspan="2">
                         
                             <apex:outputLabel value="Date Range" 
                                              for="pdfId" 
                                              id="pdfId" 
                                              style="padding-right:86px;font-weight:normal;font-family: Arial,Helvetica,sans-serif;font-size: 12px;color:#222">
                            </apex:outputLabel>
                            
                             <apex:selectList value="{!oldDate}" 
                                                 size="1" 
                                                 id="previousDateId"
                                                 onchange=" return setDate(this.value);" 
                                                 style="width:155px">
                                                 
                                    <apex:selectOptions value="{!PreviousDate}"/>
                                    
                                </apex:selectList> 
                            
                          </td>  
                     </tr>
                      
                 </table>     
                <!-- END OF PANEL GRID -->
                 <!-- BUTTON COMPONENT  -->
                <apex:panelGrid columns="4" style="margin-bottom:-3px">
                    <input type="button" value="{!$Label.GF_DQ_SUBMIT}" class="myButton" id="submitId" onclick="Finish();" style="margin-right:10px"/>
                    <input type="button" value="{!$Label.GF_DQ_CLEAR}" class="myButton" id="clearId" onclick="resetAllFields('ORDER');" style="margin-right:10px"/>
                    <input type="button" value="{!$Label.GF_DQ_ADVANCE}" class="myButton" id="showHideId" onclick="Advance();" style="margin-right:10px"/>
                    <input type="button" value="{!$Label.GF_DQ_BACK}" class="myButton" id="backBtnId" onclick="Back();" style="margin-right:10px"/>
                    <!-- <input type="button" value="{!$Label.GF_DQ_EXPORT_TO_EXCEL}" class="myButton" id="expToexl" onclick="exportOrderDataToExcel();" style="margin-right:400px"/>-->
                    <input type="button" value="{!$Label.GF_DQ_EXPORT_TO_EXCEL}" class="myButton" id="expToexl" onclick="validateExportToExcel('ORDER');" style="margin-right:400px"/>
                </apex:panelGrid> 
                <div class="message errorM3" id="commonErrorId"></div>
            <!-- END OF BUTTON COMPONENT -->
            </div>
            <!-- END OF PAGE BLOCK -->
            <apex:inputHidden value="{!gridParam}" id="gridInputParams"/>
            <apex:inputHidden value="{!gridName}" id="gridName"/>
        </apex:form> 
        <!-- END OF FORM -->
        
        <!--START OF GRID CREATION COMPONENT-->
        <c:GF_CommonGridOperationsComponent columnRecord="{!cNames}" colModelRecord="{!cModelNames}"/>    
        <!-- END OF GRID CREATION COMPONENT -->
        <div id="graphId"></div>
        <!--START OF PAGE BLOCK TABLE TO SHOW GRID DATA -->
        
        <div id="outerPageBlkId" class="myBorder" style="margin-top:5px">
            <apex:form >
               <table id="selectPageIndex"> 
                   <tr>
                        <td>
                            Search: <input type="search" 
                                           id="gridsearch" 
                                           placeholder="Search" 
                                           results="0" 
                                           class="gridsearch" 
                                           style="margin-right:285px"/> 
                           
                            <input type="button" 
                                   value="|<<" 
                                   class="myButton"
                                   title="First" 
                                   id="fst" 
                                   onclick="firstPage('ORDER_QUERY');return false;"/> 
                      
                           <input type="button" 
                                   value="<" 
                                   class="myButton" 
                                   id="previousId"
                                   title="Previous" 
                                   onclick="Previous('ORDER_QUERY');return false;"/>
                      
                            <input type="button" 
                                   value=">" 
                                   class="myButton" 
                                   id="nextId"
                                   title="Next" 
                                   onclick="Next('ORDER_QUERY');return false;"/>
                      
                            <input type="button" 
                                   value=">>|" 
                                   class="myButton" 
                                   id="lst"
                                   title="Last" 
                                   onclick="lastPage('ORDER_QUERY');return false;"/>
                                          
                         </td>
                         
                         <td>   
                            <div id ="pageIndexId" 
                                 style="color:#ff8930;font-style:italic;font-weight:normal;padding-right:5px;font-size:90%">
                            </div>
                        </td>
                        
                        <td>
                            <div id="selectPageIndexDivId">
                                <input type="text" 
                                       id="selectedIndex" 
                                       style="width:20px;height:15px;"/> 
                      
                                <input type ="button" 
                                       value ="GO"
                                       class="myButton" 
                                       onclick="selectedIdexPage();return false;" 
                                       style="margin-left:5px"/>
                            </div>
                        </td>
                  </tr>
                  
               </table> 
            </apex:form>
       
            <table style="margin: -5px 0px 0px 2px">
                <tr>
                    <td>
                        <table id="GridDataDiv" border="1"></table>
                        <table id="GridDataDiv1" border="1"></table>
                        <table id="GridDataDiv2" border="1"></table>
                        <table id="GridDataDiv3" border="1"></table>
                        <table id="GridDataDiv4" border="1"></table>
                        <table id="GridDataDiv5" border="1"></table>
                        <table id="GridDataDiv6" border="1"></table>
                        <table id="GridDataDiv7" border="1"></table>
                        <table id="GridDataDiv8" border="1"></table>
                        <table id="GridDataDiv9" border="1"></table> 
    <!--                    <table id="newGridDataDiv" border="1"></table>-->
                    </td>
                </tr>
            </table>
        <div id="GridComponentDiv"></div>
<!--    </apex:pageBlock> -->
    </div>
    <!-- END OF PAGE BLOCK TABLE TO SHOW GRID DATA -->
    <Script>
        
        var map = new HashMap();
        var rCount;
        
        function unBlockPage(){
            jQuery.unblockUI();
        }   
          $(document).ready(function() {
            rCount = '{!recordCount}';  
            //outerPblockId = document.getElementById("pageId:outerPageBlkId");
            outerPblockId   = document.getElementById("outerPageBlkId");
            advanceBtnId    = document.getElementById("showHideId");
            backBtnId       = document.getElementById("backBtnId"); 
            errorDivId      = document.getElementById("commonErrorId");
            exportToExcelId = document.getElementById("expToexl");
            nextPageId      = document.getElementById("nextId");
            previousPageId  = document.getElementById("previousId");
            first           = document.getElementById("fst");
            last            = document.getElementById("lst");
            pageNumber      = document.getElementById("pageIndexId");
            //lastPageNumber  = document.getElementById("totalPageIndex");
            pageIndex       = document.getElementById("selectPageIndex");

            $( "#datepicker").datepicker();
            $( "#datepicker1").datepicker();
            
            nextPageId.style.visibility='hidden';
            previousPageId.style.visibility='hidden';
            first.style.visibility='hidden';
            last.style.visibility='hidden';
            //pageNumber.style.visibility='hidden';
            pageIndex.style.visibility='hidden';
             
            if (exportToExcelId!=null && exportToExcelId!='undefined'){
                exportToExcelId.disabled=true;
            }   
            if (backBtnId!=null && backBtnId!='undefined'){
                backBtnId.disabled=true;
            }
            if (advanceBtnId!=null && advanceBtnId!='undefined'){
                advanceBtnId.disabled=true;
            }
            if(outerPblockId!=null && outerPblockId!='undefined'){
                outerPblockId.style.visibility='hidden';
            }
            if(errorDivId!=null && errorDivId!='undefined'){
                errorDivId.style.visibility='hidden';
            }
          
            var today  = new Date();
            var today1  = new Date();
            var previousDate = new Date(today1.setMonth(today1.getMonth()-3));
            fromDate = document.getElementById("datepicker").value = previousDate.getMonth()+1 +'/'+previousDate.getDate()+'/'+previousDate.getFullYear();
            toDate  = document.getElementById("datepicker1").value = today.getMonth()+1 +'/'+today.getDate()+'/'+today.getFullYear();  
          
            $('.ui-jqgrid .ui-jqgrid-bdiv').css({ 'overflow-y': 'scroll' });

         });
   
        /*
        * @ Company     :- Cognizant Technology Services    
        * @ Description :- Method calls Remote action to get dynamic query result from Data Warehouse
        * @ Returns     :- Result (JSON String), even (staus of result)
        * @ Date        :- 05-09-2013
        * @ Author      :- Navneet Rajput
        */
        var customerInitial='@@';
        
        function showDataInJqGrid(QTYPE,objOfQueryFlds){
            blockPage();
            setOrderQueryInputValues();
            var toDate4Excel = document.getElementById("datepicker1").value;
            var fromDate4Excel = document.getElementById("datepicker").value;
            
            orderInputParams = Order_PONumber+','+Order_SONumber+','+Order_Geometry+','
                              +Order_Fab+','+Order_InternalPartname+','+Order_CustomerPartname+','+Order_OrderStatus+','
                              +Order_OrderType+','+fromDate4Excel+','+toDate4Excel+','
                              +counter+','+customerInitial;
                              
            Visualforce.remoting.timeout = 120000;
            if (QTYPE=='ORDER_QUERY'){
                map.put('GridDataDiv',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getOrderReport}',
                    Order_PONumber,
                    Order_SONumber,
                    Order_Geometry,
                    Order_Fab, 
                    Order_InternalPartname,
                    Order_CustomerPartname,
                    Order_OrderStatus,
                    Order_OrderType,
                    fromDate,
                    toDate,
                    counter,
                    customerInitial,
                    OrderRequestHandler
                );
            } else if (QTYPE=='PO_REPORT'){
                //alert('DATA IS >>>>>>'+objOfQueryFlds.SO_NUMBER);
                orderInputParams = objOfQueryFlds.SO_NUMBER+','+objOfQueryFlds.CUST_ID;
                map.put('GridDataDiv1',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getPoReport}',
                    objOfQueryFlds.SO_NUMBER,
                    objOfQueryFlds.CUST_ID,
                    objOfQueryFlds.PARAM1,
                    objOfQueryFlds.PARAM2, 
                    PORequestHandler
                );
            } else if (QTYPE=='IPN_REPORT'){
                orderInputParams = objOfQueryFlds.ORG_ID+','+objOfQueryFlds.DEVICE_NAME;
                map.put('GridDataDiv2',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getIPNReport}',
                    objOfQueryFlds.ORG_ID,
                    objOfQueryFlds.DEVICE_NAME,
                    objOfQueryFlds.PARAM1,
                    objOfQueryFlds.PARAM2, 
                    IPNRequestHandler
                );
             }else if (QTYPE=='LOT_REPORT'){
                orderInputParams=objOfQueryFlds.LOT_ID+',';
                map.put('GridDataDiv3',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getLotReport}',
                    objOfQueryFlds.LOT_ID,
                    objOfQueryFlds.PARAM1,
                    objOfQueryFlds.PARAM2, 
                    LotRequestHandler
                );
             } else if (QTYPE=='SHIP_DATE_REPORT'){
                orderInputParams=objOfQueryFlds.SHIP_DATE+','+objOfQueryFlds.ORG_ID+','+objOfQueryFlds.CUSTOMER_ID;
                map.put('GridDataDiv4',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getShipDateReport}',
                    objOfQueryFlds.SHIP_DATE,
                    objOfQueryFlds.ORG_ID,
                    objOfQueryFlds.CUSTOMER_ID,
                    objOfQueryFlds.PARAM1,
                    objOfQueryFlds.PARAM2, 
                    shipDateRequestHandler
                );
             } else if (QTYPE=='WFR_ID_REPORT'){
                orderInputParams=objOfQueryFlds.LOT_NUM+','+objOfQueryFlds.CUST_ID;
                map.put('GridDataDiv5',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getWfrReport}',
                    objOfQueryFlds.LOT_NUM,
                    objOfQueryFlds.CUST_ID,
                    objOfQueryFlds.PARAM1,
                    objOfQueryFlds.PARAM2, 
                    WfrRequestHandler
                );
             }else if (QTYPE=='BACKLOG_WFR_REPORT'){
                orderInputParams = objOfQueryFlds.SO+',';
                map.put('GridDataDiv6',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getBacklogReport}',
                    objOfQueryFlds.SO,
                    backlogWfrRequestHandler
                );
             }else if (QTYPE=='BACKLOG_DIE_REPORT'){
                orderInputParams = objOfQueryFlds.SO+',';
                map.put('GridDataDiv7',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getBacklogReport}',
                    objOfQueryFlds.SO,
                    backlogDieRequestHandler
                );
             }else if (QTYPE=='SHIPPED_WFR_REPORT'){
                orderInputParams=objOfQueryFlds.SO+',';
                map.put('GridDataDiv8',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getShipmentOrderReport}',
                    objOfQueryFlds.SO,
                    shipmentWfrRequestHandler
                );
             } else if (QTYPE=='SHIPPED_DIE_REPORT'){
                orderInputParams=objOfQueryFlds.SO+',';
                map.put('GridDataDiv9',orderInputParams);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.GF_DynamicQueryHandler.getShipmentOrderReport}',
                    objOfQueryFlds.SO,
                    shipmentDieRequestHandler
                );
             }  
        }   
          
    function redirectToExcel(){
        jQuery.unblockUI();
        //redirectToConverToExcel();
    }
      //function to unblock the page  
      function unblockPage(){  
        $j.unblockUI();  
      }
    
    function selectedIdexPage(){
    
        var indexValue = document.getElementById("selectedIndex").value;
        if(indexValue!=null && indexValue!=''){ 
                counter=indexValue;
                showDataInJqGrid('ORDER_QUERY','');    
        } else {
            errorDivId.innerHTML = 'Please enter page number.';
            errorDivId.style.visibility='visible';
        }
    }      
    
    function Finish(){
        counter = 1;
        var fromDate = document.getElementById("datepicker1").value;
        var toDate = document.getElementById("datepicker").value;
        var isFromDateValid = validateDate(fromDate);
        var isToDateValid = validateDate(toDate);
        
        if (isFromDateValid && isToDateValid){
            showDataInJqGrid('ORDER_QUERY','');
        } else {
            errorDivId.innerHTML = 'Please Select Valid Date';
            errorDivId.style.visibility='visible';        
        }
    }   

    function viewChart(){
        $('#graphId').dialog({modal:true,
                   width : 500,
                   height :400,
                   title: 'Order Data Chart'
        });
    }
    
      $("#chartId").click( function() {
        $("#graphId").load('PieChartDemo', function() {
            $("#graphId").dialog({modal:true,
                   width : 800,
                   height :500,
                   title: 'Order Data Chart',
                   position: 'center'
            });
        });
    });
    
    function validateDate(dt){
    
        var pattern =new RegExp("^((0?[1-9]|1[012])[- /.](0?[1-9]|[12][0-9]|3[01])[- /.](19|20)?[0-9]{2})*$");
        return pattern.test(dt);    
    }
    
    function Back(){
        orderBack();
        //setGridWidth(1140,530);
    }
    
    function setGridWidth(tWidth,pWidth){
      //alert('inside setWidth');
      $('#frame').contents().find("#gview_GridDataDiv").css('width',tWidth+'px');
      $('#frame').contents().find("#gbox_GridDataDiv").css('width',tWidth+'px');
      $('#frame').contents().find(".ui-jqgrid-bdiv").css('width',tWidth+'px');
      $('#frame').contents().find(".ui-state-default.ui-jqgrid-hdiv").css('width',tWidth+'px');
      $('#frame').contents().find("#gridsearch").css('margin-right',pWidth+'px');
      
      $('#frame').contents().find(".ui-jqgrid-view").css('width',tWidth+'px');
      $('#frame').contents().find(".ui-jqgrid.ui-widget.ui-widget-content.ui-corner-all").css('width',tWidth+'px');
      
    }
    
    function setCustomerShortName(customerShortName){
       if (customerShortName.indexOf('ALL') > -1){   
           customerInitial = '@@';
       } else {
           customerInitial = customerShortName;
       }
   }     
   
   </script>
</apex:page>