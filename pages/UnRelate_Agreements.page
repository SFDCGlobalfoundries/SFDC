<!-- 
   Type Name: UnRelate_Agreements.page
   Author: Suvajit Majumder
   
    -->
<apex:page controller="AgreementUnRelateController" showchat="false" cache="false" title="UnLink Agreements">
     <apex:sectionHeader subtitle="UnMap Linked Agreements" title="{!objAgr.Apttus__FF_Agreement_Number__c} : {!objAgr.Name}"/>
    <apex:form id="TheForm" rendered="{!objAgr!=null}" >
        
     <apex:PageMessages ></apex:PageMessages>   
      
       
        
        <apex:pageBlock id="TablePanel" >
        
        
         <apex:outputPanel id="linkedrecordspanelnull" >
           <apex:outputPanel layout="block" style="max-height:300px;overflow:auto;" rendered="{!AgrLinkedList.size=0}">
               <apex:outputText style="font-weight:600" value="There are no linked records found for this parent."></apex:outputText>
           <center><apex:commandButton styleClass="search-block-button" value="Close" action="{!closeEvent}"/></center>
           </apex:outputPanel>
         
         </apex:outputPanel>
         
         
            <apex:outputPanel id="linkedrecordspanel" >
                <apex:outputPanel layout="block" style="max-height:300px;overflow:auto;" rendered="{!AgrLinkedList.size>0}">
                    <apex:pageBlockTable value="{!AgrLinkedList}" var="a" id="TablePanel1" style="padding-top: 15px;" >
                        <apex:column headerValue="All" style="width:10px" >
                            <apex:facet name="header">
                                <apex:inputcheckbox id="selectAllLinkedList"
                                    onclick="checkAll(this,'SearchList')" />
                            </apex:facet>
                            <apex:inputCheckbox value="{!a.isChecked}" id="SearchList" />
                        </apex:column>
                        <apex:column style="width:30px" headerValue="Agreement Number">
                            <apex:outputLink value="/{!a.objAgr.Id}" target="_blank">{!a.objAgr.Apttus__FF_Agreement_Number__c}</apex:outputlink>
                        </apex:column>
                        <apex:column style="width:280px" headerValue="Name">
                            <apex:outputLink value="/{!a.objAgr.Id}" target="_blank">{!a.objAgr.Name}</apex:outputlink>
                        </apex:column>
                        <apex:column style="width:100px" headerValue="Account">
                            <label>{!a.objAgr.Apttus__Account__r.Name}</label>
                        </apex:column>
                        <apex:column style="width:100px" rendered="{!ISPICKVAL($User.UserType,'Standard')}"  headerValue="Department Name">
                            <label>{!a.objAgr.GF_Department_Name__c}</label>
                        </apex:column>
                        <apex:column style="width:100px" headerValue="Effective Date">
                            <apex:outputText value="{0,date,MM/dd/yyyy}"> <apex:param value="{!a.objAgr.GF_Contract_Start_Date__c}" /> </apex:outputText>
                        </apex:column>
                        <apex:column style="width:80px" headerValue="Expiration Date">
                            <apex:outputText value="{0,date,MM/dd/yyyy}"> <apex:param value="{!a.objAgr.GF_Contract_End_Date__c}" /> </apex:outputText>
                        </apex:column>
                        <apex:column style="width:80px" headerValue="Contract Type">                            
                            <label>{!a.objAgr.CLM_Contract_Type__c}</label>
                        </apex:column>
                        
                        <apex:column style="width:80px" headerValue="CreatedDate">
                            <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                <apex:param value="{!a.objAgr.CreatedDate}" />
                            </apex:outputText>
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:outputPanel>
                
                <div class="process-block">
                    <apex:outputPanel rendered="{!AgrLinkedList.size>0}" >
                        <apex:commandButton styleClass="search-block-button" value="Unlink" action="{!remove}" />
                        <apex:commandButton styleClass="search-block-button" value="Close" action="{!closeEvent}"/>
                    </apex:outputPanel>
                    <apex:actionStatus id="searchStatus">
                        <apex:facet name="start">
                            <apex:image url="/img/loading32.gif" height="20px" />
                        </apex:facet>
                    </apex:actionStatus>
                </div>
            </apex:outputPanel>
        </apex:pageBlock>
    </apex:form>
    <script type="text/javascript">
        function checkAll(cb,section)
            {
                
                var inputElem = document.getElementsByTagName('input');                     
                for(var i=0; i<inputElem.length; i++)
                {                                                   
                        if(inputElem[i].id.indexOf(section)!=-1){
                            inputElem[i].checked = cb.checked;
                        }               
                }
            }
         
    </script>
    <style type="text/css">
        .loading-icon {
        background-image: url(/img/loading.gif);
        width: 16px;
        height: 16px;
        } 
        a.alpha-link {
        font-weight: normal;
        font-size: 91%;
        padding: 0 4px;
        color: #015BA7 !important;
        } 
        a.alpha-link+a.alpha-link {
        border-left: 1px solid #CFCECE;
        }
        a.alpha-link:hover {
        background-color: #e0f5fc !important;
        } 
        a.alpha-select {
        font-weight: bold;
        text-decoration: none;
        background-color: #C6E1FF;
        color: #000000 !important;
        }
        .casetable {
        height: 200px;
        overflow-y: scroll;
        }
        .search-block {
        text-align: left;
        }
        .search-block input {
        margin: 0px 0px 2px 0px;
        }
        .search-block-button {
        min-width: 70px;
        }
        .search-block span{
        font-weight: bold;
        }
        .rowText {
        padding-bottom: 10px;
        }
        .rowPicklist1 {
        padding-bottom: 10px;
        }
        .process-block {
        text-align: center;
        margin-top: 3px;
        } 
        .process-block input {
        margin: 0px 2px;
        }
        .process-block-button {
        min-width: 100px;
        }
        .page-buttons input {
        min-width: 100px;
        }
        .page-buttonNext input {
        min-width: 60px;
        }
    </style>
</apex:page>