<!-- Waiver List Display and summary Page-->
<apex:page controller="DesignExecutionWaiverController" id="pg" tabStyle="Custom_Design__c" >
  <apex:includeScript value="{!URLFOR($Resource.jquery, '/js/jquery-1.4.2.min.js')}"  />
    <script type="text/javascript">
        function clickElem(id){
            val=document.getElementById(id).innerHTML;
            document.getElementById('pg:fm:pb:SelectList').value=val;
        }
    </script>
    <apex:form id="fm" >
    
        <apex:pageBlock id="pb">
        <apex:pageBlockSection collapsible="false" title="Design Schedule" columns="1">
             <c:BnP_OptionHeader RcId="{!designExecution.Option__c}"></c:BnP_OptionHeader>
        </apex:pageblockSection>

          <div>
                <table border="0" width="100%">
                   
                     <tr>
                        <td style="width:70%">
                         <b>Summary Table: </b>
                           <apex:actionFunction name="myFunction" action="{!Table}" reRender="Table" /> 
                           <!-- <apex:pageBlockTable value="{!waiverSummaryMap}" var="Item">  -->
                           <apex:pageBlockTable value="{!waiverTypes}" var="Item">
                                <apex:column onclick="clickElem(this.id);myFunction();" headerValue="Waiver Type" value="{!Item}"  styleClass="selItem">
                                </apex:column> 
                                <apex:column headerValue="Approved"  value="{!waiverSummaryMap[Item]['Approved']}"/>
                                <apex:column headerValue="Review"  value="{!waiverSummaryMap[Item]['Review']}"/>
                                <apex:column headerValue="Rejected"  value="{!waiverSummaryMap[Item]['Rejected']}"/>
                                <apex:column headerValue="Cancel"  value="{!waiverSummaryMap[Item]['Cancel']}"/>
                                <apex:column headerValue="Draft"  value="{!waiverSummaryMap[Item]['Draft']}"/> 
                            </apex:pageblocktable>
                        </td>
                    </tr>
                   
                    <tr>
                        <td style="width:25%">
                            <b>Waiver Type : </b> 
                            <apex:selectList value="{!selectedRT}" size="1" multiselect="false" id="SelectList">
                            <apex:actionSupport event="onchange" rerender="Table"/>
                            <apex:selectOptions value="{!WaiverCapabilityRTDetail}" />                  
                            </apex:selectList>
                            <apex:commandButton value="New Waiver" action="{!NewWaiver}"/>
                        </td>  
                    </tr>
                   
                    <tr>
                    
                        <td style="width:70%">
                            <apex:pageBlockTable id="Table" value="{!WaiverToDisplayList}" var="sfps1">
                            <apex:column ><apex:commandLink action="{!EditWaiver}"> Edit    
                             <apex:param name="wId" assignTo="{!wId}" value="{!sfps1.w.id}" />
                            </apex:commandLink> </apex:column>
                            <apex:column headerValue="Waiver"><apex:outputLink value="/{!sfps1.w.id}">{!sfps1.w.Name}</apex:outputLink></apex:column>
                            <apex:column headerValue="Approval Status" value="{!sfps1.w.Approval_Status__c}"/>
                            <apex:column headerValue="Waiver Type" value="{!sfps1.w.Waiver_Type__c}"/>
                            <apex:column headerValue="Date Requesting Waiver" value="{!sfps1.w.Date_requesting_the_waiver__c}"/>
                            <apex:column headerValue="Waiver need date" value="{!sfps1.w.Waiver_need_date__c}"/>
                            <apex:column headerValue="Section" value="{!sfps1.w.Section__c}"/>
                            <apex:column headerValue="Check being reviewed" value="{!sfps1.w.Check_being_reviewed__c }"/>
                            <apex:column headerValue="Justification" value="{!sfps1.w.Justification__c}"/>
                            <apex:column headerValue="Approver Name" value="{!sfps1.w.Approver_Name__c}"/>
                            </apex:pageBlockTable>
                           <apex:outputText value="No records are available currently" rendered="{!WaiverToDisplay.size ==0}"/>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="width:25%">
                            <apex:commandButton value="Back to Design Phase Form" action="{!cancelExecutionDetail}"/> 
                        </td>
                        <td style="width:5%">&nbsp;</td>
                        <td style="width:70%">&nbsp;</td>
                    </tr>
                </table>
            </div>
            
        </apex:pageBlock>
    </apex:form>
</apex:page>