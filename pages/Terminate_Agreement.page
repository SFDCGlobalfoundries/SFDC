<!-- 
   Type Name: Terminate Agreement.page
   Author: Suvajit Majumder
   
   Purpose:- To streamline the Contract termination process and also bypass the Apttus functionality that terminates the whole chain of agreements when one in the family is terminated.


   Change History: Adding an 'Expire' block,to achieve the functionality of making the users to add the expiration reason before the agreement expires.
   Author: Ruchi Talwaria
   Modified Date: 26th May, 2016.

-->
<apex:page standardController="Apttus__APTS_Agreement__c" extensions="TerminateControllerExtension" showchat="false" cache="false"
           title="{!IF(term == true, 'Terminate Agreement', 'Expire Agreement')}">
    
     <apex:sectionHeader subtitle="{!IF(term == true, 'Terminate Agreement', 'Expire Agreement')}" title="{!objAgr.Apttus__FF_Agreement_Number__c} : {!objAgr.Name}"/>
          <apex:form id="TheForm" rendered="{!objAgr!=null}" >
          
               <apex:pageBlock title="Agreement Details"  mode="mainDetails" > 
                    <apex:pageBlockSection title="{!IF(term == true, 'Terminate Agreement', 'Expire Agreement')}" columns="2" collapsible="false">
                         <apex:outputField label="Name"             value="{!Apttus__APTS_Agreement__c.Name}"  />
                         <apex:outputField label="Agreement Number" value="{!Apttus__APTS_Agreement__c.Apttus__FF_Agreement_Number__c}"  />
                         <apex:outputField label="Status Category"  value="{!Apttus__APTS_Agreement__c.Apttus__Status_Category__c}"  />
                         <apex:outputField label="Status"           value="{!Apttus__APTS_Agreement__c.Apttus__Status__c}"  />
                         <apex:outputField label="Effective Date"   value="{!Apttus__APTS_Agreement__c.GF_Contract_Start_Date__c}"  />
                         <apex:outputField label="Expiration Date"  value="{!Apttus__APTS_Agreement__c.GF_Contract_End_Date__c}"  />
                         <apex:outputField label="Record Type"      value="{!Apttus__APTS_Agreement__c.RecordType.Name}"  />
                         <apex:outputText label=""                 value=""  />
                         <apex:outputField label="Account"          value="{!Apttus__APTS_Agreement__c.Apttus__Account__r.Name}"  />
                         <apex:outputField label="Created Date"     value="{!Apttus__APTS_Agreement__c.CreatedDate}"  />
                         <apex:outputField label="Requestor"        value="{!Apttus__APTS_Agreement__c.Apttus__Requestor__c}"/>
					     <apex:outputField label="Owner"            value="{!Apttus__APTS_Agreement__c.OwnerId}"/>                     
                    </apex:pageBlockSection>    
               </apex:pageBlock>  
              
               <apex:pageBlock title="Termination Details" mode="edit" rendered="{!term}">
                    <apex:pageBlockButtons >
                         <apex:commandButton action="{!Terminate}" value="Terminate Agreement"/>
                         <apex:commandButton action="{!Cancel}"    value="Return"/>
                    </apex:pageBlockButtons> 
                    <apex:pageMessages ></apex:pageMessages>
                    <apex:pageBlockSection title="Enter Reason for Terminating Agreement" columns="2">
                         <apex:inputField label="Termination Reason" value="{!Apttus__APTS_Agreement__c.CLM_Termination_Reason__c}" required="True" style="length:100% ;height:100%;width:100%"/>                                                             
                    </apex:pageBlockSection>
               </apex:pageBlock>
              
               <apex:pageBlock title="Expiration Details" mode="edit" rendered="{!exp}">
                    <apex:pageBlockButtons >
                         <apex:commandButton action="{!Expire}" value="Expire Agreement"/>
                         <apex:commandButton action="{!Cancel}" value="Return"/>
                    </apex:pageBlockButtons>
                    <apex:pageMessages ></apex:pageMessages>
                    <apex:pageBlockSection title="Enter Reason for Expiration of this Agreement" columns="2">
                         <apex:inputField label="Expiration Reason" value="{!Apttus__APTS_Agreement__c.Expiration_Reason__c}" required="True" style="length:100% ;height:100%;width:100%"/>                               
                    </apex:pageBlockSection>
               </apex:pageBlock>
               
           </apex:form>  
           
           <style>
            textarea {
            width: 95%;
            }
            </style>
       </apex:page>