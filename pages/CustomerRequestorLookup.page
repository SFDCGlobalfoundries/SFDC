<!--
Author: Shyam Ravindra Nair
Description: Custom Lookup page for Customer Requestor
History:
SNair     12112014     - code creation
SNair     13112014     - added pagination
-->
<apex:page controller="CustomerRequestorLookupController" sidebar="false" showHeader="false">
    
    <script language="javascript">
        window.onload = new function (){
            window.focus();    
        }    
    
        function passValue(name1,name2,name3)
        {
           var winMain=window.opener;
           if (null==winMain)
           {
              winMain=window.parent.opener;
           }
           var ele1=winMain.document.getElementById('{!$CurrentPage.parameters.fname1}');
           ele1.value=name1;
           var ele2=winMain.document.getElementById('{!$CurrentPage.parameters.fname2}');
           ele2.value=name2;
           var ele3=winMain.document.getElementById('{!$CurrentPage.parameters.fname3}');
           ele3.value=name3;
           CloseWindow();
        }
    
        function CloseWindow()
        {
           var winMain=window.opener;
           if (null==winMain)
           {
              winMain=window.parent.opener;
           }
           winMain.closeLookupPopup();
        }
    </script>
    
    <apex:form >
        <apex:pageMessages rendered="{!showError}"/>
        <apex:pageBlock >
            <apex:pageblockSection title="Contact Results - Page #{!pageNumber}" columns="1" collapsible="false">
                <apex:pageBlockTable value="{!ContactList}" var="cont">
                    <apex:column headerValue="{!$ObjectType.Contact.fields.Name.label}">
                        <apex:outputLink value="#" onclick="passValue('{!cont.Name}','{!cont.Id}','{!cont.Email}')" >{!cont.Name}</apex:outputLink>
                    </apex:column>
                    <apex:column value="{!cont.Email}"/>
                </apex:pageBlockTable>
            </apex:pageblockSection>
        </apex:pageBlock>
        
        <apex:panelGrid columns="4" >
            <apex:commandLink action="{!first}">First</apex:commandlink>
            <apex:commandLink action="{!previous}" rendered="{!hasPrevious}">Previous</apex:commandlink>
            <apex:commandLink action="{!next}" rendered="{!hasNext}">Next</apex:commandlink>
            <apex:commandLink action="{!last}">Last</apex:commandlink>
        </apex:panelGrid>
    </apex:form>
</apex:page>