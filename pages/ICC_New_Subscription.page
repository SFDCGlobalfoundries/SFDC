<apex:page standardController="Report_Subscription__c" extensions="ICC_NewSubscription" showHeader="false" sidebar="false">
    <apex:form >
        <apex:actionFunction name="AF_fetchReports" action="{!fetchReportsOfSeletedReportType}" rerender="pb_ReportSubscription" status="actStatusId"/> 
        <apex:sectionHeader title="Report Subscription Edit" subtitle="New Report subscription"/>
        <apex:pageBlock id="pb_ReportSubscription">
            <apex:actionstatus id="actStatusId">
                <apex:facet name="start">
                    <div class="waitingSearchDiv" id="el_loading" style="background-color: #DCD6D6; height: 100%;opacity:0.65;width:100%;">
                        <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                            <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                            <span class="waitingDescription">Saving...</span>
                        </div>
                    </div>
                </apex:facet>
            </apex:actionstatus>
            <apex:pageBlockButtons >
                <apex:CommandButton action="{!Save}" value="Save" rerender="pb_ReportSubscription" status="actStatusId"/>
                <apex:CommandButton action="{!Cancel}" value="Cancel"/>
            </apex:pageBlockButtons>
            <apex:pageMessages escape="false"/>
            <apex:pageBlockSection Columns="1">
                <apex:inputField value="{!Report_Subscription__c.Report_Type__c}" onchange="AF_fetchReports();" />
                <apex:pageblockSectionItem >
                    <apex:outputLabel value="Select Report "/>
                    <apex:selectList value="{!Report_Subscription__c.Report_ID__c}" multiselect="false" size="1" disabled="{!Reports.size == 1}">
                        <apex:selectOptions value="{!Reports}" />
                    </apex:selectList>
                </apex:pageblockSectionItem>
                <apex:inputField value="{!Report_Subscription__c.Interval__c}">
                    <apex:actionSupport event="onchange" reRender="pb_ReportSubscription"/>
                </apex:inputField>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Recurs every week on " rendered="{!IF(rtSubr.Interval__c = 'Weekly',TRUE,FALSE)}" />
                    <apex:outputText value="Sunday" rendered="{!IF(rtSubr.Interval__c = 'Weekly',TRUE,FALSE)}" style="color:red"/>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!Report_Subscription__c.Subscriber__c}"/>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page>