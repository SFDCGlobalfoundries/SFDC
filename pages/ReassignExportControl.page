<apex:page controller="ReassignExportControlCtrl" action="{!init}" showHeader="true" sidebar="true" cache="true">    
    <apex:includeScript value="{!$Resource.jQuery1_10_1}"/>
    <script>
        $( document ).ready(function() {
           $('.assigned').click(function(){
               $('.assigned').not(this).attr('checked', false);                      
            })
        });
        
        function isApproved(obj){
            if(obj.checked){
                alert("Selected Export Control was Approved previously, Global Trade Compliance is notify to review and approve the assignment of new Device to Approved Export Control Form");
            }            
        }
    </script>
    <apex:form >        
        <apex:pageBlock title=" Reassign Export Control">
            <Apex:pageMessages />
            <apex:pageBlockSection columns="1"  rendered="{!showReassign}">
                <apex:pageBlockTable value="{!junction.recordList}" var="j" style="width:50%">
                    <apex:column headerValue="Assign">
                        <apex:inputCheckbox value="{!j.isPicked}" styleClass="assigned" onchange="if({!j.isApproved}) isApproved(this);"/>
                    </apex:column>
                    <apex:column headerValue="Export Control Name">
                        <apex:outputText value="{!j.expName}"/>
                    </apex:column>
                    <apex:column headerValue="Status">
                        <apex:outputText value="{!j.status}"/>
                    </apex:column>                                        
                    <apex:column headerValue="D1 National Access">
                        <apex:outputText value="{!j.D1Access}"/>
                    </apex:column>                                        
                    <apex:column headerValue="Customer Contact">
                        <apex:outputText value="{!j.contactPerson}"/>
                    </apex:column>                                                    
                    <apex:column headerValue="Modified By">
                        <apex:outputText value="{!j.modifiedBy}"/>
                    </apex:column>                                                  
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            <apex:pageBlockButtons location="both">
                <apex:commandButton value="Save" action="{!save}"  rendered="{!showReassign}"/>              
                <apex:commandButton value="{!IF(showReassign == TRUE,'Cancel','Back')}" action="{!cancel}"/>              
            </apex:pageBlockButtons>
        </apex:pageBlock>
    </apex:form>    
</apex:page>