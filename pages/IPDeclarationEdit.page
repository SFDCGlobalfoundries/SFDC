<apex:page standardController="IP_Declaration_Form__c" extensions="IpDeclarationEditController" action="{!init}" showheader="true" sidebar="false" cache="false">
<apex:includeScript value="{!$Resource.jQuery1_10_1}"/>
<script language="javascript">
        $( document ).ready(function() {   
            $('.nothingToDeclare').change(function() {
                if($(this).is(":checked")){
                    $('.components').each(function(){
                        $(this).prop('checked', false);
                    });
                }
            });
            
            $('.components').change(function() {
                if($(this).is(":checked")){
                    $('.nothingToDeclare').prop('checked', false);
                }    
            });                         
        });
        function openPdf(){
            var url = window.location.href;
            if(url.indexOf('GlobalfoundryView') != -1){             
                window.open('/GlobalfoundryView/IPDeclarationPdf?id={!ipDecForm.Id}','_blank','scrollbars=yes,width=1024,height=900,top=20,left=20');
            }else{
                window.open('/apex/IPDeclarationPdf?id={!ipDecForm.Id}','_blank','scrollbars=yes,width=1024,height=900,top=20,left=20');
            }
        }
        
        function showIPDChatterFeeds() {
            document.getElementById("showFeedLink").style.display = "none";
            document.getElementById("hideFeedLink").style.display = "block";
            document.getElementById("IPDChatterFeeds").style.display = "block";
        }
        
        function hideIPDChatterFeeds() {
            document.getElementById("showFeedLink").style.display = "block";
            document.getElementById("hideFeedLink").style.display = "none";
            document.getElementById("IPDChatterFeeds").style.display = "none";
        }
</script>

<div class="chatterShowHideFeed">
    <span class="showFeedLink" id="showFeedLink" style="display: inline-block;">
        <a href="javascript:void();" class="innerLink" onclick="javascript:showIPDChatterFeeds();">
            <img src="/s.gif" alt="Show Feed" title="Show Feed" />
            <span class="linkText">Show Feed</span>
        </a>
    </span>
    <span class="hideFeedLink" id="hideFeedLink" style="display: none;">
        <a href="javascript:void();" class="innerLink" onclick="javascript:hideIPDChatterFeeds();">
            <img src="/s.gif" alt="Hide Feed" title="Hide Feed" />
            <span class="linkText">Hide Feed</span>
        </a>
    </span>
</div>

<div id="IPDChatterFeeds" style="display: none;">
    <chatter:feed entityId="{!IP_Declaration_Form__c.id}" />
</div>
    
<apex:form >
<apex:pageBlock mode="Edit" id="pb">
<apex:pageMessages escape="false" />

<table width="1024" style="font-size:small; text-align:center; font-family:arial, helvetica, sans-serif">
      <tbody><tr> 
        <td><h3>Customer IP Declaration Form</h3>
    </td>
      </tr>
  </tbody></table>
  <table width="1024" cellpadding="3" cellspacing="1" style="border:1px solid #000000;font-family:arial, helvetica, sans-serif;font-size:small">
      <tbody><tr> 
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> Customer Company Name</td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.Customer_Name__c}"/></td>
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> Device Name</td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.Device_Name__c}"/></td>
      </tr>
      <tr> 
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> Project Name</td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.Project_Name__c}"/></td>
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> CRM Device ID</td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.CRM_Device_ID__c}"/> </td>
      </tr>
      <tr> 
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> Fab</td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.Fab__c}"/> </td>
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> IP Process Technology (if known)</td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.Process_Technology__c}"/> </td>
      </tr>
      <tr> 
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> Customer Contact for this Form</td>
        <td class="Table-Item" style="width:30%"> <apex:inputfield value="{!ipDecForm.Customer_Contact__c}" rendered="{!editable}" required="True" style="width:250px"/>
                                                  <apex:outputtext value="{!ipDecForm.Customer_Contact__c}" rendered="{!readOnly}" /></td>
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff">Phone</td>
        <td class="Table-Item" style="width:30%"> <apex:inputfield value="{!ipDecForm.Phone__c}" rendered="{!editable}" required="True" style="width:150px"/>
                                                  <apex:outputtext value="{!ipDecForm.Phone__c}" rendered="{!readOnly}" /></td>
      </tr>
      <tr> 
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff"> E-mail address</td>
        <td class="Table-Item" style="width:30%"> <apex:inputfield value="{!ipDecForm.Email_Address__c}" rendered="{!editable}" required="True" style="width:250px"/> 
                                                  <apex:outputtext value="{!ipDecForm.Email_Address__c}" rendered="{!readOnly}" /></td>
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff">Form Status  </td>
        <td class="Table-Item" style="width:30%"> <apex:outputText value="{!ipDecForm.IP_Status__c}"/></td>
      </tr>
      
      <tr> 
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff;{!IF(ipDecForm.Is_Config_Used__c, 'display:table-cell','display:none')}">Configuration</td>
        <td class="Table-Item" style="width:30% ;{!IF(ipDecForm.Is_Config_Used__c, 'display:table-cell','display:none')}"> <apex:outputField value="{!ipDecForm.Configuration__c}"/></td>
        <td class="Table-Item FieldLabel" style="width:20%;background-color:#666666;color:#ffffff;{!IF(ipDecForm.Is_Config_Used__c, 'display:table-cell','display:none')}">Revision Required</td>
        <td class="Table-Item" style="width:30% ;{!IF(ipDecForm.Is_Config_Used__c, 'display:table-cell','display:none')}"> <apex:outputText value="{!ipDecForm.Revision_Required_Formula__c}" escape="false" /></td>
        
      </tr>
  </tbody></table> 
  <table width="1024" style=" font-size:small;font-family:arial, helvetica, sans-serif" >
    <tbody>
        <tr> 
          <td>&nbsp;</td>
        </tr>
        <tr> 
          <td width="30%"><apex:inputCheckbox value="{!ipDecForm.Nothing_to_Declare__c}" disabled="{!readOnly}" styleClass="nothingToDeclare"/>&nbsp;<apex:outputText value="NOTHING TO DECLARE" /></td>
          <td class= "pbButton ">
              
              <apex:commandButton value="{!IF(ipDecForm.Is_Config_Used__c,'Manual IP Selection','Populate from Configurator')}" action="{!refreshIPComp}" rendered="{!editable}" immediate="true"/>
           </td>
        </tr>
         <tr> 
            <td colspan = "2">
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="The following IP/Library item(s) listed are: (i) included in the database provided by Qualcomm Global Trading Inc. (&quot;QGT&quot;) to foundry; (ii) licensed by QGT from a third party vendor; (iii) subject to a reporting requirement that obligates QGT to inform the third party vendor that such IP/Library is included in the database and (iv) may require the payment of a royalty fee by the foundry to the third party IP/Library vendor.<br></br><br></br>"  />
            <apex:outputText value="Stream out of GDS II Layer 63, text type 63 is compulsory even if no known data exists on this layer."  />
            </td>
         </tr>
  </tbody></table>
  <table width="1024" cellpadding="3" cellspacing="1" style="border:1px solid; font-family:arial, helvetica, sans-serif;font-size:small" class="Subtable" >
      <tbody><tr> 
        <th style="background-color:#666666"><span style="font-weight:normal;color:#ffffff">IP Vendor</span> </th>
        <th style="background-color:#666666"><span style="font-weight:normal;color:#ffffff">IP Category (check all that apply)</span></th>
        <th style="background-color:#666666"><span style="font-weight:normal;color:#ffffff">Design ID <!--<img src="https://www.foundryview.com/pdk/fv-crm-web/images/tips.png" id="designIdTips" onclick="jQuery('#designIdTips').validationEngine('showPrompt', 'Please specify Design ID (if applicable)', 'load', false)"></img>--></span></th>
        <th style="background-color:#666666"><span style="font-weight:normal;color:#ffffff">5V Only <!--<img src="https://www.foundryview.com/pdk/fv-crm-web/images/tips.png" id="only5vTips" onclick="jQuery('#only5vTips').validationEngine('showPrompt', 'SC9 High-density 5V Thick Gate Oxide Cell Library (0.18 um ULL 5V Cell Library) if applicable', 'load', false)"></img>--></span></th>
      </tr>    
      <apex:repeat value="{!ipComponentList}" var="ipCom" id="theRepeat">
          <tr> 
            <td> <apex:outputText value="{!ipCom.erpIp.FV_Vendor__c}"/> </td>
            <td> 
                <apex:inputCheckbox value="{!ipCom.selected}" disabled="{!readOnly}" styleClass="components"/> &nbsp;<apex:outputText value="{!ipCom.erpIp.FV_IP_Type__c}"/>   
            </td>
            <td><apex:inputText value="{!ipCom.designId}" rendered="{!ipCom.erpIp.To_Show_Design_ID__c}" disabled="{!readOnly}" />
            </td>
            <td><apex:selectList value="{!ipCom.only5v}" size="1" rendered="{!ipCom.erpIp.To_Show_5V_Only__c}" disabled="{!readOnly}" >
                    <apex:selectOptions value="{!only5vOptions}"/>
                </apex:selectList> 
            </td>
          </tr>
      </apex:repeat>
      <tr> 
        <td> Other 3rd Party IP (please specify): </td>
        <td colspan="3"> <apex:inputfield value="{!ipDecForm.Other_3rd_Party_IP__c}" style="width:400px" rendered="{!editable}"/>
                         <apex:outputtext value="{!other3rdPartyIP}" rendered="{!readOnly}" /> </td>
      </tr>
      <tr> 
        <td> <apex:outputLabel value="Attachment (Max 5MB):" rendered="{!editable}"></apex:outputLabel> </td>
        <td colspan="3"><apex:inputFile value="{!attachOthers.body}" filename="{!attachOthers.name}" rendered="{!editable}"/> </td>
      </tr>
      <tr> 
        <td> <apex:outputLabel value="File Uploaded:" rendered="{!NOT(ISNULL(ipDecAtts))}"></apex:outputLabel> </td>
        <td colspan="3"><apex:repeat value="{!ipDecAtts}" var="att" rendered="{!NOT(ISNULL(ipDecAtts))}">
                            <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}">
                                <apex:outputText value="{!att.Name}"/>
                            </apex:outputLink><br></br>
                        </apex:repeat> </td>
      </tr>
  </tbody></table> 
  <table width="1024" class="Subtable" style="font-family:arial, helvetica, sans-serif;font-size:small">
      <tbody>
      <tr> 
        <td>
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="<strong>We hereby acknowledge and understand that:</strong>"  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="(a) GLOBALFOUNDRIES Inc. (&quot;GLOBALFOUNDRIES&quot;) may be contractually liable to make payment(s), including without limitation, royalty fees, to its intellectual property and/or electronic design automation partners (collectively &quot;IP Provider&quot;) if any of our products/devices to be manufactured by GLOBALFOUNDRIES contain any such IP Provider's intellectual property, including without limitation, [memory compilers, I/Os] (&quot;IP&quot;)."  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="(b) GLOBALFOUNDRIES' ability to make the aforesaid payments is dependent upon GLOBALFOUNDRIES' timely receipt of our full, complete and accurate disclosure as regards our use of any such IP Provider's IP in our products/devices."  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="&nbsp;<br></br>"  /> 
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="In view of the above and in consideration of GLOBALFOUNDRIES agreeing to manufacture the products/devices on our behalf, we hereby represent and warrant that:"  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="The information provided in the above table represents our complete and accurate disclosure as regards our use of any 3rd Party IP Provider's IP."  />
            <apex:outputText escape="false" rendered="{!defaultFormat}" value="&nbsp;<br></br>"  />
        </td>
      </tr>
  </tbody></table>
  
  
  <table width="1024" class="Subtable" style="font-family:arial, helvetica, sans-serif;font-size:small">
      <tbody>
      <tr> 
        <td>
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="<strong>The undersigned declares that:</strong>"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="(1) He/she is a duly authorized representative of the below-listed company, and has the full right and power to execute the above IP/Library Declaration Form (the &quot;Declaration Form&quot;);"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="(2) To the knowledge of the undersigned, the information in the Declaration Form are correct;"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  /> 
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="(3) He/she understands that the IP/Library may contain VSIA physical tagging information, and this VSIA tagging information was not altered or removed in the tape out of the product. The database of the product to be taped out should contain Layer 63:63; and"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="(4) He/she understands that the foundry may be paying royalties to its library and/or IP vendors based on this Declaration Form."  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="The information provided in the above table represents our complete and accurate disclosure as regards our use of any IP Provider’s IP."  />
            <apex:outputText escape="false" rendered="{!qualcommFormat}" value="&nbsp;<br></br>"  />
        </td>
      </tr>
  </tbody></table>
  
  
  
  <table width="1024" class="Subtable" style="font-family:arial, helvetica, sans-serif;font-size:small">
      <tbody><tr> 
          <td>&nbsp;</td>
        </tr>
      <tr> 
        <th colspan="3" style="text-align:left">Customer Details</th>
      </tr>
      <tr> 
        <td class="Table-Item FieldLabel"> Name: &nbsp;<apex:outputText value="{!ipDecForm.Customer_Contact__c}"/></td>
        <td class="Table-Item FieldLabel"> Job Title: &nbsp;<apex:inputfield value="{!ipDecForm.Job_Title__c}" rendered="{!editable}" required="True"/>
                                                            <apex:outputtext value="{!ipDecForm.Job_Title__c}" rendered="{!readOnly}" /></td>
      </tr>
  </tbody></table>  

  <apex:pageBlockButtons location="top">
    <apex:commandButton value="{!IF(ipDecForm.Is_Config_Used__c,'Confirm & Submit','Save')}" action="{!save}" rendered="{!editable}"/>
    <apex:commandButton value="Submit for Approval" action="{!submit}" rendered="{!(editable && IpDecForm.Status__c != 'Undeclared' && ipDecForm.Is_Config_Used__c = false)}"/>
    <apex:commandButton value="Change Ownership" action="{!reAssign}" rendered="{!editable}"/>
    <apex:commandButton value="View / Save PDF" onclick="openPdf();return false;" rendered="{!pdfReady}"/>
    <!-- <apex:commandButton value="Cancel / Close" onClick="window.close()"/>-->
    <apex:commandButton value="Cancel / Back" action="{!cancel}"/>
     
  </apex:pageBlockButtons>
  <apex:pageBlockButtons location="bottom">
    <apex:commandButton value="{!IF(ipDecForm.Is_Config_Used__c,'Confirm & Submit','Save')}" action="{!save}" rendered="{!editable}"/>
    <apex:commandButton value="Submit for Approval" action="{!submit}" rendered="{!(editable && IpDecForm.Status__c != 'Undeclared' && ipDecForm.Is_Config_Used__c = false)}"/>
    <apex:commandButton value="Change Ownership" action="{!reAssign}" rendered="{!editable}"/>
    <apex:commandButton value="View / Save PDF" onclick="openPdf();return false;" rendered="{!pdfReady}"/>
    <apex:commandButton value="Cancel / Back" action="{!cancel}"/>
  </apex:pageBlockButtons>
</apex:pageblock>
</apex:form>

</apex:page>