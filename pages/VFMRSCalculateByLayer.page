<apex:page showHeader="false" sideBar="false" standardStylesheets="false" readOnly="false" controller="MRSCalculateByLayer" >
	<apex:stylesheet value="{!URLFOR($Resource.Swift_MRS,'css/style.css')}"/>
	<script type="text/javascript" src="{!URLFOR($Resource.Swift_MRS,'js/jquery.min.js')}"></script>
	
	<style>
	    .s-btn {
	        width:35px!important;
	    }
	</style>
	
	
	<apex:form id="form1">
		<apex:actionFunction name="actCalculateStatus" action="{!calculateStatus}" oncomplete="closeDialog();" reRender="form1"/>
		
		<div class="popupMainContainer">
			<h3 class="bold-font lookupHeader">Calculating Layer Status In Progress</h3>
			<br /><br />
			<div class="resultSection" style="text-align: center;">
			
				<img src="/img/loading32.gif"/><br /><br />
			</div>
		</div>
		<script type="text/javascript">
			//document.addEventListener('DOMContentLoaded', function() {
	    	//	actCalculateStatus();
			//}, false);
			
			function closeDialog() {
				try {
					var isUpdated = {!isUpdated};
	            	var infoMsg = '{!infoMsgToParent}';
					window.opener.getLayerStatus(isUpdated,infoMsg); 
					window.close();
				} catch(e) {
					console.log("VFMRSCalculateByLayer dialog window error: " + e);
				}
			}
			
			window.onload = function () { actCalculateStatus(); }
		</script>
	</apex:form>
</apex:page>