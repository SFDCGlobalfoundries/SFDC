<!--
    Author: Abhita Bansal
    Description: This serves as the List View page for MPW Process Group.
    History: 
        ABansal    06112015    - page creation.
-->
<apex:page id="MPWProcessGroupTabVF" standardcontroller="MPW_Process_Group__c" extensions="MPWProcessGroupTabController" showHeader="true" sidebar="true" cache="false">

<apex:stylesheet value="/sCSS/21.0/sprites/1297816277000/Theme3/default/gc/versioning.css" />

	<apex:stylesheet value="{!URLFOR($Resource.MPWRelatedCSS, '/MPWRelatedCSS/MPWProcessGroupTabVF.css')}" />
    
    <!-- Javascript -->
    <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->
    <apex:includeScript value="{!URLFOR($Resource.jQuery_1_11_3_min, '/jquery-1.11.3.min/jquery-1.11.3.min.js')}" />
    
    <script type="text/javascript">
        function startLoading(){
            $('#load_scrl').css('top', $(document).scrollTop() + 200);
            $('.loadingBox').show(); 
        }
        
        function endLoading(){
             $('.loadingBox').hide();
        }
    </script>
    
	<apex:sectionHeader title="MPW" subtitle="Process Group" help="https://help.salesforce.com/htviewhelpdoc?id=co_edit.htm&siteLang=en_US" />
    <apex:pageMessages id="errorSection" />
    
    <apex:form id="form1">
        <apex:pageBlock id="mainBlock"> 
        
            <apex:panelGrid columns="3">
                <apex:outputLabel value="View:" style="text-align:left;font-weight:bold;padding-right:.230em;"/>
                <apex:selectList id="geometry" value="{!geometry.Geometry__c}" size="1">
                      <apex:selectOptions value="{!geometryOptions}"/>
                </apex:selectList>
                <apex:commandButton value="Go!" action="{!optionRecords}" reRender="mainBlock"/>
            </apex:panelGrid>
            
            <apex:pageBlockButtons location="top">
                <apex:commandButton value="New MPW Process Group" action="{!addNew}" />
            </apex:pageBlockButtons>
            
            <apex:pageBlockTable id="mpwGroupList" value="{!MPWProcessGroupRecords}" var="g" rendered="{!IF(OR(MPWProcessGroupRecords.size == null,MPWProcessGroupRecords.size > 0), true, false)}">
                <apex:column >
                    <apex:facet name="header">Action</apex:facet>
                    <apex:commandLink value="Edit" action="/apex/MPWProcessGroupTranxVF?id={!g.Id}&&tranx=Edit&&returnURL={!currentURL}"/>
                </apex:column>
                
                <apex:column value="{!g.Geometry__c}" headerClass="{!IF(sortField == 'Geometry__c', 'TableTitle', '')}">
                    <apex:facet name="header">
                        <apex:outputLabel styleClass="hand colDiv" onclick="sort('Geometry__c','{!IF(ISBLANK(sortType),'asc',IF(sortType == 'desc','asc','desc'))}');">
                            {!$ObjectType.MPW_Process_Group__c.fields.Geometry__c.label}
                            <apex:image value="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" rendered="{!IF(AND(sortField == 'Geometry__c', sortType == 'ASC'), true, false)}" styleClass="sortASC"/>
                            <apex:image value="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" rendered="{!IF(AND(sortField == 'Geometry__c', sortType == 'DESC'), true, false)}" styleClass="sortDESC"/>
                        </apex:outputLabel>
                    </apex:facet>  
                </apex:column> 
                               
                <apex:column headerClass="{!IF(sortField == 'Name', 'TableTitle', '')}">
                    <apex:facet name="header">
                        <apex:outputLabel styleClass="hand colDiv" onclick="sort('Name','{!IF(ISBLANK(sortType),'asc',IF(sortType == 'desc','asc','desc'))}');">
                            {!$ObjectType.MPW_Process_Group__c.fields.Name.label}
                            <apex:image value="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" rendered="{!IF(AND(sortField == 'Name', sortType == 'ASC'), true, false)}" styleClass="sortASC"/>
                            <apex:image value="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" rendered="{!IF(AND(sortField == 'Name', sortType == 'DESC'), true, false)}" styleClass="sortDESC"/>
                        </apex:outputLabel>
                    </apex:facet>     
                    <apex:outputLink onclick="viewRecord('{!g.Id}');">{!g.Name}</apex:outputLink>
                </apex:column>
                
                <apex:column value="{!g.Process__c}" />
                <apex:column value="{!g.Fab__c}" />
                
                <apex:facet name="footer">Showing Page {!currentPageNo} of {!totalNoOfPages} ({!totalNoOfRecords} Records)</apex:facet>
            </apex:pageBlockTable>
           
            <apex:outputText value="No records retrieved." rendered="{!IF(MPWProcessGroupRecords.size == 0, true, false)}" />
            
            <!-- Pagination Controls -->
               
            <apex:outputPanel id="controlPanel" layout="block" rendered="{!IF(MPWProcessGroupRecords.size > 0, true, false)}">
                     <center>
                        <apex:commandLink action="{!first}" style="text-decoration: none;" rendered="{!IF(HasPrevious, true, false)}" rerender="controlPanel, mpwGroupList" status="loadStatus">
                            <apex:image value="/s.gif" styleClass="first1" alt="First Page" />
                        </apex:commandLink>
                        <apex:outputPanel rendered="{!IF(NOT(HasPrevious), true, false)}">
                            <apex:image value="/s.gif" styleClass="firstoff1" alt="First Page" />
                        </apex:outputPanel>
                        &nbsp;
                        <apex:commandLink action="{!previous}" style="text-decoration: none;" rendered="{!IF(HasPrevious, true, false)}" rerender="controlPanel, mpwGroupList" status="loadStatus">
                            <apex:image value="/s.gif" styleClass="prev1" alt="Previous" />Previous
                        </apex:commandLink>
                        <apex:outputPanel rendered="{!IF(NOT(HasPrevious), true, false)}">
                            <apex:image value="/s.gif" styleClass="prevoff1" alt="Previous" />Previous
                        </apex:outputPanel>
                        &nbsp;&nbsp;
                        <apex:commandLink action="{!next}" style="text-decoration: none;" rendered="{!IF(HasNext, true, false)}" rerender="controlPanel, mpwGroupList" status="loadStatus">
                            Next<apex:image value="/s.gif" styleClass="next1" alt="Next" />
                        </apex:commandLink>
                        <apex:outputPanel rendered="{!IF(NOT(HasNext), true, false)}">
                            Next<apex:image value="/s.gif" styleClass="nextoff1" alt="Next" />
                        </apex:outputPanel>
                        &nbsp;
                        <apex:commandLink action="{!last}" style="text-decoration: none;" rendered="{!IF(HasNext, true, false)}" rerender="controlPanel, mpwGroupList" status="loadStatus">
                            <apex:image value="/s.gif" styleClass="last1" alt="Last Page" />
                        </apex:commandLink>
                        <apex:outputPanel rendered="{!IF(NOT(HasNext), true, false)}">
                            <apex:image value="/s.gif" styleClass="lastoff1" alt="Last Page" />
                        </apex:outputPanel>
                      </center>
                </apex:outputPanel>             
        </apex:pageBlock>
        
        <apex:actionfunction name="sortRecords" action="{!sortRecords}" rerender="mpwGroupList, errorSection" status="loadStatus">     
            <apex:param name="sortField" value="" />           
        </apex:actionfunction>
        
        <apex:actionFunction name="viewRecord" action="{!viewRecord}" rerender="form1">
            <apex:param name="id" value="" />
        </apex:actionFunction>
        
        <apex:actionStatus onstart="startLoading();" onstop="endLoading();" id="loadStatus"/>
        <div id="load_scrl" class="loadingBox loader" style="display: none" />
        <div class="loadingBox overlay" />
            
    </apex:form>
</apex:page>