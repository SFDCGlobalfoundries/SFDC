<!--
Author: Shyam Ravindra Nair
Description: Custom page to attach files to CuSR Form. 
History:
SNair     13112014     - code creation
SNair     14112014     - added logic for saving attachment
SNair     16042015     - modified logic for saving attachment
-->
<apex:page controller="CuSRFormAttachmentPageExtensions"
    tabStyle="CuSR_Form__c">
    
    <apex:form >
        <!--<apex:sectionHeader title="Attach File to CuSR Form {!cusrForm.Name}" />-->
        <apex:sectionHeader title="Attach File to {!recordName}" />
        <apex:pageMessages id="message" rendered="{!showError}" />
        <div class="genericPageBlockTable">
            <table>
                <tbody>
                    <tr>
                        <td><strong>1.</strong></td>
                        <td><strong>Select the File</strong></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>Type the path of the file or click the Browse button to
                            find the file.</td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td style="padding-bottom: 1em;"><apex:inputFile fileName="{!fileName}" value="{!fileBody}"></apex:inputFile></td>
                    </tr>
                    <tr>
                        <td><strong>2.</strong></td>
                        <td><strong>Click the "Attach File" button.</strong></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>Repeat steps 1 and 2 to attach multiple files.</td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>( When the upload is complete the file information will
                            appear below. )</td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td><apex:commandButton value="Attach File"
                                title="Attach File" styleClass="btn" action="{!attachFile}" /></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </apex:form>
    &nbsp;&nbsp;
    <apex:form >
        <table>
            <tbody>
                <tr>
                    <td><strong>3.</strong></td>
                    <td><strong>Click the Done button to return to the
                            previous page.</strong></td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td>( This will cancel an in-progress upload. )</td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td><apex:commandButton value="Done" title="Done"
                            styleClass="btn" action="{!doneMethod}" /></td>
                </tr>
            </tbody>
        </table>
    </apex:form>
    &nbsp;&nbsp;
    <apex:form id="info" rendered="{!displayInfo}">
        <apex:pageblock >
            <apex:pageBlockSection columns="1"
                title="You have just uploaded the following file"
                collapsible="false">
                <apex:outputText value="{!attachmentFileName}" label="File Name" />
            </apex:pageBlockSection>
        </apex:pageblock>
    </apex:form>

</apex:page>