<!--
    Author: Abhita Bansal
    Description: This page is used as the New, Edit and View page for MPW Reservation Form.
    History: 
        ABansal      05212015    - Page creation.
        SNair        05262015    - added more components.
        SNair        05272015    - added more components.
        SNair        05282015    - added more components.
        SNair        05292015    - added more components.
        SNair        06012015    - added more components.
        SNair        06022015    - added more components.
        SNair        06032015    - added more components.
        SNair        06042015    - added more components.
        SNair        06052015    - added more components.
        SNair        06082015    - added more components.
        SNair        06092015    - added more components.
        SNair        06102015    - added more components.
        
        SNair        06112015    - added more components.
        SNair        06122015    - added more components.
        SNair        06152015    - added more components.
        SNair        06162015    - added more components.
        SNair        06172015    - added more components.
        SNair        06182015    - added more components.
        Devendra     11112015    - History section will be exposed in the VF MPW Reservation form
        Poulami      01042016    - Corner Split for Wafer Form (MPW-PP28)
        Poulami      03182016    - updated code to display Bare Die Forecast Ship Date field (MPW-PP30)
        Poulami      04072016    - Modified code to populate PA Code based on ASIC R&D, RF_ASIC_A&D Protos (MPW-PP87).
                                 - Modified code to populate Usage and Metal Stack field value for ASIC R&D, RF_ASIC_A&D Protos (MPW-PP87).
        Poulami      04292016    - Modified code to add 'MPW Change Request' column under 'Chip Information' section to display CR's related to specific Prime Die (MPW-PP60).
        Prasad L.    006282016   - Added condition for 22nm geometry for metal stack. 
        Anil Kumar   00070564   - 0.15um Sub-Device Extraction supportability : April 18, 2017
        Kanishk Singh:MPW-PP142 Clicking Back button in Search MPW Form should preserve the search criteria
        Kanishk     showing PA Code in drop-down for ASIC R&D category.
        Venkat       00088599    - added 7nm & 12/14nm in addition to 14nm.
-->

<apex:page id="MPWReservationFormVF" standardController="MPW_Reservation__c"
    extensions="MPWReservationFormController" sidebar="false"
    showHeader="{!IF(AND(initPoint != 'mydevices',isExternalUser == false),true,false)}"
    tabStyle="MPW_Reservation__c">
    
    <apex:includeScript value="{!URLFOR($Resource.MPWRelatedJS, '/MPWRelatedJS/MPWReservationFormVF.js')}" />

    <apex:stylesheet value="/sCSS/21.0/sprites/1297816277000/Theme3/default/gc/versioning.css" />
    
    <style>
        div.tooltip {
            width: 20px;
            float: right;
            display:inline;
        }
        
        div.tooltip span {
            display: none;
            font-weight:normal;
            text-align:left;
            padding: 3px 5px;
            margin-left: 8px;
            width: 250px;
        }
        
        div.tooltip:hover span {
            display: inline;
            position: absolute;
            border: 1px solid #cccccc;
            background: #FFC;
            color: #000000;
            z-index:10000;
        }
    
    </style>

    <apex:sectionHeader title="GlobalShuttle Reservation Form"
        subtitle="New Form"
        help="https://help.salesforce.com/htviewhelpdoc?id=co_edit.htm&siteLang=en_US"
        rendered="{!mpwResf.Id == null && accessMode == 'Edit'}" />
    <apex:sectionHeader title="GlobalShuttle Reservation Form"
        subtitle="Edit {!mpwResf.Name}"
        help="https://help.salesforce.com/htviewhelpdoc?id=co_edit.htm&siteLang=en_US"
        rendered="{!mpwResf.Id != null && accessMode == 'Edit'}" />
    <apex:sectionHeader title="GlobalShuttle Reservation Form"
        subtitle="{!mpwResf.Name} - {!mpwResf.Form_Status__c}"
        help="https://help.salesforce.com/htviewhelpdoc?id=co_edit.htm&siteLang=en_US"
        rendered="{!mpwResf.Id != null && accessMode == 'View'}" />
    <apex:pageMessages id="errorSection" />
    <apex:pageMessage summary="Please associate a Device before approving the request." severity="Info" strength="3" rendered="{!IF(showDeviceWarning == true,true,false)}" />
    
    <apex:outputpanel >
        <apex:actionstatus id="actStatusId">
            <apex:facet name="start">
                <div class="waitingSearchDiv" id="el_loading" style="background-color: black;
                       height: 100%;opacity:0.65;width:100%;"> 
                    <div class="waitingHolder" style=""> <!--top: 74.2px; width: 91px;-->
                        <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." style="height: 20px;width: 20px;" />
                        <span class="waitingDescription" style="font-size: 20px;vertical-align: middle;color:white;" >Loading...</span>
                    </div>
                </div>
            </apex:facet>
        </apex:actionstatus>
    </apex:outputpanel>
    
    <apex:form id="form" enctype="multipart/form-data">

        <apex:pageBlock id="block" mode="{!IF(accessMode == 'Edit','edit','maindetail')}" rendered="{!IF(preview == false, true, false)}">
            
            <apex:pageBlockButtons location="top">
                <apex:outputpanel id="oppbtntop" >
                    <apex:commandButton value="Edit" action="{!editPage}"
                        rendered="{!IF(AND(accessMode == 'View', isEdit == true, isChangeReq == null,displayvoidsection == false),true,false)}" />
                    <apex:commandButton value="Preview"
                        disabled="{!IF(AND(accessMode == 'Edit',agree == true,displayvoidsection == false),false,true)}"
                        action="{!gotoPreview}"
                        rendered="{!IF(accessMode == 'Edit',true,false)}" id="previewbtn" />
                    <apex:commandButton value="Save as Draft" action="{!saveAsDraft}"
                        disabled="{!IF(AND(accessMode == 'Edit',agree == true),false,true)}"
                        rendered="{!IF(AND(displayvoidsection == false, accessMode == 'Edit',mpwResf.Form_Status__c == null),true,false)}" id="saveasdraftbtn" />
                    <apex:commandButton value="Save" action="{!saveAsDraft}" 
                        disabled="{!IF(AND(accessMode == 'Edit',agree == true),false,true)}"
                                        rendered="{!IF(AND(displayvoidsection == false, accessMode == 'Edit',mpwResf.Form_Status__c != null),true,false)}" id="savebtn" />
                    <apex:commandButton value="Submit for Approval"
                        action="{!submitForApproval}"
                        rendered="{!IF(AND(accessMode == 'View', isSubmitApp == true,displayvoidsection == false),true,false)}" />
                    <!-- SNAIR 10-13-2015 Added Clone button  -->
                    <apex:commandButton value="Copy" action="{!copy}" rendered="{!IF(AND(accessMode == 'View', isCopy == true),true,false)}" />
                    <!-- End SNAIR 10-13-2015 -->
                    <apex:commandButton value="Void Reservation" action="{!voidformAction}" rendered="{!IF(AND(showVoidButton == true, accessMode == 'View'),true,false)}" />    
                    <apex:commandButton value="Back" action="{!back}" immediate="true" />
                    <apex:commandButton value="Compare Form" action="{!compare}" rendered="{!IF(AND(accessMode == 'View', isCompare == true),true,false)}" />
                    <!-- Start : Added by Anil - No 22, 2016 -->
                    <apex:commandButton value="Change Request" action="{!changeRequest}" rendered="{!IF(AND(accessMode == 'View', showCRButton == true),true,false)}" immediate="true" status="actStatusId" />
                    <!-- End : Added by Anil - No 22, 2016 -->
                </apex:outputpanel>
            </apex:pageBlockButtons>
            <apex:pageBlockButtons location="bottom">
                <apex:outputpanel id="oppbtnbottom" >
                    <apex:commandButton value="Edit" action="{!editPage}"
                        rendered="{!IF(AND(accessMode == 'View', isEdit == true, isChangeReq == null,displayvoidsection == false),true,false)}" />
                    <apex:commandButton value="Preview"
                        disabled="{!IF(AND(accessMode == 'Edit',agree == true,displayvoidsection == false),false,true)}"
                        action="{!gotoPreview}"
                        rendered="{!IF(accessMode == 'Edit',true,false)}" id="previewbtn" />
                    <apex:commandButton value="Save as Draft" action="{!saveAsDraft}"
                        disabled="{!IF(AND(accessMode == 'Edit',agree == true),false,true)}"
                        rendered="{!IF(AND(displayvoidsection == false, accessMode == 'Edit',mpwResf.Form_Status__c == null),true,false)}" id="saveasdraftbtn" />
                    <apex:commandButton value="Save" action="{!saveAsDraft}" 
                        disabled="{!IF(AND(accessMode == 'Edit',agree == true),false,true)}"
                                        rendered="{!IF(AND(displayvoidsection == false, accessMode == 'Edit',mpwResf.Form_Status__c != null),true,false)}" id="savebtn" />
                    <apex:commandButton value="Submit for Approval"
                        action="{!submitForApproval}"
                        rendered="{!IF(AND(accessMode == 'View', isSubmitApp == true,displayvoidsection == false),true,false)}" />
                    <!-- SNAIR 10-13-2015 Added Clone button  -->
                    <apex:commandButton value="Copy" action="{!copy}" rendered="{!IF(AND(accessMode == 'View', isCopy == true),true,false)}" />
                    <!-- End SNAIR 10-13-2015 -->
                    <apex:commandButton value="Void Reservation" action="{!voidformAction}" rendered="{!IF(AND(showVoidButton == true, accessMode == 'View'),true,false)}" />    
                    <apex:commandButton value="Back" action="{!back}" immediate="true" />
                    <apex:commandButton value="Compare Form" action="{!compare}" rendered="{!IF(AND(accessMode == 'View', isCompare == true),true,false)}" />
                    <!-- Start : Added by Anil - No 22, 2016 -->
                    <apex:commandButton value="Change Request" action="{!changeRequest}" rendered="{!IF(AND(accessMode == 'View', showCRButton == true),true,false)}" immediate="true" status="actStatusId" />
                    <!-- End : Added by Anil - No 22, 2016 -->
                </apex:outputpanel>
            </apex:pageBlockButtons>
            
            <!-- Added by SNAIR 10-15-2015 to bring system information for Admins -->
            <apex:pageBlockSection id="ownerdetails" title="System Information" collapsible="false" columns="2" rendered="{!accessMode == 'View' && isAdmin == true}">
                <apex:pageBlockSectionItem rendered="{!mpwResf.Form_Status__c == 'Draft'}">
                    <apex:outputLabel value="{!$ObjectType.MPW_Reservation__c.fields.ownerId.label}" />
                    <apex:pageBlockSectionItem >
                        <apex:outputField value="{!mpwResf.OwnerId}" />
                        <a href="/{!mpwResf.Id}/a?retURL=/{!mpwResf.Id}">[Change]</a>
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!mpwResf.OwnerId}" rendered="{!mpwResf.Form_Status__c != 'Draft'}"/>
                <apex:outputField value="{!mpwResf.LastModifiedById}"/>
                <apex:outputField value="{!mpwResf.CreatedDate}" />
                <apex:outputField value="{!mpwResf.LastModifiedDate}" />
            </apex:pageBlockSection>
            <!-- End -->

            <apex:pageBlockSection id="reasontovoid" title="Reason to Void"
                collapsible="false" columns="1"
                rendered="{!IF(AND(accessMode == 'View',displayvoidsection == true),true,false)}">
                <div class="requiredInput">
                  <div class="requiredBlock"></div>
                 <apex:inputField value="{!mpwResf.Reason_to_Void__c}"  style="width:500px;"/>
                
                </div>
                
                 <apex:commandButton style="margin-left:18%" value="Void" action="{!voidform}" rendered="{!IF(AND(displayvoidsection == true, accessMode == 'View'),true,false)}" />
               
            </apex:pageBlockSection>

            <apex:pageBlockSection id="viewreasontovoid" title="Reason to Void"
                collapsible="false" columns="1"
                rendered="{!IF(AND(accessMode == 'View',mpwResf.Form_Status__c == 'Void'),true,false)}">
                <apex:outputField value="{!mpwResf.Reason_to_Void__c}" />
            </apex:pageBlockSection>

            <apex:pageblockSection id="section1" title="MPW Train Selection"
                collapsible="false" columns="1"
                rendered="{!IF(AND(initPoint=='device',accessMode == 'Edit'),true,false)}">
                <apex:outputPanel layout="inline">
                    <apex:outputLabel value="Train" styleClass="labelCol" />
                    <apex:actionRegion >
                        <apex:selectList id="trainName" size="1"
                            value="{!mpwResf.MPW_Train_Name__c}" multiselect="false">
                            <apex:selectOptions value="{!trainOptions}" />
                            <apex:actionSupport event="onchange"
                                action="{!retrieveMPWSchedule}" reRender="section2,section3" status="actStatusId" />
                        </apex:selectList>
                    </apex:actionRegion>
                </apex:outputPanel>
            </apex:pageblockSection>

            <apex:pageBlockSection id="section1view" title="MPW Train Selection"
                collapsible="false" columns="1"
                rendered="{!IF(AND(initPoint=='devices',accessMode == 'View'),true,false)}">
                <apex:outputField value="{!mpwResf.MPW_Train_Name__c}" />
            </apex:pageBlockSection>

            <apex:outputPanel id="section2">
                <apex:pageblockSection title="Reservation Form Information"
                    collapsible="false" columns="1">
                    <apex:pageBlockSectionItem rendered="{!IF(AND(copySearchNumber != null,accessMode == 'Edit'), true,false)}">
                        <apex:outputLabel value="MPW Train Number"/>
                        <apex:actionRegion >
                            <apex:selectList id="trainName" size="1"
                                value="{!mpwResf.MPW_Train_Name__c}" multiselect="false">
                                <apex:selectOptions value="{!trainOptions1}" />
                                <apex:actionSupport event="onchange"
                                    action="{!retrieveMPWSchedule}" reRender="section2,section3" status="actStatusId" />
                            </apex:selectList>
                        </apex:actionRegion>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!IF(copySearchNumber == null, true,false)}">
                        <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Name.label}" />
                        <apex:outputField value="{!mpwtm.Name}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Reservation_Close_Date__c.label}" />
                        <apex:outputField value="{!mpwtm.Reservation_Close_Date__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Tapeout_Date_Other_Participant__c.label}*" />
                        <apex:outputField value="{!mpwtm.Tapeout_Date_Other_Participant__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Tapeout_Date_Customer__c.label}*" />
                        <apex:outputField value="{!mpwtm.Tapeout_Date_Customer__c}" />
                    </apex:pageBlockSectionItem>
                    <br />
                </apex:pageblockSection>
            </apex:outputPanel>
            
            <br/>
            <apex:outputPanel id="category">
                <apex:panelGrid rendered="{!IF(accessMode == 'Edit',true,false) && !editAddDet}"
                    columns="4" style="width:80%;margin-left:21px;">
                    <apex:actionRegion >
                        <apex:panelGroup >
                            <apex:outputLabel styleClass="labelCol" value="Category" />
                            <apex:selectList value="{!mpwResf.Category__c}" size="1"
                                multiselect="false">
                                <apex:selectOptions value="{!categoryList}" />
                                <apex:actionSupport event="onchange"
                                    action="{!onCategoryChange}" reRender="accountinfo,category,section2,section4,section5,section6,section7,section8,section9,section10,section11,section12,section13" status="actStatusId" />
                            </apex:selectList>
                        </apex:panelGroup>
                    </apex:actionRegion>
                    <apex:panelGroup rendered="{!mpwResf.Category__c != 'TD' && mpwResf.Category__c != 'Customer' && mpwResf.Category__c != 'Lighting'}">
                        <apex:outputLabel styleClass="labelCol" value="Sub Category" />
                        <apex:selectList value="{!mpwResf.Sub_Category__c}" size="1"
                            multiselect="false"
                            rendered="{!mpwResf.Category__c != 'TD'  && mpwResf.Category__c != 'FAB' && mpwResf.Category__c != 'Customer'}">
                            <apex:selectOptions value="{!subCategory}"
                                rendered="{!mpwResf.Category__c != 'TD' && mpwResf.Category__c != 'FAB' && mpwResf.Category__c != 'Customer'}" />
                        </apex:selectList>
                        <apex:outputText value="{!mpwtm.Geometry__c}"
                            rendered="{!mpwResf.Category__c == 'FAB'}" />
                    </apex:panelGroup>
                    <!--04072016 - Modified by Poulami Starts.-->
                    <apex:panelGroup rendered="{!mpwResf.Category__c != 'Customer'}">
                        <apex:outputLabel styleClass="labelCol" value="Usage" />
                        <apex:selectList value="{!mpwResf.Usage__c}" size="1"
                            multiselect="false"
                            rendered="{!mpwResf.Category__c != 'DE' && mpwResf.Category__c != 'IP' && mpwResf.Category__c != 'Lighting' && mpwResf.Category__c != 'Customer' && mpwResf.Category__c != 'ASIC R&D' && mpwResf.Category__c != 'RF_ASIC_A&D Protos'}">
                            <apex:selectOptions value="{!Usages}" />
                            <apex:actionSupport event="onchange" reRender="section2,category" action="{!onCategoryChange}" status="actStatusId" />
                        </apex:selectList>
                        <apex:outputText value="Required"
                            rendered="{!mpwResf.Category__c == 'DE' || mpwResf.Category__c == 'IP' || mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}" />
                    </apex:panelGroup>
                    <apex:panelGroup rendered="{!mpwResf.Category__c == 'TD' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}">
                        <apex:outputLabel styleClass="labelCol" value="PA Code" />
                        <apex:selectList value="{!mpwResf.PA_Code__c}" size="1"
                            multiselect="false"
                            rendered="{!(mpwResf.Category__c == 'TD' && mpwResf.Usage__c == 'Required') || mpwResf.Category__c == 'ASIC R&D'}">
                            <apex:selectOptions value="{!PACodes}" />
                            <apex:actionSupport event="onchange" action="{!retrivePACodeForDisplay}" reRender="category" status="actStatusId" />
                        </apex:selectList>
                        <apex:outputText value="For Opportunistic Usage"
                            rendered="{!mpwResf.Category__c == 'TD' && mpwResf.Usage__c == 'Opportunistic'}" />
                        <apex:outputField value="{!mpwResf.PA_Code__c}"
                            rendered="{!mpwResf.Category__c == 'RF_ASIC_A&D Protos'}" />
                    </apex:panelGroup>
                    <!--04072016 - Modified by Poulami Ends.-->
                </apex:panelGrid>
            </apex:outputPanel>

            <apex:panelGrid id="categoryview"
                rendered="{!IF(accessMode == 'View',true,false)}" columns="4"
                style="width:50%;margin-left:21px;">
                <apex:panelGroup >
                    <apex:outputLabel styleClass="labelCol" value="Category" />
                    <apex:outputField value="{!mpwResf.Category__c}" />
                </apex:panelGroup>
                <apex:panelGroup rendered="{!mpwResf.Category__c != 'TD' && mpwResf.Category__c != 'Customer'}">
                    <apex:outputLabel styleClass="labelCol" value="Sub Category" />
                    <apex:outputField value="{!mpwResf.Sub_Category__c}"
                        rendered="{!mpwResf.Category__c != 'TD'}" />
                </apex:panelGroup>
                <apex:panelGroup rendered="{!mpwResf.Category__c != 'Customer'}">
                    <apex:outputLabel styleClass="labelCol" value="Usage" />
                    <apex:outputField value="{!mpwResf.Usage__c}" />
                </apex:panelGroup>
                <!--04072016 - Modified by Poulami Starts.-->
                <apex:panelGroup rendered="{!mpwResf.Category__c == 'TD' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}">
                    <apex:outputLabel styleClass="labelCol" value="PA Code" />
                    <apex:outputField value="{!mpwResf.PA_Code__c}"
                        rendered="{!(mpwResf.Category__c == 'TD' && mpwResf.Usage__c == 'Opportunistic') || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}" />
                    <apex:outputText value="{!displayPACode}" rendered="{!mpwResf.Category__c == 'TD'}" />
                </apex:panelGroup>
                <!--04072016 - Modified by Poulami Ends.-->
            </apex:panelGrid>
            
            <!-- Edit Functionality when the Status is Accepted -->
            <apex:panelGrid id="categoryviewEdit"
                rendered="{!IF(accessMode == 'Edit',true,false) && ! !editAddDet}" columns="4"
                style="width:50%;margin-left:21px;">
                <apex:panelGroup >
                    <apex:outputLabel styleClass="labelCol" value="Category" />
                    <apex:outputField value="{!mpwResf.Category__c}" />
                </apex:panelGroup>
                <apex:panelGroup rendered="{!mpwResf.Category__c != 'TD' && mpwResf.Category__c != 'Customer'}">
                    <apex:outputLabel styleClass="labelCol" value="Sub Category" />
                    <apex:outputField value="{!mpwResf.Sub_Category__c}"
                        rendered="{!mpwResf.Category__c != 'TD'}" />
                </apex:panelGroup>
                <apex:panelGroup rendered="{!mpwResf.Category__c != 'Customer'}">
                    <apex:outputLabel styleClass="labelCol" value="Usage" />
                    <apex:outputField value="{!mpwResf.Usage__c}" />
                </apex:panelGroup>
                <!--04072016 - Modified by Poulami Starts.-->
                <apex:panelGroup rendered="{!mpwResf.Category__c == 'TD' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}">
                    <apex:outputLabel styleClass="labelCol" value="PA Code" />
                    <apex:outputField value="{!mpwResf.PA_Code__c}"
                        rendered="{!mpwResf.Category__c == 'TD' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}" />
                </apex:panelGroup>
                <!--04072016 - Modified by Poulami Ends.-->
            </apex:panelGrid>
            <br />
            <apex:outputPanel id="accountinfo">
                <apex:actionRegion >
                    <apex:panelGrid columns="2" style="width:50%;margin-left:21px;"
                                    rendered="{!accessMode == 'Edit' && !editAddDet}">
                        <apex:panelGroup >
                            <apex:outputLabel value="Company Name" styleClass="labelCol" />
                            <apex:inputField value="{!mpwResf.Customer_Company_Name__c}"
                                rendered="{!accessMode == 'Edit' && isExternalUser == false && mpwResf.Category__c == 'Customer'}">
                                <apex:actionSupport event="onchange"
                                    action="{!retreiveCustomerInformation}"
                                    reRender="section9,section10,section11" status="actStatusId" />
                            </apex:inputField>
                            <apex:inputField value="{!mpwResf.Account_Internal__c}"
                                             rendered="{!accessMode == 'Edit' && isExternalUser == false && mpwResf.Category__c != 'Customer'}">
                                <apex:actionSupport event="onselect" action="{!retreiveCustomerInformation}"
                                    reRender="section9,section10,section11" status="actStatusId" />
                            </apex:inputField>
                            <apex:outputField value="{!mpwResf.Customer_Company_Name__c}"
                                rendered="{!accessMode == 'Edit' && isExternalUser == true}" />
                        </apex:panelGroup>
                    </apex:panelGrid>
                </apex:actionRegion>
                <apex:panelGrid columns="2" style="width:50%;margin-left:21px;"
                    rendered="{!IF(AND(accessMode == 'View',mpwResf.Category__c == 'Customer'),true,false)}">
                    <apex:panelGroup >
                        <apex:outputLabel value="Company Name" styleClass="labelCol" />
                        <apex:outputField value="{!mpwResf.Customer_Company_Name__r.name}" />
                    </apex:panelGroup>
                </apex:panelGrid>
                
                <br/>
                <apex:outputPanel id="associateddevice">
                <apex:panelGrid rendered="{!IF(AND(accessMode == 'Edit',OR(isExternalUser == false,AND(isfae == true, mpwResf.Form_Status__c == 'Pending FAE Review'))),true,false)}" columns="1" style="width:80%;margin-left:21px;">
                    <apex:panelGroup >
                        <apex:outputLabel value="Device" styleClass="labelCol"/>
                        <apex:inputField value="{!mpwResf.Device__c}" />
                    </apex:panelGroup>
                </apex:panelGrid>
            </apex:outputPanel>
            
            <apex:outputPanel id="associateddeviceview">
                <apex:panelGrid rendered="{!IF(accessMode == 'View',true,false)}" columns="1" style="width:80%;margin-left:21px;">
                    <apex:panelGroup >
                        <apex:outputLabel value="Device" styleClass="labelCol"/>
                        <apex:outputField value="{!mpwResf.Device__c}" />
                    </apex:panelGroup>
                </apex:panelGrid>
            </apex:outputPanel>
            
            <br/>
            <apex:outputPanel id="sonumber">
                <apex:panelGrid rendered="{!IF(AND(accessMode == 'Edit',OR(isCSRProfile == true, isAdmin == true, editCSR == true)),true,false)}" columns="1" style="width:80%;margin-left:21px;">
                    <apex:panelGroup >
                                <apex:outputLabel value="Sales Order Number" styleClass="labelCol"/>
                                <apex:inputField value="{!mpwResf.Sales_Order__c}" />
                        </apex:panelGroup>
                </apex:panelGrid>
                
                <apex:panelGrid rendered="{!IF(accessMode == 'View',true,false)}" columns="1" style="width:80%;margin-left:21px;">
                    <apex:panelGroup >
                                <apex:outputLabel value="Sales Order Number" styleClass="labelCol"/>
                                <apex:outputField value="{!mpwResf.Sales_Order__c}" />
                        </apex:panelGroup>
                </apex:panelGrid>
            </apex:outputPanel>
            
            <br/>
            <!-- Edit Functionality when the Status is Accepted -->
                <apex:panelGrid columns="2" style="width:50%;margin-left:21px;"
                    rendered="{!IF(AND(accessMode == 'Edit',mpwResf.Category__c == 'Customer'),true,false) && ! !editAddDet}">
                    <apex:panelGroup >
                        <apex:outputLabel value="Company Name" styleClass="labelCol" />
                        <apex:outputField value="{!mpwResf.Customer_Company_Name__r.Name}" />
                    </apex:panelGroup>
                </apex:panelGrid>
            </apex:outputPanel>
            <br />
                        
            <apex:outputPanel id="section3">
                <apex:pageBlockSection title="Process Information"
                    collapsible="false" >
                   
                    <apex:panelGrid rendered="{!IF(accessMode == 'Edit',true,false) && !editAddDet}">
                       <apex:panelGroup >
                          <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                             Note: Final lot run will be based on process details registered in Configurator/CDRS
                          </apex:outputLabel>
                         <br/>  <br/>
                       </apex:panelGroup>
                       <apex:panelGroup >
                         <apex:outputText value="Process" styleClass="labelCol" />
                            <apex:selectList value="{!mpwResf.Process_Type__c}" size="1"
                                multiselect="false">
                                <apex:selectOptions value="{!Processes}" />
                                <apex:actionSupport event="onchange" action="{!retrieveMPWTrainScheduleDetails}"
                                   rerender="section3, section4, errorSection" status="actStatusId" />
                            </apex:selectList>
                        </apex:panelGroup>
                    </apex:panelGrid>
                    <br />
                    <apex:pageblockTable value="{!MPWTrainMaintenanceDetailList}"
                        var="s"
                        rendered="{!IF(AND(MPWTrainMaintenanceDetailList.size > 0,accessMode == 'Edit'), true, false) && !editAddDet}">
                        <apex:column value="{!s.question}">
                            <apex:facet name="header">Question</apex:facet>
                        </apex:column>
                        <apex:column >
                            <apex:selectRadio value="{!s.answer}" id="moduleanswer">
                                <apex:selectOptions value="{!s.selectOption}" />
                                <apex:actionSupport event="onchange" reRender="section3" status="actStatusId" />
                            </apex:selectRadio>
                            <script>
                                var selectOptionTable = document.getElementById('{!$Component.moduleanswer}');
                                var cells = selectOptionTable.getElementsByTagName('td');
                        
                                for (var i=0,len=cells.length; i<len; i++){
                                    cells[i].style.border = 'none' ;
                                }
                            </script>
                            <apex:facet name="header">Answer</apex:facet>
                            <apex:pageBlockTable value="{!s.sqwList}" var="ss"
                                rendered="{!IF(AND(CONTAINS(s.question,'Do you need SRAM'),s.answer == 'Yes'),true,false)}"
                                style="width: 400px">
                                <apex:column >
                                    <apex:inputCheckbox value="{!ss.selected}" />
                                </apex:column>
                                <apex:column >{!ss.name}</apex:column>
                                <apex:column />
                                <apex:column >SRAM Array total block size (in MB)</apex:column>
                                <apex:column >
                                    <apex:inputField value="{!ss.mpwSRAMQues.Answer__c}"
                                        style="width:60px" />
                                </apex:column>
                            </apex:pageBlockTable>
                        </apex:column>
                    </apex:pageblockTable>
                    <br />
                    <apex:panelGrid rendered="{!IF(accessMode == 'View',true,false)}">
                       <apex:panelGroup >
                          <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                             Note: Final lot run will be based on process details registered in Configurator/CDRS
                          </apex:outputLabel>
                         <br/>  <br/>
                       </apex:panelGroup>
                        <apex:panelGroup >
                            <apex:outputLabel value="Process" styleClass="labelCol" />
                            <apex:outputField value="{!mpwResf.Process_Type__r.Name}" />
                        </apex:panelGroup>
                    </apex:panelGrid>
                    <br />
                    <apex:outputPanel rendered="{!IF(AND(mpwpiqsize > 0,accessMode='View'),true,false)}">
                        <apex:pageBlockTable value="{!mpwpiqList}" var="mpwpiq"
                            rendered="{!IF(AND(mpwpiqsize > 0,accessMode='View'),true,false)}">
                            <apex:column value="{!mpwpiq.MPW_Maintenance_Details__r.MPW_Tech_Module__r.Question__c}" />
                            <apex:column >{!mpwpiq.Answer__c}
                            <apex:facet name="header">Answer</apex:facet>
                            <apex:pageBlockTable value="{!mpwsramquestionList}" style="width: 400px"
                                    var="mpwsram"
                                    rendered="{!IF(AND(CONTAINS(mpwpiq.MPW_Maintenance_Details__r.MPW_Tech_Module__r.Question__c,'Do you need SRAM'), mpwpiq.Answer__c == 'Yes'),true,false)}">
                                    <apex:column >{!mpwsram.MPW_SRAM_Configuration__r.Name}</apex:column>
                                    <apex:column ></apex:column>
                                    <apex:column >SRAM Array total block size (in MB)</apex:column>
                                    <apex:column >{!mpwsram.Answer__c}</apex:column>
                                </apex:pageBlockTable>
                            </apex:column>
                        </apex:pageBlockTable>
                    </apex:outputPanel>
                    
                    <!--Edit Functionality when the Status is Accepted -->
                    <br />
                    <apex:panelGrid rendered="{!IF(accessMode == 'Edit',true,false) && ! !editAddDet}">
                       <apex:panelGroup >
                          <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                             Note: Final lot run will be based on process details registered in Configurator/CDRS
                          </apex:outputLabel>
                         <br/> <br/>
                       </apex:panelGroup>
                        <apex:panelGroup >
                            <apex:outputLabel value="Process" styleClass="labelCol" />
                            <apex:outputField value="{!mpwResf.Process_Type__r.Name}" />
                        </apex:panelGroup>
                    </apex:panelGrid>
                    <br />
                    <apex:pageBlockTable value="{!mpwpiqList}" var="mpwpiq"
                        rendered="{!IF(AND(mpwpiqList != null,accessMode='Edit'),true,false) && ! !editAddDet}">
                        <apex:column value="{!mpwpiq.MPW_Maintenance_Details__r.MPW_Tech_Module__r.Question__c}" />
                        <apex:column >{!mpwpiq.Answer__c}
                        <apex:pageBlockTable value="{!mpwsramquestionList}" style="width: 400px"
                                var="mpwsram"
                                rendered="{!IF(AND(CONTAINS(mpwpiq.MPW_Maintenance_Details__r.MPW_Tech_Module__r.Question__c,'Do you need SRAM'), mpwpiq.Answer__c == 'Yes'),true,false)}">
                                <apex:column >{!mpwsram.MPW_SRAM_Configuration__r.Name}</apex:column>
                                <apex:column ></apex:column>
                                <apex:column >SRAM Array total block size (in MB)</apex:column>
                                <apex:column >{!mpwsram.Answer__c}</apex:column>
                            </apex:pageBlockTable>
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section4">
                <apex:pageblockSection title="Chip Information" collapsible="false"
                    rendered="{!IF(accessMode=='Edit',true,false) && !editAddDet}" columns="1">
                    <apex:outputPanel layout="block">
                        <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                            For wafer delivery, backgrind is not applicable.<br />
                            Each chip requires a chip identification at the left bottom corner of the die on the gate, metal 1 and top metal.
                        </apex:outputLabel>
                        <br />
                        <br />
                        <apex:pageMessage summary="You can add upto 10 rows only."
                            severity="warning" strength="1" id="rowError"
                            rendered="{!IF(showError,true,false)}" />
                        <br />
                        <br />
                        <apex:outputPanel layout="block" style="overflow:auto;width:auto;">
                        <div style="width:950px">    
                        <html>
                            <table border="1" class="list" cellspacing="0" cellpadding="0">
                                <tr class="headerRow" align="center">
                                    <td rowspan="2">Action</td>
                                    <td rowspan="2" style="font-size: 8pt;">Prime Die Name</td>
                                    <td colspan="2" style="font-size: 8pt">Drawn Die Size</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'),true,false)}">
                                        <td colspan="2" style="font-size: 8pt">Quantity</td>
                                    </apex:variable>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(OR(mpwResf.Category__c == 'FAB', mpwResf.Category__c == 'TD'),true,false)}">
                                        <td style="font-size: 8pt">Quantity</td>
                                    </apex:variable>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(OR(mpwtm.Geometry__c == '28nm', mpwtm.Geometry__c == '40nm'), true, false)}">
                                        <td rowspan="2" style="font-size: 8pt">Drawn Orientation
                                            Restricted Structures
                                            <apex:variable var="v" value="" rendered="{!IF(ruleName == null,true,false)}">
                                            <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                <span>
                                                   1) Selection to be based on Rule as specifield in the Design manual.<br/>
                                                   2) For floor planning, selection needs to be in accordance to rule stated.<br/>
                                                   3) Incorrect/inaccurate selection will jeopardize your device acceptance on the MPW due to floor space constraints.
                                                </span>
                                            </div>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!IF(ruleName != null,true,false)}">
                                            <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                <span>
                                                   1) Selection to be based on Rule {!ruleName} as specifield in the Design manual.<br/>
                                                   2) For floor planning, selection needs to be in accordance to rule stated.<br/>
                                                   3) Incorrect/inaccurate selection will jeopardize your device acceptance on the MPW due to floor space constraints.
                                                </span>
                                            </div>
                                            </apex:variable>
                                        </td>
                                    </apex:variable>
                                    <!--04072016 - Modified by Poulami Starts.-->
                                    <apex:variable var="v" value=""
                                        rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm'|| mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP' || mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                        <td rowspan="2" style="font-size: 8pt">Metal Stack</td>
                                    </apex:variable>
                                    <!--04072016 - Modified by Poulami Ends.-->
                                    <apex:variable value="" var="v"
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td rowspan="2" style="font-size: 8pt;">Device Type</td>
                                        <td rowspan="2">
                                            Corner Split
                                            <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                <span>
                                                   If selected YES then attach the relevant document after saving the form.<br/>
                                                   Select Yes for Core Only and No for Others.
                                                </span>
                                            </div>
                                        </td>
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!mpwResf.Category__c == 'TD'}">
                                        <td rowspan="2" style="font-size: 8pt">GMPL Project Name</td>
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!mpwResf.Category__c == 'Customer'}">
                                        <td rowspan="2" style="font-size: 8pt">Remarks</td>
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!mpwResf.Category__c != 'Customer'}">
                                        <td rowspan="2" style="font-size: 8pt">Purpose</td>
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td rowspan="2">
                                            Backgrind
                                            <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                <span>
                                                   Applicable for die form delivery only.
                                                </span>
                                            </div>
                                        </td>
                                        <td rowspan="2">
                                            Short Loop Wafer
                                            <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                <span>
                                                   6 short loop wafers are required for bumping setup.
                                                </span>
                                            </div>
                                        </td>
                                        <apex:variable var="v" value=""
                                            rendered="{!showSubDeviceExtraction}">
                                            <td rowspan="2">
                                                Sub Devices Extraction
                                                <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                    <span>
                                                       Please attach document with following information after Save As Draft -The floor plan that clearly identify each sub devices -The name to be shown on the label for each sub devices -The die size for each sub device (minimum is 1mm X 1mm) -The scribe line between the sub device >= 80um.
                                                    </span>
                                                </div>
                                            </td>
                                        </apex:variable>
                                        <td colspan="2">
                                                Expedite
                                                <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                    <span>
                                                       To request dice delivery in 1st batch. Decision to accept can only be confirmed after customers GDS II tape out.
                                                    </span>
                                                </div>
                                        </td>
                                        <td rowspan="2">
                                                Turnkey Services
                                                <div class="helpOrb tooltip" style="position:relative;left:1px">
                                                    <span>
                                                       If selected YES then attach the Turnkey Pre Alert Form after saving the form.
                                                    </span>
                                                </div>
                                        </td>
                                        <td rowspan="2">
                                                Turnkey OSAT address
                                        </td>
                                        
                                    </apex:variable>
                                </tr>
                                <tr class="headerRow" align="center">
                                    <td style="font-size: 8pt">X(um)</td>
                                    <td style="font-size: 8pt">Y(um)</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td style="font-size: 8pt">In Die Form</td>
                                    </apex:variable>
                                    <td style="font-size: 8pt">In Wafer Form</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td style="font-size: 8pt">In Die Form</td>
                                        <td style="font-size: 8pt">In Wafer Form</td>
                                    </apex:variable>
                                </tr>
                                <apex:variable var="rowNum" value="{!0}" />
                                <apex:repeat value="{!PrimeDieWrapperList}" var="mpwPrimeDieWrapper">
                                    <tr class="datarow">
                                        <td class="datacell"><apex:commandLink value="Remove"
                                                action="{!delRowToChipInformation}" reRender="section4, section6"
                                                immediate="true" rendered="{!PrimeDieWrapperList.size > 1}" status="actStatusId"  >
                                                <apex:param value="{!rowNum}" name="index" />
                                            </apex:commandLink> <apex:variable var="rowNum" value="{!rowNum+1}" /></td>
                                        <td class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField id="primediename"
                                                    value="{!mpwPrimeDieWrapper.mpwPrimeDie.Prime_Die_Name__c}"
                                                    style="width:65px">
                                                    <apex:actionSupport event="onchange" reRender="section6"
                                                        onsubmit="checkPrimDieNameRegex('{!$Component.primediename}'); checkPrimeDieName('{!$Component.primediename}');" status="actStatusId" />
                                                </apex:inputField>
                                            </div></td>
                                        <td class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Drawn_Die_Size_X_um__c}"
                                                    id="xvalue" onchange="checkdrawndieSize('{!$Component.xvalue}')" style="width:60px" />
                                            </div></td>
                                        <td class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Drawn_Die_Size_Y_um__c}"
                                                    id="yvalue" onchange="checkdrawndieSize('{!$Component.yvalue}')" style="width:60px" />
                                                    <!--Commented by Anil <apex:actionSupport event="onchange" reRender="section4"
                                                        onsubmit="checkdrawndieSize('{!$Component.yvalue}')" status="actStatusId" />
                                                    </apex:inputField>-->
                                            </div></td>
                                        <apex:variable value="" var="v"
                                            rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <!--Commented by Anil <apex:actionRegion >-->
                                                    <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c}"
                                                        size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwPrimeDieWrapper.quantityDieFormList}" />
                                                        <apex:actionSupport event="onchange" reRender="section4" status="actStatusId"/>
                                                    </apex:selectList>
                                                <!--</apex:actionRegion>-->
                                                </div>
                                            </td>
                                        </apex:variable>
                                        <td class="datacell">
                                            <!-- Commented by Anil <apex:actionRegion >-->
                                                <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Wafer_Form__c}"
                                                    size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwPrimeDieWrapper.quantityWaferFormList}" />
                                                    <apex:actionSupport event="onchange" reRender="section4" status="actStatusId"/>
                                                </apex:selectList>
                                            <!--</apex:actionRegion>-->
                                        </td>
                                                                                        <apex:variable var="v" value=""
                                                                                                rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                                                                                <td class="datacell"><apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Drawn_Orientation_Restricted_Structures__c}"
                                                                                                                size="1" multiselect="false" style="width:70px">
                                                                                                                <apex:selectOptions value="{!mpwPrimeDieWrapper.drawnOrientationList}" />
                                                                                                        </apex:selectList></td>
                                                                                        </apex:variable>
                                                                                        <apex:variable value="" var="v"
                                            rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <!--04072016 - Modified by Poulami Starts.-->
                                            <apex:variable var="v" value=""
                                                rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP'  ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                                <td class="datacell">
                                                <div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Metal_Stack__c}" size="1"
                                                        multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwPrimeDieWrapper.metalStackList}" />
                                                    </apex:selectList>
                                                    </div>
                                                    
                                                    </td>
                                            </apex:variable>
                                            <!--04072016 - Modified by Poulami Ends.-->
                                            <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Device_Type__c}" size="1"
                                                        multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwPrimeDieWrapper.deviceTypeList}" />
                                                    </apex:selectList>
                                                </div></td>
                                            <td class="datacell">
                                                <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Corner_Split__c}" size="1"
                                                    multiselect="false" style="width:87px">
                                                    <apex:selectOptions value="{!mpwPrimeDieWrapper.cornerSplitList}" />
                                                    <apex:actionSupport event="onchange"  reRender="section4" status="actStatusId" />
                                                </apex:selectList> 
                                                <apex:outputPanel rendered="{!IF(((mpwPrimeDieWrapper.mpwPrimeDie.Corner_Split__c == 'Yes' && mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != '0') || (mpwPrimeDieWrapper.mpwPrimeDie.Corner_Split__c == 'Yes' && mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Wafer_Form__c != '0')),true,false)}">
                                                <table border = "0">
                                                <tr>
                                                <apex:variable id="subcornersplit" var="v" value=""
                                                    rendered="{!IF((mpwPrimeDieWrapper.mpwPrimeDie.Corner_Split__c == 'Yes' && mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != '0'),true,false)}">
                                                    <apex:inputHidden value="{!mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c}"
                                                        id="dieqty" />
                                                    
                                                    <td>
                                                    <table border="1" class="list" cellspacing="0" cellpadding="0">
                                                        <br />
                                                        <tr>
                                                        <td colspan="2">In Die Form</td>
                                                        </tr>
                                                        <tr>
                                                            <td>POR:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.POR__c}" id="por"
                                                                    style="width:70px"
                                                                    onchange="checkCornerSubValues('{!$Component.por}','{!$Component.dieqty}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>FF:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.FF__c}" id="ff"
                                                                    style="width:70px"
                                                                    onchange="checkCornerSubValues('{!$Component.ff}','{!$Component.dieqty}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>SS:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.SS__c}" id="ss"
                                                                    style="width:70px"
                                                                    onchange="checkCornerSubValues('{!$Component.ss}','{!$Component.dieqty}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>FS:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.FS__c}" id="fs"
                                                                    style="width:70px"
                                                                    onchange="checkCornerSubValues('{!$Component.fs}','{!$Component.dieqty}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>SF:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.SF__c}" id="sf"
                                                                    style="width:70px"
                                                                    onchange="checkCornerSubValues('{!$Component.sf}','{!$Component.dieqty}');" /></td>
                                                        </tr>
                                                        
                                                    </table>
                                                    </td>
                                                </apex:variable>
                                                <!-- 01042016 - Added by Poulami Starts -->
                                                <apex:variable id="subcornersplit8" var="v" value=""
                                                    rendered="{!IF((mpwPrimeDieWrapper.mpwPrimeDie.Corner_Split__c == 'Yes' && mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Wafer_Form__c != '0'),true,false)}">
                                                    <apex:inputHidden value="{!mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Wafer_Form__c}"
                                                        id="dieqty8" />
                                                    <td>
                                                    <table border="1" class="list" cellspacing="0" cellpadding="0" float = "right">
                                                        <br />
                                                        <tr>
                                                        <td colspan ="2">In Wafer Form</td>
                                                        </tr>
                                                        <tr>
                                                            <td>POR:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_POR__c}" id="wpor"
                                                                    style="width:70px"
                                                                    onchange="checkWaferCornerSubValues('{!$Component.wpor}','{!$Component.dieqty8}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>FF:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_FF__c}" id="wff"
                                                                    style="width:70px"
                                                                    onchange="checkWaferCornerSubValues('{!$Component.wff}','{!$Component.dieqty8}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>SS:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_SS__c}" id="wss"
                                                                    style="width:70px"
                                                                    onchange="checkWaferCornerSubValues('{!$Component.wss}','{!$Component.dieqty8}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>FS:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_FS__c}" id="wfs"
                                                                    style="width:70px"
                                                                    onchange="checkWaferCornerSubValues('{!$Component.wfs}','{!$Component.dieqty8}');" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td>SF:</td>
                                                            <td><apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_SF__c}" id="wsf"
                                                                    style="width:70px"
                                                                    onchange="checkWaferCornerSubValues('{!$Component.wsf}','{!$Component.dieqty8}');" /></td>
                                                        </tr>
                                                        
                                                    </table>
                                                    </td>
                                                    
                                                </apex:variable>
                                                </tr>
                                                </table>
                                                </apex:outputPanel>
                                                <!-- 01042016 - Added by Poulami Ends -->
                                            </td>
                                        </apex:variable>
                                        <apex:variable value="" var="v"
                                            rendered="{!mpwResf.Category__c == 'TD'}">
                                            <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputText value="{!mpwPrimeDieWrapper.mpwPrimeDie.GMPL_Project_Name_Text__c}"
                                                        style="width:85px" id="gmplProjectName" html-readonly="true" />
                                                </div> 
                                                <a href="#"
                                                onclick="openLookupPopup('geometry','{!$Component.gmplProjectName}','{!$Component.gmplprojectId}'); return false">
                                                    <img src="/s.gif" alt="Customer Requestor Name Lookup"
                                                    class="lookupIcon" onblur="this.className = 'lookupIcon';"
                                                    onfocus="this.className = 'lookupIconOn';"
                                                    onmouseout="this.className = 'lookupIcon';this.className = 'lookupIcon';"
                                                    onmouseover="this.className = 'lookupIconOn';this.className = 'lookupIconOn';"
                                                    title="GMPL Project Name Lookup" />
                                            </a>   
                                            <!-- Commented by Anil : Error system.security.NoAccessException: Update access denied for MPW_Train_Maintenance__c, controller action methods may not execute                                         
                                            <apex:inputHidden value="{!mpwtm.Geometry__c}" id="geometry" /> 
                                            -->
                                            <input type="hidden" value="{!mpwtm.Geometry__c}" id="geometry" />
                                            <apex:inputHidden value="{!mpwPrimeDieWrapper.mpwPrimeDie.GMPL_Project_Name_Id__c}"
                                                    id="gmplprojectId" /></td>
                                        </apex:variable>
                                        <td class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.GMPL_Purpose__c}" 
                                                    style="width:150px" />
                                            </div></td>
                                        <apex:variable var="v" value=""
                                            rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Backgrind__c}" size="1"
                                                        multiselect="false" style="width:70px"
                                                        rendered="{!IF(AND(mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != null, mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != '0'), true, false)}">
                                                        <apex:selectOptions value="{!mpwPrimeDieWrapper.backgrindList}"
                                                            rendered="{!IF(AND(mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != null, mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != '0'), true, false)}" />
                                                    </apex:selectList>
                                                </div></td>
                                            <td class="datacell"><apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.ShortLoop_Wafer__c}"
                                                    size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwPrimeDieWrapper.shortLoopList}" />
                                                </apex:selectList></td>
                                            <apex:variable var="v" value=""
                                                rendered="{!showSubDeviceExtraction}">
                                                <td class="datacell"><apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Sub_Devices_Extraction__c}"
                                                        size="1" multiselect="false" style="width:70px" rendered="{!IF(AND(mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != '0',mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != null),true,false)}">
                                                        <apex:selectOptions value="{!mpwPrimeDieWrapper.subDeviceExtractionList}" rendered="{!IF(AND(mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != '0',mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c != null),true,false)}"/>
                                                    </apex:selectList></td>
                                            </apex:variable>
                                            <td class="datacell"><apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Expedite_In_DIE_Form__c}"
                                                    size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwPrimeDieWrapper.expediteDieFormList}" />
                                                </apex:selectList></td>
                                            <td class="datacell"><apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Expedite_In_WAFER_Form__c}"
                                                    size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwPrimeDieWrapper.expediteWaferFormList}" />
                                                </apex:selectList></td>
                                             
                                            <td class="datacell">
                                                
                                                <apex:selectList value="{!mpwPrimeDieWrapper.mpwPrimeDie.Turnkey_Service__c}"
                                                    size="1" multiselect="false" style="width:70px">
                                                
                                                    <apex:selectOptions value="{!mpwPrimeDieWrapper.turnkeyServicesList}" />
                                                    <apex:actionSupport event="onchange" reRender="section4" status="actStatusId"/>
                                                </apex:selectList></td>
                                                <td class="datacell">
                                                    <div class="requiredInput">
                                                <apex:inputField value="{!mpwPrimeDieWrapper.mpwPrimeDie.Turnkey_OSAT_address__c}" 
                                                    style="width:150px" rendered="{!IF(AND(mpwPrimeDieWrapper.mpwPrimeDie.Turnkey_Service__c!= null,mpwPrimeDieWrapper.mpwPrimeDie.Turnkey_Service__c== 'Yes'), true, false)}"/>
                                              </div>
                                               </td>
                                                    
                                                
                                        </apex:variable>
                                    </tr>
                                </apex:repeat>
                            </table>
                        </html>
                        </div>
                        </apex:outputPanel>
                        <br />
                        <apex:commandButton value="Add"
                            action="{!addRowToChipInformation}" 
                            reRender="section4, section6, rowError" status="actStatusId" />
                    </apex:outputPanel>
                </apex:pageblockSection>
            </apex:outputPanel>

            <apex:pageblockSection id="section4view" title="Chip Information"
                collapsible="false" rendered="{!IF(accessMode=='View',true,false)}"
                columns="1">
                <apex:outputPanel layout="block">
                    <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                        For wafer delivery, backgrind is not applicable.<br />
                        Each chip requires a chip identification at the left bottom corner of the die on the gate, metal 1 and top metal.
                    </apex:outputLabel>
                    <br />
                    <br />
                                            <html>
                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                            <tr class="headerRow" align="center">
                                <td rowspan="2" style="font-size: 8pt;">Prime Die Name</td>
                                <td colspan="2" style="font-size: 8pt">Drawn Die Size</td>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td colspan="2" style="font-size: 8pt">Quantity</td>
                                </apex:variable>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(OR(mpwResf.Category__c == 'FAB', mpwResf.Category__c == 'TD'), true, false)}">
                                    <td style="font-size: 8pt">Quantity</td>
                                </apex:variable>
                                                                <apex:variable var="v" value=""
                                                                        rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                                                        <td rowspan="2" style="font-size: 8pt">Drawn Orientation
                                                                                Restricted Structures</td>
                                                                </apex:variable>
                                                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <!--04072016 - Modified by Poulami Starts.-->
                                    <apex:variable var="v" value=""
                                        rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP' ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                        <td rowspan="2" style="font-size: 8pt">Metal Stack</td>
                                    </apex:variable>
                                    <!--04072016 - Modified by Poulami Ends.-->
                                    <td rowspan="2" style="font-size: 8pt;">Device Type</td>
                                    <td rowspan="2" style="font-size: 8pt">Corner Split</td>
                                    <!--  01042016 - Added by Poulami Starts -->
                                    <td colspan="5" style="font-size: 8pt">In Die Form <br />(multiple of 50 dies)</td>
                                    <td colspan="5" style="font-size: 8pt">In Wafer Form <br />(multiple of 1 wafer)</td>
                                    <!--  01042016 - Added by Poulami Ends -->
                                    <td rowspan="2" style="font-size: 8pt">Corner Split Attachment</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'TD'}">
                                    <td rowspan="2" style="font-size: 8pt">GMPL Project Name</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <td rowspan="2" style="font-size: 8pt">Remarks</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c != 'Customer'}">
                                    <td rowspan="2" style="font-size: 8pt">GMPL Purpose/Remarks</td>
                                </apex:variable>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td rowspan="2" style="font-size: 8pt">BackGrind</td>
                                    <td rowspan="2" style="font-size: 8pt">Short Loop Wafer</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!showSubDeviceExtraction}">
                                        <td rowspan="2" style="font-size: 8pt">Sub Devices Extraction</td>
                                        <td rowspan="2" style="font-size: 8pt">Sub Devices Extraction
                                            Attachment</td>
                                    </apex:variable>
                                    <td colspan="2" style="font-size: 8pt">Expedite</td>
                                    <td rowspan="2" style="font-size: 8pt">Turnkey Services</td>
                                    <td rowspan="2" style="font-size: 8pt">Turnkey OSAT address</td>
                                    <td rowspan="2" style="font-size: 8pt;text-decoration:underline"><br /><a href="{!$Resource.MPW_Turnkey_PreAlert_Form}">TurnKey Pre-Alert
                                        Form</a></td>                               
                                </apex:variable>
                                <!-- 04292016 - Added by Poulami Starts -->
                                <apex:variable value="" var="v"
                                        rendered="{!IF(AND(OR(mpwResf.Form_Status__c == 'Accepted by MPW Tapeout', mpwResf.Form_Status__c == 'Accepted by CE', mpwResf.Form_Status__c == 'Accepted by Turnkey')), true,false)}">
                                        <td rowspan="2" style="font-size: 8pt;" >
                                                MPW Change Request
                                        </td>
                                </apex:variable>
                                <!-- 04292016 - Added by Poulami Ends -->
                                <apex:variable var="v" value="" rendered="{!IF(isChangeReq != null,true,false)}">
                                    <td rowspan="2" style="font-size: 8pt">Action</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <td style="font-size: 8pt">X(um)</td>
                                <td style="font-size: 8pt">Y(um)</td>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">In Die Form</td>
                                </apex:variable>
                                <td style="font-size: 8pt">In Wafer Form</td>
                                <!-- 01042016 - Added by Poulami Starts -->
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">POR</td>
                                    <td style="font-size: 8pt">FF</td>
                                    <td style="font-size: 8pt">SS</td>
                                    <td style="font-size: 8pt">FS</td>
                                    <td style="font-size: 8pt">SF</td>
                                    <td style="font-size: 8pt">POR</td>
                                    <td style="font-size: 8pt">FF</td>
                                    <td style="font-size: 8pt">SS</td>
                                    <td style="font-size: 8pt">FS</td>
                                    <td style="font-size: 8pt">SF</td>
                                </apex:variable>
                                <!-- 01042016 - Added by Poulami Ends -->
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">In Die Form</td>
                                    <td style="font-size: 8pt">In Wafer Form</td>
                                </apex:variable>
                            </tr>
                            <!--04292016 - Modified by Poulami Starts.-->
                            <apex:repeat value="{!mpwpdchList}" var="mpwpd">
                            <!--04292016 - Modified by Poulami Ends.-->
                                <tr class="datarow" align="center">
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Prime_Die_Name__c}" style="width:65px" /></td>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Drawn_Die_Size_X_um__c}" style="width:60px" /></td>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Drawn_Die_Size_Y_um__c}" style="width:60px" /></td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Delivery_Qty_Die_Form__c}" style="width:70px" /></td>
                                    </apex:variable>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Delivery_Qty_Wafer_Form__c}" style="width:70px" /></td>
                                                                        <apex:variable var="v" value=""
                                                                                rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                                                                <td class="datacell"><apex:outputField value="{!mpwpd.Drawn_Orientation_Restricted_Structures__c}"
                                                                                                style="width:70px" /></td>
                                                                        </apex:variable>
                                                                        <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <!--04072016 - Modified by Poulami Starts.-->
                                        <apex:variable var="v" value=""
                                            rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP' ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                            <td class="datacell"><apex:outputField value="{!mpwpd.Metal_Stack__c}" style="width:70px" /></td>
                                        </apex:variable>
                                        <!--04072016 - Modified by Poulami Ends.-->
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Device_Type__c}" style="width:70px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Corner_Split__c}" style="width:70px" /></td>
                                        <td class="datacell">{!mpwpd.POR__c}</td>
                                        <td class="datacell">{!mpwpd.FF__c}</td>
                                        <td class="datacell">{!mpwpd.SS__c}</td>
                                        <td class="datacell">{!mpwpd.FS__c}</td>
                                        <td class="datacell">{!mpwpd.SF__c}</td>
                                        <!-- 01042016 - Added by Poulami Starts -->
                                        <td class="datacell">{!mpwpd.Wafer_POR__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_FF__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_SS__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_FS__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_SF__c}</td>
                                        <!-- 01042016 - Added by Poulami Ends -->
                                        <td class="datacell">
                                            <apex:outputLink value="/servlet/servlet.FileDownload?file={!mpwpd.CornerSplitAttachedId__c}"
                                                target="_blank"
                                                rendered="{!IF(AND(mpwpd.Corner_Split__c == 'Yes',mpwpd.CornerSplitAttached__c == true,mpwResf.Form_Status__c !='Void'),true,false)}">View</apex:outputLink>
                                            |<apex:commandLink value="Attach"
                                                action="/apex/MPWPrimeDieAttachmentVF?MPWPrimeDieID={!mpwpd.Id}&AttachmentType=CornerSplit&initPoint={!initPoint}"
                                                rendered="{!IF(AND(mpwpd.Corner_Split__c == 'Yes',AND(mpwResf.Form_Status__c !='Void',mpwResf.Form_Status__c =='Draft')),true,false)}"
                                                styleClass="actionLink" />
                                        </td>
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!mpwResf.Category__c == 'TD'}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.GMPL_Project_Name_Text__c}" style="width:70px" /></td>
                                    </apex:variable>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.GMPL_Purpose__c}" style="width:70px" /></td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Backgrind__c}" style="width:70px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.ShortLoop_Wafer__c}" style="width:70px" /></td>
                                        <apex:variable var="v" value=""
                                            rendered="{!showSubDeviceExtraction}">
                                            <td class="datacell"><apex:outputField value="{!mpwpd.Sub_Devices_Extraction__c}" style="width:70px" /></td>
                                            <td class="datacell">
                                                <apex:outputLink value="/servlet/servlet.FileDownload?file={!mpwpd.SubDevicesExtractionAttachedId__c}"
                                                    target="_blank"
                                                    rendered="{!IF(AND(mpwpd.Sub_Devices_Extraction__c != '0',mpwpd.SubDevicesExtractionAttached__c == true,mpwResf.Form_Status__c !='Void'),true,false)}">View</apex:outputLink>
                                                |<apex:commandLink value="Attach"
                                                    action="/apex/MPWPrimeDieAttachmentVF?MPWPrimeDieID={!mpwpd.Id}&AttachmentType=SubDevicesExtraction&initPoint={!initPoint}"
                                                    rendered="{!IF(AND(mpwpd.Sub_Devices_Extraction__c != '0',AND(mpwResf.Form_Status__c !='Void',mpwResf.Form_Status__c =='Draft')),true,false)}"
                                                    styleClass="actionLink" />
                                            </td>
                                        </apex:variable>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Expedite_In_DIE_Form__c}" style="width:60px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Expedite_In_WAFER_Form__c}" style="width:65px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Turnkey_Service__c}" style="width:70px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Turnkey_OSAT_address__c}" style="width:70px" /></td>
                                        <td class="datacell">
                                            <apex:outputLink value="/servlet/servlet.FileDownload?file={!mpwpd.TurnkeyAttachedId__c}"
                                                target="_blank"
                                                rendered="{!IF(AND(mpwpd.Turnkey_Service__c == 'Yes',mpwpd.TurnkeyAttached__c == true,mpwResf.Form_Status__c !='Void'),true,false)}">View</apex:outputLink>
                                            |<apex:commandLink value="Attach"
                                                action="/apex/MPWPrimeDieAttachmentVF?MPWPrimeDieID={!mpwpd.Id}&AttachmentType=TurnkeyPreAlertForm&initPoint={!initPoint}"
                                                rendered="{!IF(AND(mpwpd.Turnkey_Service__c == 'Yes',AND(mpwResf.Form_Status__c !='Void',mpwResf.Form_Status__c =='Draft')),true,false)}"
                                                styleClass="actionLink" />
                                        </td>                                       
                                    </apex:variable>
                                    <!--04292016 - Added by Poulami Starts.-->
                                    <apex:variable value="" var="v"
                                        rendered="{!IF(AND(OR(mpwResf.Form_Status__c == 'Accepted by MPW Tapeout', mpwResf.Form_Status__c == 'Accepted by CE', mpwResf.Form_Status__c == 'Accepted by Turnkey')), true,false)}">
                                        <td class="datacell">
                                            <apex:outputLink value="/{!$Label.MPWPrimeDieReportId}?pv0={!mpwpd.Name}" target="_blank" rendered="{!IF(mpwpd.MPW_Change_Requests__r.size > 0, true,false)}">View MPW Change Request</apex:outputLink>
                                            <apex:outputText value="" rendered="{!IF(mpwpd.MPW_Change_Requests__r.size <= 0, true,false)}"/>
                                        </td>
                                    </apex:variable>
                                    <!--04292016 - Added by Poulami Ends.-->
                                    <apex:variable var="v" value="" rendered="{!IF(isChangeReq != null,true,false)}" >
                                    <td class="datacell">
                                        <apex:actionRegion >
                                            <apex:commandLink value="Change Request" action="{!showChangeRequest}" rendered="{!IF(AND(mpwResf.Form_Status__c !='Void',isChangeReq != null),true,false)}" styleClass="actionLink changeRequestSectionFocus" reRender="changeRequestSection" >
                                                <apex:param name="primeIdfield" value="{!mpwpd.Id}"/>
                                                <apex:param name="primeNamefield" value="{!mpwpd.Prime_Die_Name__c}"/>
                                            </apex:commandlink>
                                            <apex:outputpanel rendered="{!IF(AND(mpwResf.Form_Status__c !='Void',isChangeReq != null),true,false)}">
                                                <script>
                                                    document.getElementsByClassName('changeRequestSectionFocus')[0].focus();
                                                </script>
                                            </apex:outputpanel>
                                        </apex:actionRegion>
                                    </td>
                                    </apex:variable>
                                </tr>
                            </apex:repeat>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>
            
            <!-- Edit Functionality when the Status is Accepted -->
            <apex:pageblockSection id="section4viewEdit" title="Chip Information"
                collapsible="false" rendered="{!IF(accessMode=='Edit',true,false) && ! !editAddDet}"
                columns="1">
                <apex:outputPanel layout="block">
                    <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                        For Wafer Delivery, backgrind is not applicable.<br />
                        Each Chip requires a Chip identification at the left bottom corner of the die on gate only, metal 1 and top metal.
                    </apex:outputLabel>
                    <br />
                    <br />
                    <html>
                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                            <tr class="headerRow" align="center">
                                <td rowspan="2" style="font-size: 8pt;">Prime Die Name</td>
                                <td colspan="2" style="font-size: 8pt">Drawn Die Size</td>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td colspan="2" style="font-size: 8pt">Quantity</td>
                                </apex:variable>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(OR(mpwResf.Category__c == 'FAB', mpwResf.Category__c == 'TD'), true, false)}">
                                    <td style="font-size: 8pt">Quantity</td>
                                </apex:variable>
                                                                <apex:variable var="v" value=""
                                                                        rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                                                        <td rowspan="2" style="font-size: 8pt">Drawn Orientation
                                                                                Restricted Structures</td>
                                                                </apex:variable>
                                                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <!--04072016 - Modified by Poulami Starts.-->
                                    <apex:variable var="v" value=""
                                        rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP'  ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                        <td rowspan="2" style="font-size: 8pt">Metal Stack</td>
                                    </apex:variable>
                                    <!--04072016 - Modified by Poulami Ends.-->
                                    <td rowspan="2" style="font-size: 8pt;">Device Type</td>
                                    <td rowspan="2" style="font-size: 8pt">Corner Split</td>
                                    <!-- 01042016 - Added by Poulami Starts -->
                                    <td colspan="5" style="font-size: 8pt">In Die Form <br />(multiple of 50 dies)</td>
                                    <td colspan="5" style="font-size: 8pt">In Wafer Form <br />(multiple of 1 wafer)</td>
                                    <!-- 01042016 - Added by Poulami Ends -->
                                    <td rowspan="2" style="font-size: 8pt">Corner Split Attachment</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'TD'}">
                                    <td rowspan="2" style="font-size: 8pt">GMPL Project Name</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <td rowspan="2" style="font-size: 8pt">Remarks</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c != 'Customer'}">
                                    <td rowspan="2" style="font-size: 8pt">GMPL Purpose/Remarks</td>
                                </apex:variable>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td rowspan="2" style="font-size: 8pt">BackGrind</td>
                                    <td rowspan="2" style="font-size: 8pt">Short Loop Wafer</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!showSubDeviceExtraction}">
                                        <td rowspan="2" style="font-size: 8pt">Sub Devices Extraction</td>
                                        <td rowspan="2" style="font-size: 8pt">Sub Devices Extraction
                                            Attachment</td>
                                    </apex:variable>
                                    <td colspan="2" style="font-size: 8pt">Expedite</td>
                                    <td rowspan="2" style="font-size: 8pt">Turnkey Services</td>
                                    <td rowspan="2" style="font-size: 8pt"><br />TurnKey Pre-Alert
                                        Form</td>
                                </apex:variable>
                                <!-- 04292016 - Added by Poulami Starts -->
                                <apex:variable value="" var="v"
                                        rendered="{!IF(AND(OR(mpwResf.Form_Status__c == 'Accepted by MPW Tapeout', mpwResf.Form_Status__c == 'Accepted by CE', mpwResf.Form_Status__c == 'Accepted by Turnkey')), true,false)}">
                                        <td rowspan="2" style="font-size: 8pt;">
                                                MPW Change Request
                                        </td>
                                </apex:variable>
                                <!-- 04292016 - Added by Poulami Ends -->
                            </tr>
                            <tr class="headerRow" align="center">
                                <td style="font-size: 8pt">X(um)</td>
                                <td style="font-size: 8pt">Y(um)</td>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">In Die Form</td>
                                </apex:variable>
                                <td style="font-size: 8pt">In Wafer Form</td>
                                <!-- 01042016 - Added by Poulami Starts -->
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">POR</td>
                                    <td style="font-size: 8pt">FF</td>
                                    <td style="font-size: 8pt">SS</td>
                                    <td style="font-size: 8pt">FS</td>
                                    <td style="font-size: 8pt">SF</td>
                                    <td style="font-size: 8pt">POR</td>
                                    <td style="font-size: 8pt">FF</td>
                                    <td style="font-size: 8pt">SS</td>
                                    <td style="font-size: 8pt">FS</td>
                                    <td style="font-size: 8pt">SF</td>
                                </apex:variable>
                                <!-- 01042016 - Added by Poulami Ends -->
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">In Die Form</td>
                                    <td style="font-size: 8pt">In Wafer Form</td>
                                </apex:variable>
                            </tr>
                            <!--04292016 - Modified by Poulami Starts.-->
                            <apex:repeat value="{!mpwpdchList}" var="mpwpd">
                            <!--04292016 - Modified by Poulami Starts.-->
                                <tr class="datarow" align="center">
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Prime_Die_Name__c}" style="width:65px" /></td>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Drawn_Die_Size_X_um__c}" style="width:60px" /></td>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Drawn_Die_Size_Y_um__c}" style="width:60px" /></td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Delivery_Qty_Die_Form__c}" style="width:70px" /></td>
                                    </apex:variable>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Delivery_Qty_Wafer_Form__c}" style="width:70px" /></td>
                                                                        <apex:variable var="v" value=""
                                                                                rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                                                                <td class="datacell"><apex:outputField value="{!mpwpd.Drawn_Orientation_Restricted_Structures__c}"
                                                                                                style="width:70px" /></td>
                                                                        </apex:variable>
                                                                        <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <!--04072016 - Modified by Poulami Starts.-->
                                        <apex:variable var="v" value=""
                                            rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP' ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                            <td class="datacell"><apex:outputField value="{!mpwpd.Metal_Stack__c}" style="width:70px" /></td>
                                        </apex:variable>
                                        <!--04072016 - Modified by Poulami Ends.-->
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Device_Type__c}" style="width:70px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Corner_Split__c}" style="width:70px" /></td>
                                        <td class="datacell">{!mpwpd.POR__c}</td>
                                        <td class="datacell">{!mpwpd.FF__c}</td>
                                        <td class="datacell">{!mpwpd.SS__c}</td>
                                        <td class="datacell">{!mpwpd.FS__c}</td>
                                        <td class="datacell">{!mpwpd.SF__c}</td>
                                        <!-- 01042016 - Added by Poulami Starts -->
                                        <td class="datacell">{!mpwpd.Wafer_POR__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_FF__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_SS__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_FS__c}</td>
                                        <td class="datacell">{!mpwpd.Wafer_SF__c}</td>
                                        <!-- 01042016 - Added by Poulami Ends -->
                                        <td class="datacell">
                                            <apex:outputLink value="/servlet/servlet.FileDownload?file={!mpwpd.CornerSplitAttachedId__c}"
                                                target="_blank"
                                                rendered="{!IF(AND(mpwpd.Corner_Split__c == 'Yes',mpwpd.CornerSplitAttached__c == true),true,false)}">View</apex:outputLink>
                                            <apex:commandLink value="Attach"
                                                action="/apex/MPWPrimeDieAttachmentVF?MPWPrimeDieID={!mpwpd.Id}&AttachmentType=CornerSplit&initPoint={!initPoint}"
                                                rendered="{!IF(AND(mpwpd.Corner_Split__c == 'Yes',mpwpd.CornerSplitAttached__c == false),true,false)}"
                                                styleClass="actionLink" />
                                        </td>
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!mpwResf.Category__c == 'TD'}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.GMPL_Project_Name__c}" style="width:70px" /></td>
                                    </apex:variable>
                                    <td class="datacell"><apex:outputField value="{!mpwpd.GMPL_Purpose__c}" style="width:70px" /></td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Backgrind__c}" style="width:70px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.ShortLoop_Wafer__c}" style="width:70px" /></td>
                                        <apex:variable var="v" value=""
                                            rendered="{!showSubDeviceExtraction}">
                                            <td class="datacell"><apex:outputField value="{!mpwpd.Sub_Devices_Extraction__c}" style="width:70px" /></td>
                                            <td class="datacell">
                                                <apex:outputLink value="/servlet/servlet.FileDownload?file={!mpwpd.SubDevicesExtractionAttachedId__c}"
                                                    target="_blank"
                                                    rendered="{!IF(AND(mpwpd.Sub_Devices_Extraction__c != '0',mpwpd.SubDevicesExtractionAttached__c == true),true,false)}">View</apex:outputLink>
                                                <apex:commandLink value="Attach"
                                                    action="/apex/MPWPrimeDieAttachmentVF?MPWPrimeDieID={!mpwpd.Id}&AttachmentType=SubDevicesExtraction&initPoint={!initPoint}"
                                                    rendered="{!IF(AND(mpwpd.Sub_Devices_Extraction__c != '0',mpwpd.SubDevicesExtractionAttached__c == false),true,false)}"
                                                    styleClass="actionLink" />
                                            </td>
                                        </apex:variable>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Expedite_In_DIE_Form__c}" style="width:60px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Expedite_In_WAFER_Form__c}" style="width:65px" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Turnkey_Service__c}" style="width:70px" /></td>
                                        <td class="datacell">
                                            <apex:outputLink value="/servlet/servlet.FileDownload?file={!mpwpd.TurnkeyAttachedId__c}"
                                                target="_blank"
                                                rendered="{!IF(AND(mpwpd.Turnkey_Service__c == 'Yes',mpwpd.TurnkeyAttached__c == true),true,false)}">View</apex:outputLink>
                                            <apex:commandLink value="Attach"
                                                action="/apex/MPWPrimeDieAttachmentVF?MPWPrimeDieID={!mpwpd.Id}&AttachmentType=TurnkeyPreAlertForm&initPoint={!initPoint}"
                                                rendered="{!IF(AND(mpwpd.Turnkey_Service__c == 'Yes',mpwpd.TurnkeyAttached__c == false),true,false)}"
                                                styleClass="actionLink" />
                                        </td>
                                    </apex:variable>
                                    <!--04292016 - Added by Poulami Starts.-->
                                    <apex:variable value="" var="v"
                                        rendered="{!IF(AND(OR(mpwResf.Form_Status__c == 'Accepted by MPW Tapeout', mpwResf.Form_Status__c == 'Accepted by CE', mpwResf.Form_Status__c == 'Accepted by Turnkey')), true,false)}">
                                        <td class="datacell">
                                            <apex:outputLink value="/{!$Label.MPWPrimeDieReportId}?pv0={!mpwpd.Name}" target="_blank" rendered="{!IF(mpwpd.MPW_Change_Requests__r.size > 0, true,false)}">View MPW Change Request</apex:outputLink>
                                            <apex:outputText value="" rendered="{!IF(mpwpd.MPW_Change_Requests__r.size <= 0, true,false)}"/>
                                        </td>
                                    </apex:variable>
                                    <!--04292016 - Added by Poulami Ends.-->
                                </tr>
                            </apex:repeat>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>
            
            <!-- Change Functionality -->
            <apex:outputPanel id="changeRequestSection">
                <apex:pageblockSection title="Change Request" collapsible="false" rendered="{!IF(AND(accessMode=='View', isChangeReq != null, isShow = true),true,false)}" columns="2">
                    <apex:outputPanel >
                    <apex:actionRegion >
                    <apex:outputLabel styleClass="labelCol" value="Change Request" />
                    <apex:selectList value="{!selectedChangeOption}" size="1" multiselect="false">
                        <apex:selectOptions value="{!changeReqList}" />
                            <apex:actionSupport event="onchange" action="{!showSelectedChangeReq}" reRender="showSelectedFields,changeRequestSection" status="actStatusId" />
                        </apex:selectList>
                    </apex:actionRegion>
                    </apex:outputPanel>
                    <br/>
                    <apex:outputPanel id="showSelectedFields" rendered="{!isSelectedChangeReqField}">
                        <html>
                            <!-- Drawn Die Size Change -->
                            <apex:variable id="DrawnDie" var="v" value="" rendered="{!IF(selectedChangeOption == 'Drawn Die Size Change',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <td rowspan="2">Prime Die Name</td>
                                        <td colspan="2" style="font-size: 8pt;">Drawn Die Size</td>
                                    </tr>
                                    <tr class="headerRow" align="center">
                                        <td style="font-size: 8pt">X(um)</td>
                                        <td style="font-size: 8pt">Y(um)</td>
                                    </tr>   
                                    <tr class="datarow">
                                            <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                            <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Drawn_Die_Size_X_um__c}"
                                                        style="width:60px" />
                                                </div></td>
                                            <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Drawn_Die_Size_Y_um__c}"
                                                        style="width:60px" />
                                                </div></td>
                                        </tr>
                                    </table>
                            </apex:variable>
                            
                             <!-- Metal Stack Change start-->
                               <apex:outputpanel layout="none" rendered="{!selectedChangeOption == 'Metal Stack Change'}">
                                    <table border="1" class="list" cellspacing="0" cellpadding="0">
                                         <tr class="headerRow" align="center">
                                           <th>Metal Stack</th>
                                         </tr>
                                         <tr>
                                            <td>
                                               <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Metal_Stack__c}" size="1"
                                                    multiselect="false" >
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.metalStackList}" />
                                                </apex:selectList>
                                             </td>
                                         </tr>
                                    
                                    </table>
                               </apex:outputpanel>
                             
                             <!-- Metal Stack Change End-->
                            <!-- Wafer Form Delivery Change -->
                            <apex:variable id="WaferForm" var="v" value="" rendered="{!IF(selectedChangeOption == 'Wafer Form Delivery',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <apex:variable var="v" value="" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <tr class="headerRow" align="center">
                                            <td rowspan="3"><br /> <br />Prime Die Name</td>
                                            <apex:variable var="v" value="" rendered="{!showAddress1}">
                                                <td colspan="2">Address 1</td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress2}">
                                                <td colspan="2">Address 2</td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress3}">
                                                <td colspan="2">Address 3</td>
                                            </apex:variable>
                                        </tr>
                                        <tr class="headerRow" align="center">
                                            <apex:variable var="v" value="" rendered="{!showAddress1}">
                                                <td colspan="2">Quantity Delivery</td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress2}">
                                                <td colspan="2">Quantity Delivery</td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress3}">
                                                <td colspan="2">Quantity Delivery</td>
                                            </apex:variable>
                                        </tr>
                                        <tr class="headerRow" align="center">
                                            <apex:variable var="v" value="" rendered="{!showAddress1}">
                                                <td>In Die Form</td>
                                                <td>In Wafer Form</td>                           
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress2}">
                                                <td>In Die Form</td>
                                                <td>In Wafer Form</td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress3}">
                                                <td>In Die Form</td>
                                                <td>In Wafer Form</td>
                                            </apex:variable>
                                        </tr>
                                        <tr class="datarow">
                                            <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                            <apex:variable var="v" value="" rendered="{!showAddress1}">
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address1_Quantity_Delivery_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityDieFormList1}" />
                                                    </apex:selectList>
                                                    </div></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address1_Quantity_Delivery_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                    </div></td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress2}">
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address2_Quantity_Delivery_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityDieFormList1}" />
                                                    </apex:selectList>
                                                    </div></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address2_Quantity_Delivery_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                    </div></td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress3}">
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address3_Quantity_Delivery_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityDieFormList1}" />
                                                    </apex:selectList>
                                                    </div></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address3_Quantity_Delivery_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                    </div></td>
                                            </apex:variable>
                                        </tr>
                                    </apex:variable>
                                    
                                    <apex:variable var="v" value="" rendered="{!IF(OR(mpwResf.Category__c == 'FAB', mpwResf.Category__c == 'TD'), true, false)}">
                                        <tr class="headerRow" align="center">
                                            <td rowspan="3"><br /> <br />Prime Die Name</td>
                                        </tr>
                                        <tr class="headerRow" align="center">
                                            <td style="font-size: 8pt">Quantity</td>
                                        </tr>
                                        <tr class="headerRow" align="center">
                                            <td style="font-size: 8pt">In Wafer Form</td>
                                        </tr>
                                        <tr class="datarow">
                                            <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                            <td class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Delivery_Qty_Wafer_Form__c}"
                                                        size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                </div></td>
                                        </tr>
                                    </apex:variable>
                                </table>
                            </apex:variable>
                            
                            <!-- Extra Dies/Wafer Re-start -->
                            <apex:variable id="ExtraDies" var="v" value="" rendered="{!IF(selectedChangeOption == 'Extra Dies/Wafer Re-start',true,false)}">
                                <apex:outputLabel styleClass="labelCol" value="Extra Dies / Wafer Re-start:" />
                                <apex:selectList value="{!optionValues}" size="1" multiselect="false" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}">
                                    <apex:selectOptions value="{!diesOption}" />
                                </apex:selectList>
                                <apex:outputLabel value="Extra Dies" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c == '0', true, false)}"></apex:outputLabel>
                                <br />
                                <br />
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <td rowspan="3"><br /> <br />Prime Die Name</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td colspan="2">Address 1</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td colspan="2">Address 2</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td colspan="2">Address 3</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="headerRow" align="center">
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td colspan="2">Quantity Delivery</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td colspan="2">Quantity Delivery</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td colspan="2">Quantity Delivery</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="headerRow" align="center">
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td>In Die Form</td>
                                            <td>In WaferForm</td>                           
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td>In Die Form</td>
                                            <td>In WaferForm</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td>In Die Form</td>
                                            <td>In WaferForm</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="datarow">
                                            <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                            <apex:variable var="v" value="" rendered="{!showAddress1}">
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address1_Quantity_Delivery_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityDieFormList1}" />
                                                    </apex:selectList>
                                                </div></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address1_Quantity_Delivery_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                    <apex:outputField value="{!mpwChangeReqWrapp.mpwChangeReq.Address1_Quantity_Delivery_In_WAFER_Form__c}" style="width:70px" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}"/>
                                                </div></td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress2}">
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address2_Quantity_Delivery_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityDieFormList1}" />
                                                    </apex:selectList>
                                                </div></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address2_Quantity_Delivery_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                    <apex:outputField value="{!mpwChangeReqWrapp.mpwChangeReq.Address2_Quantity_Delivery_In_WAFER_Form__c}" style="width:70px" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}"/>
                                                </div></td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress3}">
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address3_Quantity_Delivery_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityDieFormList1}" />
                                                    </apex:selectList>
                                                </div></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address3_Quantity_Delivery_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.quantityWaferFormList1}" />
                                                    </apex:selectList>
                                                    <apex:outputField value="{!mpwChangeReqWrapp.mpwChangeReq.Address3_Quantity_Delivery_In_WAFER_Form__c}" style="width:70px" rendered="{!IF(mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c != '0', true, false)}"/>
                                                </div></td>
                                            </apex:variable>
                                        </tr>                          
                                </table>
                                <br />
                                <apex:pageBlockSection >                               
                                    <apex:inputField value="{!mpwChangeReq.Remarks__c}" id="remarks"/>
                                </apex:pageBlockSection>
                                <br />
                                <br />
                            </apex:variable>
                            
                            <!-- Corner Split Change -->
                            
                            
                            <apex:variable id="CornerSp" var="v" value="" rendered="{!IF(selectedChangeOption == 'Corner Split Change',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <apex:variable value="" var="v" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td>Prime Die Name</td>
                                            <td>Corner Split</td>
                                            <td>Corner Split Attachment</td>
                                        </apex:variable>
                                    </tr> 
                                     <tr class="datarow"> 
                                        <apex:variable value="" var="v" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">                                   
                                            <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                            
                                            <td class="datacell">
                                                    <!--<apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c}" style="width:60px" />-->
                                                    <apex:outputPanel >
                                                        <apex:actionRegion >
                                                            <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c}" size="1"
                                                            multiselect="false" style="width:87px">
                                                            <apex:selectOptions value="{!mpwChangeReqWrapp.cornerSplitList1}" />
                                                            <apex:actionSupport event="onchange"  reRender="section15,changeRequestSection" status="actStatusId" />
                                                            </apex:selectList>
                                                        </apex:actionRegion>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel id="section15" rendered="{!IF(((mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c == 'Yes' && mpwChangeReqWrapp.mpwChangeReq.Delivery_Qty_Die_Form__c != '0') || (mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c == 'Yes' && mpwChangeReqWrapp.mpwChangeReq.Delivery_Qty_Wafer_Form__c != '0')),true,false)}">
                                                        <table border = "0">
                                                            <tr>
                                                                <apex:variable id="subcornersplit1" var="v" value="" rendered="{!IF((mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c == 'Yes' && mpwChangeReqWrapp.mpwChangeReq.Delivery_Qty_Die_Form__c != '0'),true,false)}">
                                                                <apex:inputHidden value="{!mpwPrimeDieCh.Delivery_Qty_Die_Form__c}" id="dieqty1" />
                                                                    <td>
                                                                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                                                                            <br />
                                                                            <tr>
                                                                                <td colspan="2">In Die Form</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>POR:</td>
                                                                                <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.POR__c}" id="por1"
                                                                                        style="width:70px" onchange="checkCornerSubValues('{!$Component.por1}','{!$Component.dieqty1}');"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>FF:</td>
                                                                                <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.FF__c}" id="ff1"
                                                                                        style="width:70px" onchange="checkCornerSubValues('{!$Component.ff1}','{!$Component.dieqty1}');"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>SS:</td>
                                                                                <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.SS__c}" id="ss1"
                                                                                        style="width:70px" onchange="checkCornerSubValues('{!$Component.ss1}','{!$Component.dieqty1}');"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>FS:</td>
                                                                                <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.FS__c}" id="fs1"
                                                                                        style="width:70px" onchange="checkCornerSubValues('{!$Component.fs1}','{!$Component.dieqty1}');"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>SF:</td>
                                                                                <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.SF__c}" id="sf1"
                                                                                        style="width:70px" onchange="checkCornerSubValues('{!$Component.sf1}','{!$Component.dieqty1}');"/>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </td>
                                                                </apex:variable>
                                                        
                                                                <!-- 01042016 - Added by Poulami Starts -->
                                                                <apex:variable id="subcornersplit9" var="v" value="" rendered="{!IF((mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c == 'Yes' && mpwChangeReqWrapp.mpwChangeReq.Delivery_Qty_Wafer_Form__c != '0'),true,false)}">
                                                                    <apex:inputHidden value="{!mpwPrimeDieCh.Delivery_Qty_Wafer_Form__c}" id="dieqty9" />
                                                                    <td>
                                                                    <table border="1" class="list" cellspacing="0" cellpadding="0">
                                                                        <br />
                                                                        <tr>
                                                                        <td colspan="2">In Wafer Form</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>POR:</td>
                                                                            <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Wafer_POR__c}" id="wpor1"
                                                                                    style="width:70px" onchange="checkWaferCornerSubValues('{!$Component.wpor1}','{!$Component.dieqty9}');" />
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>FF:</td>
                                                                            <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Wafer_FF__c}" id="wff1"
                                                                                    style="width:70px" onchange="checkWaferCornerSubValues('{!$Component.wff1}','{!$Component.dieqty9}');" />
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>SS:</td>
                                                                            <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Wafer_SS__c}" id="wss1"
                                                                                    style="width:70px" onchange="checkWaferCornerSubValues('{!$Component.wss1}','{!$Component.dieqty9}');" />
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>FS:</td>
                                                                            <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Wafer_FS__c}" id="wfs1"
                                                                                    style="width:70px" onchange="checkWaferCornerSubValues('{!$Component.wfs1}','{!$Component.dieqty9}');" />
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>SF:</td>
                                                                            <td><apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Wafer_SF__c}" id="wsf1"
                                                                                    style="width:70px" onchange="checkWaferCornerSubValues('{!$Component.wsf1}','{!$Component.dieqty9}');" />
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                    </td>
                                                                </apex:variable>
                                                            </tr>
                                                        </table>
                                                    </apex:outputPanel>
                                                
                                                    <!-- 01042016 - Added by Poulami Ends -->
                                                
                                            </td>
                                            
                                            <td class="datacell"> 
                                                <apex:outputPanel rendered="{!IF(AND(mpwChangeReqWrapp.mpwChangeReq.Corner_Split__c == 'Yes',mpwChangeReqWrapp.mpwChangeReq.CornerSplitAttached__c == false),true,false)}" >
                                                    <apex:inputFile id="attachment" value="{!filebody1}" filename="{!filename1}" />                                           
                                                </apex:outputPanel>

                                            </td>
                                         </apex:variable>
                                         </tr>
                                </table>
                            </apex:variable>
                            
                            
                            <!-- Short Loop Change -->
                            <apex:variable id="ShortLoop" var="v" value="" rendered="{!IF(selectedChangeOption == 'Short Loop Change',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <td rowspan="2">Prime Die Name</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td>Address 1</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td>Address 2</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td>Address 3</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="headerRow" align="center">
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td>Short Loop Wafer</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td>Short Loop Wafer</td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td>Short Loop Wafer</td>
                                        </apex:variable>
                                    </tr>                                    
                                    <tr class="datarow">
                                            <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                            <apex:variable var="v" value="" rendered="{!showAddress1}">
                                                <td class="datacell"><apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address1_ShortLoop_Wafer__c}" size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.shortLoopList1}" />
                                                </apex:selectList></td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress2}">
                                                <td class="datacell"><apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address2_ShortLoop_Wafer__c}" size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.shortLoopList1}" />
                                                </apex:selectList></td>
                                            </apex:variable>
                                            <apex:variable var="v" value="" rendered="{!showAddress3}">
                                                 <td class="datacell"><apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Address3_ShortLoop_Wafer__c}" size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.shortLoopList1}" />
                                                </apex:selectList></td>
                                            </apex:variable>
                                        </tr>                           
                                </table>
                            </apex:variable>
                            
                            <!-- BackGrind Change -->
                            <apex:variable id="Backgrind" var="v" value="" rendered="{!IF(selectedChangeOption == 'Backgrind Change',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <apex:variable value="" var="v" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td>Prime Die Name</td>
                                            <td>Backgrind</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="datarow">
                                            <apex:variable var="v" value="" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                                <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                                <td class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Backgrind__c}" size="1" multiselect="false" style="width:70px">
                                                        <apex:selectOptions value="{!mpwChangeReqWrapp.backgrindList1}" />
                                                    </apex:selectList>
                                                </div></td>
                                            </apex:variable>                                            
                                        </tr>                             
                                </table>
                            </apex:variable>
                            
                            <!-- Sub Devices Extraction -->
                            <apex:variable id="SubDevices" var="v" value="" rendered="{!IF(selectedChangeOption == 'Sub Devices Extraction',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <apex:variable value="" var="v" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <apex:variable var="v" value="" rendered="{!showSubDeviceExtraction}">
                                                <td>Prime Die Name</td>
                                                <td>Sub Devices Extraction</td>
                                                <td>Sub Devices Extraction Attachment</td>
                                            </apex:variable>
                                        </apex:variable>
                                    </tr>
                                                                        <tr class="datarow">
                                                                                <apex:variable var="v" value=""
                                                                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                                                                        <apex:variable var="v" value=""
                                                                                                rendered="{!showSubDeviceExtraction}">
                                                                                                <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                                                                                <td class="datacell"><apex:actionRegion ><apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Sub_Devices_Extraction__c}"
                                                                                                                size="1" multiselect="false" style="width:70px">
                                                                                                                <apex:selectOptions value="{!mpwChangeReqWrapp.subDeviceExtractionList1}" />
                                                                                                                <apex:actionSupport event="onchange"
                                                                                                                        reRender="changeRequestSection" status="actStatusId" />
                                                                                                        </apex:selectList></apex:actionRegion></td>
                                                                                                <td class="datacell"><apex:inputFile id="attachment"
                                                                                                                value="{!filebody2}" filename="{!filename2}"
                                                                                                                rendered="{!IF(AND(mpwChangeReqWrapp.mpwChangeReq.Sub_Devices_Extraction__c != '0',mpwChangeReqWrapp.mpwChangeReq.SubDevicesExtractionAttached__c == false),true,false)}" />
                                                                                                </td>
                                                                                        </apex:variable>
                                                                                </apex:variable>
                                                                        </tr>
                                                                </table>
                            </apex:variable>
                                                      
                            <!-- Expedite Change -->
                            <apex:variable id="Expedite" var="v" value="" rendered="{!IF(selectedChangeOption == 'Expedite Change',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <apex:variable value="" var="v" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td rowspan="2">Prime Die Name</td>
                                            <td colspan="2">Expedite</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="headerRow" align="center">
                                        <apex:variable var="v" value="" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td style="font-size: 8pt">In Die Form</td>
                                        </apex:variable>
                                        <td style="font-size: 8pt">In Wafer Form</td>
                                    </tr>
                                    <tr class="datarow">
                                            <apex:variable var="v" value="" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">                                           
                                                <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                                <td class="datacell"><apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Expedite_In_DIE_Form__c}" size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.expediteDieFormList1}" />
                                                </apex:selectList></td>
                                                <td class="datacell"><apex:selectList value="{!mpwChangeReqWrapp.mpwChangeReq.Expedite_In_WAFER_Form__c}" size="1" multiselect="false" style="width:70px">
                                                    <apex:selectOptions value="{!mpwChangeReqWrapp.expediteWaferFormList1}" />
                                                </apex:selectList></td>
                                            </apex:variable>                                            
                                        </tr>                             
                                </table>
                            </apex:variable>
                            
                            <!-- Turnkey Services Change-->
                            <apex:variable id="TurnkeySer" var="v" value="" rendered="{!IF(selectedChangeOption == 'Turnkey Services Change',true,false)}">
                                <table border="1" class="list" cellspacing="0" cellpadding="0">
                                    <tr class="headerRow" align="center">
                                        <apex:variable value="" var="v" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                            <td>Prime Die Name</td>
                                            <td>Turnkey Services</td>
                                            <td>Turnkey Services Attachment</td>
                                        </apex:variable>
                                    </tr>
                                    <tr class="datarow">
                                            <apex:variable var="v" value="" rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">                                           
                                                <td class="datacell"><apex:outputText value="{!primeName}" /></td>
                                                <td class="datacell">
                                                <apex:inputField value="{!mpwChangeReqWrapp.mpwChangeReq.Turnkey_Service__c}" style="width:60px" />
                                                </td>
                                                <td class="datacell">  
                                                    <apex:inputFile id="attachment" value="{!filebody3}" filename="{!filename3}" rendered="{!IF(AND(mpwChangeReqWrapp.mpwChangeReq.Turnkey_Service__c == 'Yes',mpwChangeReqWrapp.mpwChangeReq.TurnkeyAttached__c == false),true,false)}"/>
                                                </td>
                                            </apex:variable>                                            
                                        </tr>                           
                                </table>
                            </apex:variable>                           
                        </html>
                        
                        <apex:commandButton value="Submit" action="{!submitReq}" />
                        <apex:commandButton value="Cancel" action="{!cancelReq}"/>
                    </apex:outputPanel>
                </apex:pageblockSection>
            </apex:outputPanel>
                        
                        <apex:outputPanel id="section5">
                <apex:pageblockSection title="Shipping Address" collapsible="false"
                    rendered="{!IF(AND(accessMode=='Edit',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false) && !editCeTurn}"
                    columns="1">
                    <apex:outputPanel id="section55">
                        <apex:outputLabel style="font-style:italic;font-size:9pt;color: red;" rendered="{!IF(mpwResf.Category__c = 'Customer',true,false)}" > 
                            Note:Ensure valid Forwarder name and Account # are provided or risk deliverable delay.
                        </apex:outputLabel>
                        <br />
                        <html>
                            <table cellpadding="2" cellspacing="5">
                                <tr align="center">
                                    <td rowspan="2"></td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td style="font-size: 91%; font-weight: bold;">Address 1</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td style="font-size: 91%; font-weight: bold;">Address 2</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td style="font-size: 91%; font-weight: bold;">Address 3</td>
                                    </apex:variable>
                                </tr>
                                <tr align="center">
                                    <apex:variable var="v" value=""
                                        rendered="{!showAddress1 && (showAddress2 || showAddress3)}">
                                        <td><apex:commandButton value="Delete"
                                                action="{!deleteAddress1}" reRender="section5,section6"
                                                immediate="true" /></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td><apex:commandButton value="Delete"
                                                action="{!deleteAddress2}" reRender="section5,section6"
                                                immediate="true" /></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td><apex:commandButton value="Delete"
                                                action="{!deleteAddress3}" reRender="section5,section6"
                                                immediate="true" /></td>
                                    </apex:variable>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                        align="left">Company Name</td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td class="datacell" align="left"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Company_Name__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td class="datacell" align="left"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Company_Name2__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td class="datacell" align="left"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Company_Name3__c}" />
                                            </div></td>
                                    </apex:variable>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                        align="left">Address</td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Address__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Address2__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Address3__c}" />
                                            </div></td>
                                    </apex:variable>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                        align="left">Postal Code</td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Postal_Code__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Postal_Code2__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Postal_Code3__c}" />
                                            </div></td>
                                    </apex:variable>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                        align="left">Contact Person</td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Contact_Person__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Contact_Person2__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Contact_Person3__c}" />
                                            </div></td>
                                    </apex:variable>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                        align="left">Phone</td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Phone__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Phone2__c}" />
                                            </div></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td align="left" class="datacell"><div class="requiredInput">
                                                <div class="requiredBlock"></div>
                                                <apex:inputField value="{!mpwResf.Phone3__c}" />
                                            </div></td>
                                    </apex:variable>
                                </tr>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <tr>
                                        <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                            align="left">Forwarder Name</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Forwarder_Name1__c}" />
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Forwarder_Name2__c}" />
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Forwarder_Name3__c}" />
                                                </div></td>
                                        </apex:variable>
                                    </tr>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <tr>
                                        <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                            align="left">Forwarder Account#</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Forwarder_Account1__c}" />
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Forwarder_Account2__c}" />
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Forwarder_Account3__c}" />
                                                </div></td>
                                        </apex:variable>
                                    </tr>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <tr>
                                        <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                            align="left">Forwarder Account Type</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwResf.Forwarder_Account_Type1__c}"
                                                        multiselect="false" size="1">
                                                        <apex:selectOptions value="{!forwarderAccountType1}" />
                                                    </apex:selectList>
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwResf.Forwarder_Account_Type2__c}"
                                                        multiselect="false" size="1">
                                                        <apex:selectOptions value="{!forwarderAccountType2}" />
                                                    </apex:selectList>
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:selectList value="{!mpwResf.Forwarder_Account_Type3__c}"
                                                        multiselect="false" size="1">
                                                        <apex:selectOptions value="{!forwarderAccountType3}" />
                                                    </apex:selectList>
                                                </div></td>
                                        </apex:variable>
                                    </tr>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <tr>
                                        <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                            align="left">Registered Company Name of the provided Forwarder
                                            Account</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Registered_Company_Name1__c}" />
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Registered_Company_Name2__c}" />
                                                </div></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="left" class="datacell"><div class="requiredInput">
                                                    <div class="requiredBlock"></div>
                                                    <apex:inputField value="{!mpwResf.Registered_Company_Name3__c}" />
                                                </div></td>
                                        </apex:variable>
                                    </tr>
                                </apex:variable>
                            </table>
                        </html>
                    </apex:outputPanel>
                    <br />
                    <apex:commandButton value="Add Shipping Address"
                        reRender="section5,section6" action="{!addRowToAddress}"
                        immediate="true"
                        rendered="{!IF(OR(showAddress1 == false,showAddress2 == false,showAddress3 == false),true,false)}" status="actStatusId" />
                </apex:pageblockSection>
            </apex:outputPanel>
            
            <!-- Edit Functionality when CE and Turnkey user logged -->
            <apex:pageblockSection id="section5viewCeTurnkey" title="Shipping Address"
                collapsible="false" columns="1"
                rendered="{!IF(AND(accessMode=='Edit',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false) && ! !editCeTurn}">
                <apex:outputPanel >
                    <apex:outputLabel style="font-style:italic;font-size:9pt;color: red;" rendered="{!IF(mpwResf.Category__c = 'Customer',true,false)}" > 
                        Note:Ensure valid Forwarder name and Account # are provided or risk deliverable delay.
                    </apex:outputLabel>
                    <br />
                    <html>
                        <table cellpadding="2" cellspacing="5">
                            <tr align="center">
                                <td></td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 1</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 2</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 3</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Company Name</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td class="datacell" align="center"><apex:outputField value="{!mpwResf.Company_Name__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td class="datacell" align="center"><apex:outputField value="{!mpwResf.Company_Name2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td class="datacell" align="center"><apex:outputField value="{!mpwResf.Company_Name3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Address</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Address__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Address2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Address3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Postal Code</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Postal_Code__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Postal_Code2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Postal_Code3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Contact Person</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Contact_Person__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Contact_Person2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Contact_Person3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Phone</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Phone__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Phone2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Phone3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" 
                                        align="right">Forwarder Name</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Account#</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Account Type</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type2__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Registered Company Name of the provided Forwarder Account</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Registered_Company_Name1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Registered_Company_Name2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                               <apex:outputField value="{!mpwResf.Registered_Company_Name3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>

            <apex:pageblockSection id="section5view" title="Shipping Address"
                collapsible="false" columns="1"
                rendered="{!IF(AND(accessMode=='View',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false)}">
                <apex:outputPanel >
                    <apex:outputLabel style="font-style:italic;font-size:9pt;color: red;" rendered="{!IF(mpwResf.Category__c = 'Customer',true,false)}" > 
                        Note:Ensure valid Forwarder name and Account # are provided or risk deliverable delay.
                    </apex:outputLabel>
                    <br />
                    <html>
                        <table cellpadding="2" cellspacing="5">
                            <tr align="center">
                                <td></td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 1</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 2</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 3</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Company Name</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td class="datacell" align="center"><apex:outputField value="{!mpwResf.Company_Name__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td class="datacell" align="center"><apex:outputField value="{!mpwResf.Company_Name2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td class="datacell" align="center"><apex:outputField value="{!mpwResf.Company_Name3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Address</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Address__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Address2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Address3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Postal Code</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Postal_Code__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Postal_Code2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Postal_Code3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Contact Person</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Contact_Person__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Contact_Person2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Contact_Person3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Phone</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Phone__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Phone2__c}" /></td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell"><apex:outputField value="{!mpwResf.Phone3__c}" /></td>
                                </apex:variable>
                            </tr>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Name</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Account#</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Account Type</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type2__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Registered Company Name of the provided Forwarder Account</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Registered_Company_Name1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Registered_Company_Name2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                               <apex:outputField value="{!mpwResf.Registered_Company_Name3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>
            
            <apex:outputPanel id="section6">
                <apex:pageblockSection title="Shipment Details" collapsible="false"
                    rendered="{!IF(AND(accessMode=='Edit',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false) && !editCeTurn}">
                    <apex:outputPanel >
                        <html>
                            <table border="1" class="list" cellspacing="0" cellpadding="0">
                                <tr class="headerRow" align="center">
                                    <td rowspan="3"><br /> <br />Prime Die Name</td>
                                    
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td colspan="3">Address 1</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td colspan="3">Address 2</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td colspan="3">Address 3</td>
                                    </apex:variable>
                                </tr>
                                <tr class="headerRow" align="center">
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td colspan="2">Quantity Delivery</td>
                                        <td rowspan="2">ShortLoop Wafer</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td colspan="2">Quantity Delivery</td>
                                        <td rowspan="2">ShortLoop Wafer</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td colspan="2">Quantity Delivery</td>
                                        <td rowspan="2">ShortLoop Wafer</td>
                                    </apex:variable>
                                </tr>
                                <tr class="headerRow" align="center">
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td>In Die Form</td>
                                        <td>In WaferForm</td>
                            
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td>In Die Form</td>
                                        <td>In WaferForm</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td>In Die Form</td>
                                        <td>In WaferForm</td>
                                    </apex:variable>
                                </tr>
                                <apex:repeat value="{!mpwPrimeDieList}" var="mpwPrimeDieWrapper1">
                                    <tr class="datarow" align="center">
                                        <td class="datacell"><apex:outputField value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Prime_Die_Name__c}" /></td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td class="datacell"><apex:inputField id="address1dieqty" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address1_Quantity_Delivery_In_DIE_Form__c}"
                                                    style="width:65px" onchange="checkDieQtyValue('{!$Component.address1dieqty}');" /></td>
                                            <td class="datacell"><apex:inputField id="address1waferqty" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address1_Quantity_Delivery_In_WAFER_Form__c}"
                                                    style="width:65px" onchange="checkdecimalvalue('{!$Component.address1waferqty}');" /></td>
                                            <td class="datacell"><apex:inputField id="address1shortloop" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address1_ShortLoop_Wafer__c}"
                                                    style="width:65px" onchange="checkdecimalvalue('{!$Component.address1shortloop}');"/></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td class="datacell"><apex:inputField id="address2dieqty" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address2_Quantity_Delivery_In_DIE_Form__c}"
                                                    style="width:65px" onchange="checkDieQtyValue('{!$Component.address2dieqty}');"/></td>
                                            <td class="datacell"><apex:inputField id="address2waferqty" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address2_Quantity_Delivery_In_WAFER_Form__c}"
                                                    style="width:65px" onchange="checkdecimalvalue('{!$Component.address2waferqty}');"/></td>
                                            <td class="datacell"><apex:inputField id="address2shortloop" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address2_ShortLoop_Wafer__c}"
                                                    style="width:65px" onchange="checkdecimalvalue('{!$Component.address2shortloop}');"/></td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td class="datacell"><apex:inputField id="address3dieqty" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address3_Quantity_Delivery_In_DIE_Form__c}"
                                                    style="width:65px" onchange="checkDieQtyValue('{!$Component.address3dieqty}');"/></td>
                                            <td class="datacell"><apex:inputField id="address3waferqty" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address3_Quantity_Delivery_In_WAFER_Form__c}"
                                                    style="width:65px" onchange="checkdecimalvalue('{!$Component.address3waferqty}');"/></td>
                                            <td class="datacell"><apex:inputField id="address3shortloop" value="{!mpwPrimeDieWrapper1.mpwPrimeDie.Address3_ShortLoop_Wafer__c}"
                                                    style="width:65px" onchange="checkdecimalvalue('{!$Component.address3shortloop}');"/></td>
                                        </apex:variable>
                                    </tr>
                                </apex:repeat>
                            </table>
                        </html>
                    </apex:outputPanel>
                </apex:pageblockSection>
            </apex:outputPanel>
            
            <!-- Edit Functionality for CE and Turnkey User logged -->
            <apex:pageblockSection id="section6viewCeTurnkey" title="Shipment Details"
                collapsible="false"
                rendered="{!IF(AND(accessMode=='Edit',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false) && ! !editCeTurn}">
                <apex:outputPanel >
                    <html>
                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                            <tr class="headerRow" align="center">
                                <td rowspan="3"><br /> <br />Prime Die Name</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td colspan="3">Address 1</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td colspan="3">Address 2</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td colspan="3">Address 3</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                            </tr>
                            <apex:repeat value="{!mpwpdList}" var="mpwpd">
                                <tr class="datarow">
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Prime_Die_Name__c}" /></td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address1_Quantity_Delivery_In_DIE_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address1_Quantity_Delivery_In_WAFER_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address1_ShortLoop_Wafer__c}" /></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address2_Quantity_Delivery_In_DIE_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address2_Quantity_Delivery_In_WAFER_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address2_ShortLoop_Wafer__c}" /></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address3_Quantity_Delivery_In_DIE_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address3_Quantity_Delivery_In_WAFER_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address3_ShortLoop_Wafer__c}" /></td>
                                    </apex:variable>
                                </tr>
                            </apex:repeat>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection> 

            <apex:pageblockSection id="section6view" title="Shipment Details"
                collapsible="false"
                rendered="{!IF(AND(accessMode=='View',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false)}">
                <apex:outputPanel >
                    <html>
                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                            <tr class="headerRow" align="center">
                                <td rowspan="3"><br /> <br />Prime Die Name</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td colspan="3">Address 1</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td colspan="3">Address 2</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td colspan="3">Address 3</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                            </tr>
                            <apex:repeat value="{!mpwpdList}" var="mpwpd">
                                <tr class="datarow">
                                    <td class="datacell"><apex:outputField value="{!mpwpd.Prime_Die_Name__c}" /></td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address1_Quantity_Delivery_In_DIE_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address1_Quantity_Delivery_In_WAFER_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address1_ShortLoop_Wafer__c}" /></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address2_Quantity_Delivery_In_DIE_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address2_Quantity_Delivery_In_WAFER_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address2_ShortLoop_Wafer__c}" /></td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address3_Quantity_Delivery_In_DIE_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address3_Quantity_Delivery_In_WAFER_Form__c}" /></td>
                                        <td class="datacell"><apex:outputField value="{!mpwpd.Address3_ShortLoop_Wafer__c}" /></td>
                                    </apex:variable>
                                </tr>
                            </apex:repeat>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>            
            <!-- , isAllowEditTurnkeySection == true -->
            <apex:outputPanel Id="section7">
                <apex:pageBlockSection title="Shipment Information (Not for customer or requestor to fill in)"
                    collapsible="false"
                    rendered="{!IF(AND(accessMode=='Edit',mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB',mpwResf.Form_Status__c != null, copySearchNumber == null, isExternalUser == false, isAllowEditTurnkeySection == true),true,false)}"
                    columns="1">
                    <apex:pageBlockTable value="{!turnkeyWrap}" var="turnkeyw">
                        <apex:column >
                            <apex:selectList value="{!turnkeyw.selectedmpwpd}"
                                multiselect="true">
                                <apex:selectOptions value="{!turnkeyw.mpwpdsList}" />
                            </apex:selectList>
                            <apex:facet name="header">Prime Die Name</apex:facet>
                        </apex:column>
                        <apex:column >
                            <apex:inputField value="{!turnkeyw.turnkey.Ship_Date__c}" />
                            <apex:facet name="header">{!$ObjectType.MPW_Turnkey__c.fields.Ship_Date__c.label}</apex:facet>
                        </apex:column>
                        <apex:column >
                            <apex:inputField id="wafershipdate"
                                value="{!turnkeyw.turnkey.Wafer_Ship_Date__c}"
                                onchange="setWaferSkeletonDate('{!$Component.wafershipdate}','{!$Component.waferskeletonreturndate}');" />
                            <apex:facet name="header">{!$ObjectType.MPW_Turnkey__c.fields.Wafer_Ship_Date__c.label}</apex:facet>
                        </apex:column>
                        <!--03182016 - Added by Poulami Starts.-->
                        <apex:column >
                            <apex:inputField value="{!turnkeyw.turnkey.Bare_Die_Forecast_Ship_Date__c}" />
                            <apex:facet name="header">{!$ObjectType.MPW_Turnkey__c.fields.Bare_Die_Forecast_Ship_Date__c.label}</apex:facet>
                        </apex:column>
                        <!--03182016 - Added by Poulami Ends.-->
                        <apex:column >
                            <apex:inputField value="{!turnkeyw.turnkey.Expected_Wafer_Skeleton_Return_Date__c}"
                                id="waferskeletonreturndate" />
                            <apex:facet name="header">{!$ObjectType.MPW_Turnkey__c.fields.Expected_Wafer_Skeleton_Return_Date__c.label}</apex:facet>
                        </apex:column>
                        <apex:column >
                            <apex:inputField value="{!turnkeyw.turnkey.Actual_Wafer_Skeleton_Return_Date__c}" />
                            <apex:facet name="header">{!$ObjectType.MPW_Turnkey__c.fields.Actual_Wafer_Skeleton_Return_Date__c.label}</apex:facet>
                        </apex:column>
                        <apex:column >
                            <apex:inputField value="{!turnkeyw.turnkey.AWB__c}" />
                            <apex:facet name="header">{!$ObjectType.MPW_Turnkey__c.fields.AWB__c.label}</apex:facet>
                        </apex:column>
                    </apex:pageBlockTable>
                    <br/>
                    <apex:pageBlockTable value="{!mpwturnkeyList}" var="mpwturnkey" rendered="{!mpwturnkeyList.size > 0}">
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.Prime_Die_Name__c.label}">
                            <apex:outputField value="{!mpwturnkey.Prime_Die_Name__c}" />
                        </apex:column>
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.Ship_Date__c.label}">
                            <apex:inputField value="{!mpwturnkey.Ship_Date__c}"/>
                        </apex:column>
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.Wafer_Ship_Date__c.label}">
                            <apex:inputField value="{!mpwturnkey.Wafer_Ship_Date__c}"/>
                        </apex:column>
                        <!--03182016 - Added by Poulami Starts.-->
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.Bare_Die_Forecast_Ship_Date__c.label}">
                            <apex:inputField value="{!mpwturnkey.Bare_Die_Forecast_Ship_Date__c}"/>
                        </apex:column>
                        <!--03182016 - Added by Poulami Ends.-->
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.Expected_Wafer_Skeleton_Return_Date__c.label}">
                            <apex:inputField value="{!mpwturnkey.Expected_Wafer_Skeleton_Return_Date__c}"/>
                        </apex:column>
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.Actual_Wafer_Skeleton_Return_Date__c.label}">
                            <apex:inputField value="{!mpwturnkey.Actual_Wafer_Skeleton_Return_Date__c}"/>
                        </apex:column>
                        <apex:column headerValue="{!$ObjectType.MPW_Turnkey__c.fields.AWB__c.label}">
                            <apex:inputField value="{!mpwturnkey.AWB__c}"/>
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
                <!-- OR(accessMode=='View',AND(accessMode=='Edit', isAllowEditTurnkeySection == false)) -->
                <apex:pageBlockSection id="section7view"
                    title="Shipment Information (Not for customer or requestor to fill in)"
                    collapsible="false"
                    rendered="{!IF(AND(OR(accessMode=='View',AND(accessMode=='Edit', isAllowEditTurnkeySection == false)),mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false)}"
                    columns="1">
                    <apex:pageBlockTable value="{!mpwturnkeyList}" var="mpwturnkey" rendered="{!mpwturnkeyList.size > 0}">
                        <apex:column value="{!mpwturnkey.Prime_Die_Name__c}"/>
                        <apex:column value="{!mpwturnkey.Ship_Date__c}"/>
                        <apex:column value="{!mpwturnkey.Wafer_Ship_Date__c}"/>
                        <!--03182016 - Added by Poulami Starts.-->
                        <apex:column value="{!mpwturnkey.Bare_Die_Forecast_Ship_Date__c}"/>
                        <!--03182016 - Added by Poulami Ends.-->
                        <apex:column value="{!mpwturnkey.Expected_Wafer_Skeleton_Return_Date__c}"/>
                        <apex:column value="{!mpwturnkey.Actual_Wafer_Skeleton_Return_Date__c}"/>
                        <apex:column value="{!mpwturnkey.AWB__c}"/>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section8">
                <apex:pageBlockSection title="Customer Information"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer' && accessMode == 'Edit' && !editAddDet}">
                    <apex:inputField value="{!mpwResf.Customer_Name__c}" />
                    <apex:inputField value="{!mpwResf.Customer_Email__c}" />
                    <apex:inputField value="{!mpwResf.Customer_Phone__c}" />
                </apex:pageBlockSection>

                <apex:pageBlockSection title="Customer Information"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer' && accessMode == 'View'}">
                    <apex:outputField value="{!mpwResf.Customer_Name__c}" />
                    <apex:outputField value="{!mpwResf.Customer_Email__c}" />
                    <apex:outputField value="{!mpwResf.Customer_Phone__c}" />
                </apex:pageBlockSection>
                
                <!-- Edit Functionality when the Status is Accepted -->
                <apex:pageBlockSection title="Customer Information"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer' && accessMode == 'Edit' && ! !editAddDet}">
                    <apex:outputField value="{!mpwResf.Customer_Name__c}" />
                    <apex:outputField value="{!mpwResf.Customer_Email__c}" />
                    <apex:outputField value="{!mpwResf.Customer_Phone__c}" />
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section9">
                <apex:pageBlockSection title="GLOBALFOUNDRIES FAE"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:pageBlockTable value="{!feList}" var="fe">
                        <apex:column >
                            <apex:outputField value="{!fe.User__c}" />
                            <apex:facet name="header">Name</apex:facet>
                        </apex:column>
                        <apex:column headerValue="Email">{!fe.User_Email__c}</apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section10">
                <apex:pageBlockSection title="GLOBALFOUNDRIES Account Manager Information"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:pageBlockTable value="{!amList}" var="am">
                        <apex:column >
                            <apex:outputField value="{!am.User__c}" />
                            <apex:facet name="header">Name</apex:facet>
                        </apex:column>
                        <apex:column headerValue="Email">{!am.User_Email__c}</apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section11">
                <apex:pageBlockSection title="GLOBALFOUNDRIES Customer Sales Rep."
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:pageBlockTable value="{!csrList}" var="csr">
                        <apex:column >
                            <apex:outputField value="{!csr.User__c}" />
                            <apex:facet name="header">Name</apex:facet>
                        </apex:column>
                        <apex:column headerValue="Email">{!csr.User_Email__c}</apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section12">
                <apex:pageblockSection title="Requestor Information"
                    collapsible="false" rendered="{!mpwResf.Category__c != 'Customer'}">
                    <apex:inputfield value="{!mpwResf.Requestor_Name__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && !editAddDet}" />
                    <apex:outputfield value="{!mpwResf.Requestor_Name__c}"
                        rendered="{!IF(accessMode=='View',true,false)}" />
                    <apex:inputfield value="{!mpwResf.Requestor_Email__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && !editAddDet}" />
                    <apex:outputfield value="{!mpwResf.Requestor_Email__c}"
                        rendered="{!IF(accessMode=='View',true,false)}" />
                    
                    <!-- Edit Functionality when the Status is Accepted -->         
                    <apex:outputfield value="{!mpwResf.Requestor_Email__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && ! !editAddDet}" />
                    <apex:outputfield value="{!mpwResf.Requestor_Name__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && ! !editAddDet}" />
                </apex:pageblockSection>
            </apex:outputPanel>

            <apex:outputPanel id="section13">
                <apex:pageblockSection title="Supervisor Information"
                    collapsible="false" rendered="{!mpwResf.Category__c != 'Customer'}">
                    <apex:inputfield value="{!mpwResf.Supervisor_Name__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && !editAddDet}" />
                    <apex:outputfield value="{!mpwResf.Supervisor_Name__c}"
                        rendered="{!IF(accessMode=='View',true,false)}" />
                    <apex:inputfield value="{!mpwResf.Supervisor_Email__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && !editAddDet}" />
                    <apex:outputfield value="{!mpwResf.Supervisor_Email__c}"
                        rendered="{!IF(accessMode=='View',true,false)}" />
                        
                    <!-- Edit Functionality when the Status is Accepted -->
                    <apex:outputfield value="{!mpwResf.Supervisor_Name__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && ! !editAddDet}" />
                    <apex:outputfield value="{!mpwResf.Supervisor_Email__c}"
                        rendered="{!IF(accessMode=='Edit',true,false) && ! !editAddDet}" />
                </apex:pageblockSection>
            </apex:outputPanel>

            <br />
            <br />
            
            <apex:pageBlock id="formnotes">
                <apex:pageBlockTable columns="1" id="formNotesList"
                    value="{!listFormNotes}" var="n"
                    rendered="{!IF(OR(listFormNotes.size == null,listFormNotes.size > 0), true, false)}">
                    <apex:column value="{!n.Value__c}">
                        <apex:facet name="header">Terms and Conditions</apex:facet>
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlock>


            <br />
            <br />
            <apex:outputPanel id="agreement"
                rendered="{!IF(accessMode=='Edit',true,false)}">
                <apex:inputCheckbox value="{!agree}"
                    rendered="{!IF(accessMode == 'Edit', true, false)}" >
                    <apex:actionSupport event="onchange" rerender="oppbtntop, oppbtnbottom" status="actStatusId"  />
                </apex:inputCheckbox>
                <apex:outputLabel value="I Agree with the terms and conditions."
                    rendered="{!IF(accessMode == 'Edit', true, false)}" />
                <br />
                <br />
            </apex:outputPanel>

            <apex:outputPanel id="section14">
                <apex:pageBlockSection title="Legacy Audit Trail" rendered="{!mpwResf.Legacy_Form_Audit_Trials__c != null}" columns="1" collapsible="false">
                    <apex:outputField value="{!mpwResf.Legacy_Form_Audit_Trials__c}" />
                </apex:pageBlockSection>
            </apex:outputPanel>

        </apex:pageBlock>

        <apex:pageBlock id="previewblock" mode="detail" rendered="{!preview}">

            <apex:pageblockButtons location="both" id="buttonset">
                <apex:commandButton value="Save as Draft" action="{!saveAsDraft}" rendered="{!IF(mpwResf.Form_Status__c == null,true,false)}" />
                <apex:commandButton value="Save" action="{!saveAsDraft}" rendered="{!IF(mpwResf.Form_Status__c != null,true,false)}" />
                <apex:commandButton value="Back" action="{!exitPreview}"
                    immediate="true" />
            </apex:pageblockButtons>

            <apex:pageBlockSection id="previewsection1"
                title="MPW Train Selection" collapsible="false" columns="1"
                rendered="{!IF(AND(initPoint=='devices',accessMode == 'View'),true,false)}">
                <apex:outputField value="{!mpwResf.MPW_Train_Name__c}" />
            </apex:pageBlockSection>

            <apex:pageblockSection id="previewsection2"
                title="Reservation Form Information" collapsible="false" columns="1">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Name.label}" />
                    <apex:outputField value="{!mpwtm.Name}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Reservation_Close_Date__c.label}" />
                    <apex:outputField value="{!mpwtm.Reservation_Close_Date__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Tapeout_Date_Other_Participant__c.label}*" />
                    <apex:outputField value="{!mpwtm.Tapeout_Date_Other_Participant__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$ObjectType.MPW_Train_Maintenance__c.fields.Tapeout_Date_Customer__c.label}*" />
                        <apex:outputField value="{!mpwtm.Tapeout_Date_Customer__c}" />
                    </apex:pageBlockSectionItem>
                <br />
            </apex:pageblockSection>

            <apex:panelGrid id="previewcategory" columns="4"
                style="width:50%;margin-left:15px;">
                <apex:panelGroup >
                    <apex:outputLabel styleClass="labelCol" value="Category" />
                    <apex:outputField value="{!mpwResf.Category__c}" />
                </apex:panelGroup>
                <apex:panelGroup rendered="{!mpwResf.Category__c != 'TD' && mpwResf.Category__c != 'Customer'}">
                    <apex:outputLabel styleClass="labelCol" value="Sub Category" />
                    <apex:outputField value="{!mpwResf.Sub_Category__c}"
                        rendered="{!mpwResf.Category__c != 'TD' && mpwResf.Category__c != 'FAB' && mpwResf.Category__c != 'Customer'}" />
                    <apex:outputText value="{!mpwtm.Geometry__c}"
                        rendered="{!mpwResf.Category__c == 'FAB'}" />
                </apex:panelGroup>
                <!--04072016 - Modified by Poulami Starts.-->
                <apex:panelGroup rendered="{!mpwResf.Category__c != 'Customer'}">
                    <apex:outputLabel styleClass="labelCol" value="Usage" />
                    <apex:outputField value="{!mpwResf.Usage__c}"
                        rendered="{!mpwResf.Category__c != 'DE' && mpwResf.Category__c != 'IP' && mpwResf.Category__c != 'Lighting' && mpwResf.Category__c != 'Customer' && mpwResf.Category__c != 'ASIC R&D' && mpwResf.Category__c != 'RF_ASIC_A&D Protos'}" />
                    <apex:outputText value="Required"
                        rendered="{!mpwResf.Category__c == 'DE' || mpwResf.Category__c == 'IP' ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}" />
                </apex:panelGroup>
                <apex:panelGroup rendered="{!mpwResf.Category__c == 'TD' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}">
                    <apex:outputLabel styleClass="labelCol" value="PA Code" />
                    <apex:outputField value="{!mpwResf.PA_Code__c}"
                        rendered="{!(mpwResf.Category__c == 'TD' && mpwResf.Usage__c == 'Required') || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos'}" />
                    <apex:outputText value="For Opportunistic Usage"
                        rendered="{!mpwResf.Category__c == 'TD' && mpwResf.Usage__c == 'Opportunistic'}" />
                </apex:panelGroup>
                <!--04072016 - Modified by Poulami Ends.-->
            </apex:panelGrid>
            <br />
            <apex:panelGrid id="previewaccountinfo" columns="2"
                style="width:50%;margin-left:15px;" >
                <apex:panelGroup >
                    <apex:outputLabel value="Company Name" styleClass="labelCol" />
                    <apex:outputText value="{!selectedAccountName}" />
                </apex:panelGroup>
            </apex:panelGrid>

                        <apex:panelGrid id="previewassociateddevice"
                                columns="1" style="width:80%;margin-left:21px;">
                                <apex:panelGroup >
                                        <apex:outputLabel value="Device" styleClass="labelCol" />
                                        <apex:outputField value="{!mpwResf.Device__c}" />
                                </apex:panelGroup>
                                <br/>
                                <apex:panelGroup >
                                        <apex:outputLabel value="Sales Order Number" styleClass="labelCol" />
                                        <apex:outputField value="{!mpwResf.Sales_Order__c}" />
                                </apex:panelGroup>
                        </apex:panelGrid>
                        
                        <apex:pageBlockSection id="previewsection3"
                title="Process Information" collapsible="false">
              <apex:panelGrid >
                 <apex:panelGroup >
                          <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                             Note: Final lot run will be based on process details registered in Configurator/CDRS
                          </apex:outputLabel>
                         <br/>  <br/>
                       </apex:panelGroup>
                    <apex:panelGroup >
                        <apex:outputText value="Process" styleClass="labelCol" />
                        <apex:outputText value="{!selectedProcessTypeName}" />
                    </apex:panelGroup>
                </apex:panelGrid>
                <br />
                <br />
                <apex:pageblockTable value="{!MPWTrainMaintenanceDetailList}"
                    var="s"
                    rendered="{!IF(AND(MPWTrainMaintenanceDetailList.size > 0,accessMode == 'Edit'), true, false)}">
                    <apex:column value="{!s.question}">
                        <apex:facet name="header">Question</apex:facet>
                    </apex:column>
                    <apex:column >{!s.answer}
                        <apex:facet name="header">Answer</apex:facet>
                        <apex:pageBlockTable value="{!s.sqwList}" var="ss"
                            rendered="{!IF(AND(CONTAINS(s.question,'Do you need SRAM'),s.answer == 'Yes'),true,false)}"
                            style="width: 380px">
                            <apex:column rendered="{!ss.selected}">{!ss.name}</apex:column>
                            <apex:column rendered="{!ss.selected}" />
                            <apex:column rendered="{!ss.selected}">SRAM Array total block size (in MB)</apex:column>
                            <apex:column rendered="{!ss.selected}">{!ss.mpwSRAMQues.Answer__c}</apex:column>
                        </apex:pageBlockTable>
                    </apex:column>
                </apex:pageblockTable>
            </apex:pageBlockSection>

            <apex:pageblockSection id="previewsection4" title="Chip Information"
                collapsible="false" columns="1">
                <apex:outputPanel layout="block">
                    <apex:outputLabel style="font-style:italic;font-size:8pt;"> 
                        For wafer delivery, backgrind is not applicable.<br />
                        Each chip requires a chip identification at the left bottom corner of the die on the gate, metal 1 and top metal.
                    </apex:outputLabel>
                    <br />
                    <br />
                    <html>
                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                            <tr class="headerRow" align="center">
                                <td rowspan="2" style="font-size: 8pt;">Prime Die Name</td>
                                <td colspan="2" style="font-size: 8pt">Drawn Die Size</td>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td colspan="2" style="font-size: 8pt">Quantity</td>
                                </apex:variable>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(OR(mpwResf.Category__c == 'FAB', mpwResf.Category__c == 'TD'), true, false)}">
                                    <td style="font-size: 8pt">Quantity</td>
                                </apex:variable>
                                                                <apex:variable var="v" value=""
                                                                        rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                                                        <td rowspan="2" style="font-size: 8pt">Drawn Orientation
                                                                                Restricted Structures</td>
                                                                </apex:variable>
                                                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <!--04072016 - Modified by Poulami Starts.-->
                                    <apex:variable var="v" value=""
                                        rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP' ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                        <td rowspan="2" style="font-size: 8pt">Metal Stack</td>
                                    </apex:variable>
                                    <!--04072016 - Modified by Poulami Ends.-->
                                    <td rowspan="2" style="font-size: 8pt;">Device Type</td>
                                    <td rowspan="2" style="font-size: 8pt">Corner Split</td>
                                    <!-- 01042016 - Added by Poulami Starts -->
                                    <td colspan="5" style="font-size: 8pt">In Die Form <br />(multiple of 50 dies)</td>
                                    <td colspan="5" style="font-size: 8pt">In Wafer Form <br />(multiple of 1 wafer)</td>
                                    <!-- 01042016 - Added by Poulami Ends -->
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'TD'}">
                                    <td rowspan="2" style="font-size: 8pt">GMPL Project Name</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c == 'Customer'}">
                                    <td rowspan="2" style="font-size: 8pt">Remarks</td>
                                </apex:variable>
                                <apex:variable value="" var="v"
                                    rendered="{!mpwResf.Category__c != 'Customer'}">
                                    <td rowspan="2" style="font-size: 8pt">GMPL Purpose/Remarks</td>
                                </apex:variable>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td rowspan="2" style="font-size: 8pt">BackGrind</td>
                                    <td rowspan="2" style="font-size: 8pt">Short Loop Wafer</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!showSubDeviceExtraction}">
                                        <td rowspan="2" style="font-size: 8pt">Sub Devices Extraction</td>
                                    </apex:variable>
                                    <td colspan="2" style="font-size: 8pt">Expedite</td>
                                    <td rowspan="2" style="font-size: 8pt">Turnkey Services</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <td style="font-size: 8pt">X(um)</td>
                                <td style="font-size: 8pt">Y(um)</td>
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">In Die Form</td>
                                </apex:variable>
                                <td style="font-size: 8pt">In Wafer Form</td>
                                <!-- 01042016 - Added by Poulami Starts -->
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">POR</td>
                                    <td style="font-size: 8pt">FF</td>
                                    <td style="font-size: 8pt">SS</td>
                                    <td style="font-size: 8pt">FS</td>
                                    <td style="font-size: 8pt">SF</td>
                                    <td style="font-size: 8pt">POR</td>
                                    <td style="font-size: 8pt">FF</td>
                                    <td style="font-size: 8pt">SS</td>
                                    <td style="font-size: 8pt">FS</td>
                                    <td style="font-size: 8pt">SF</td>
                                </apex:variable>
                                <!-- 01042016 - Added by Poulami Ends -->
                                <apex:variable var="v" value=""
                                    rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                    <td style="font-size: 8pt">In Die Form</td>
                                    <td style="font-size: 8pt">In Wafer Form</td>
                                </apex:variable>
                            </tr>
                            <apex:repeat value="{!PrimeDieWrapperList}" var="mpwPrimeDieWrapper">
                                <tr class="datarow">
                                    <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Prime_Die_Name__c}</td>
                                    <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Drawn_Die_Size_X_um__c}</td>
                                    <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Drawn_Die_Size_Y_um__c}</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Die_Form__c}</td>
                                    </apex:variable>
                                    <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Delivery_Qty_Wafer_Form__c}</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!(mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '40nm')}">
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Drawn_Orientation_Restricted_Structures__c}</td>
                                    </apex:variable>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <!--04072016 - Modified by Poulami Starts.-->
                                        <apex:variable var="v" value=""
                                            rendered="{!(mpwtm.Geometry__c == '22nm' || mpwtm.Geometry__c == '28nm' || mpwtm.Geometry__c == '14nm' || mpwtm.Geometry__c == '12/14nm' || mpwtm.Geometry__c == '7nm') && (mpwResf.Category__c == 'IP' ||  mpwResf.Category__c == 'Lighting' || mpwResf.Category__c == 'Customer' || mpwResf.Category__c == 'ASIC R&D' || mpwResf.Category__c == 'RF_ASIC_A&D Protos')}">
                                            <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Metal_Stack__c}</td>
                                        </apex:variable>
                                        <!--04072016 - Modified by Poulami Ends.-->
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Device_Type__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Corner_Split__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.POR__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.FF__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.SS__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.FS__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.SF__c}</td>
                                        <!-- 01042016 - Added by Poulami Starts -->
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_POR__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_FF__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_SS__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_FS__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Wafer_SF__c}</td>
                                        <!-- 01042016 - Added by Poulami Ends -->
                                    </apex:variable>
                                    <apex:variable value="" var="v"
                                        rendered="{!mpwResf.Category__c == 'TD'}">
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.GMPL_Project_Name_Text__c}</td>
                                    </apex:variable>
                                    <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.GMPL_Purpose__c}</td>
                                    <apex:variable var="v" value=""
                                        rendered="{!IF(AND(mpwResf.Category__c != 'FAB', mpwResf.Category__c != 'TD'), true, false)}">
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Backgrind__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.ShortLoop_Wafer__c}</td>
                                        <apex:variable var="v" value=""
                                            rendered="{!showSubDeviceExtraction}">
                                            <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Sub_Devices_Extraction__c}</td>
                                        </apex:variable>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Expedite_In_DIE_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Expedite_In_WAFER_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper.mpwPrimeDie.Turnkey_Service__c}</td>
                                    </apex:variable>
                                </tr>
                            </apex:repeat>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>

            <apex:pageblockSection id="previewsection5" title="Shipping Address"
                collapsible="false" columns="1"
                rendered="{!IF(AND(mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false)}">
                <apex:outputPanel >
                    <apex:outputLabel style="font-style:italic;font-size:9pt;color: red;" rendered="{!IF(mpwResf.Category__c = 'Customer',true,false)}" > 
                        Note:Ensure valid Forwarder name and Account # are provided or risk deliverable delay.
                    </apex:outputLabel>
                    <br />
                    <html>
                        <table cellpadding="2" cellspacing="5">
                            <tr align="center">
                                <td></td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 1</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 2</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td style="font-size: 91%; font-weight: bold;">Address 3</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Company Name</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td class="datacell" align="center">{!mpwResf.Company_Name__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td class="datacell" align="center">{!mpwResf.Company_Name2__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td class="datacell" align="center">{!mpwResf.Company_Name3__c}</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Address</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell">{!mpwResf.Address__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell">{!mpwResf.Address2__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell">{!mpwResf.Address3__c}</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Postal Code</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell">{!mpwResf.Postal_Code__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell">{!mpwResf.Postal_Code2__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell">{!mpwResf.Postal_Code3__c}</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Contact Person</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell">{!mpwResf.Contact_Person__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell">{!mpwResf.Contact_Person2__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell">{!mpwResf.Contact_Person3__c}</td>
                                </apex:variable>
                            </tr>
                            <tr>
                                <td style="white-space: nowrap; font-size: 91%; font-weight: bold;"
                                    align="right">Phone</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td align="center" class="datacell">{!mpwResf.Phone__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td align="center" class="datacell">{!mpwResf.Phone2__c}</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td align="center" class="datacell">{!mpwResf.Phone3__c}</td>
                                </apex:variable>
                            </tr>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Name</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Name3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Account#</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Forwarder Account Type</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Forwarder_Account_Type2__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                            <apex:variable value="" var="v" rendered="{!mpwResf.Category__c == 'Customer'}">
                                <tr>
                                    <td style="white-space: nowrap; font-size: 91%; font-weight: bold;" align="right">Registered Company Name of the provided Forwarder Account</td>
                                        <apex:variable var="v" value="" rendered="{!showAddress1}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Registered_Company_Name1__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress2}">
                                            <td align="center" class="datacell">
                                                <apex:outputField value="{!mpwResf.Registered_Company_Name2__c}" />
                                            </td>
                                        </apex:variable>
                                        <apex:variable var="v" value="" rendered="{!showAddress3}">
                                            <td align="center" class="datacell">
                                               <apex:outputField value="{!mpwResf.Registered_Company_Name3__c}" />
                                            </td>
                                        </apex:variable>
                                </tr>
                            </apex:variable>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>

            <apex:pageblockSection id="previewsection6" title="Shipment Details"
                collapsible="false"
                rendered="{!IF(AND(mpwResf.Category__c != 'TD',mpwResf.Category__c != 'FAB'),true,false)}">
                <apex:outputPanel >
                    <html>
                        <table border="1" class="list" cellspacing="0" cellpadding="0">
                            <tr class="headerRow" align="center">
                                <td rowspan="3">Prime Die Name</td>
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td colspan="3">Address 1</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td colspan="3">Address 2</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td colspan="3">Address 3</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td colspan="2">Quantity Delivery</td>
                                    <td rowspan="2">ShortLoop Wafer</td>
                                </apex:variable>
                            </tr>
                            <tr class="headerRow" align="center">
                                <apex:variable var="v" value="" rendered="{!showAddress1}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress2}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                                <apex:variable var="v" value="" rendered="{!showAddress3}">
                                    <td>In Die Form</td>
                                    <td>In WaferForm</td>
                                </apex:variable>
                            </tr>
                            <apex:repeat value="{!mpwPrimeDieList}" var="mpwPrimeDieWrapper1">
                                <tr class="datarow" align="center">
                                    <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Prime_Die_Name__c}</td>
                                    <apex:variable var="v" value="" rendered="{!showAddress1}">
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address1_Quantity_Delivery_In_DIE_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address1_Quantity_Delivery_In_WAFER_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address1_ShortLoop_Wafer__c}</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress2}">
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address2_Quantity_Delivery_In_DIE_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address2_Quantity_Delivery_In_WAFER_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address2_ShortLoop_Wafer__c}</td>
                                    </apex:variable>
                                    <apex:variable var="v" value="" rendered="{!showAddress3}">
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address3_Quantity_Delivery_In_DIE_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address3_Quantity_Delivery_In_WAFER_Form__c}</td>
                                        <td class="datacell">{!mpwPrimeDieWrapper1.mpwPrimeDie.Address3_ShortLoop_Wafer__c}</td>
                                    </apex:variable>
                                </tr>
                            </apex:repeat>
                        </table>
                    </html>
                </apex:outputPanel>
            </apex:pageblockSection>

            <apex:outputPanel id="previewsection8">
                <apex:pageBlockSection title="Customer Information"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:outputField value="{!mpwResf.Customer_Name__c}" />
                    <apex:outputField value="{!mpwResf.Customer_Email__c}" />
                    <apex:outputField value="{!mpwResf.Customer_Phone__c}" />
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="previewsection9">
                <apex:pageBlockSection title="GLOBALFOUNDRIES FAE"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:pageBlockTable value="{!feList}" var="fe">
                        <apex:column >
                            <apex:outputField value="{!fe.User__c}" />
                            <apex:facet name="header">Name</apex:facet>
                        </apex:column>
                        <apex:column headerValue="Email">{!fe.User_Email__c}</apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="previewsection10">
                <apex:pageBlockSection title="GLOBALFOUNDRIES Account Manager"
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:pageBlockTable value="{!amList}" var="am">
                        <apex:column >
                            <apex:outputField value="{!am.User__c}" />
                            <apex:facet name="header">Name</apex:facet>
                        </apex:column>
                        <apex:column headerValue="Email">{!am.User_Email__c}</apex:column>
                    </apex:pageBlockTable>
                    <apex:outputField value="{!mpwResf.AM_Name__c}" />
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:outputPanel id="previewsection11">
                <apex:pageBlockSection title="GLOBALFOUNDRIES Customer Sales Rep."
                    collapsible="false" columns="2"
                    rendered="{!mpwResf.Category__c == 'Customer'}">
                    <apex:pageBlockTable value="{!csrList}" var="csr">
                        <apex:column >
                            <apex:outputField value="{!csr.User__c}" />
                            <apex:facet name="header">Name</apex:facet>
                        </apex:column>
                        <apex:column headerValue="Email">{!csr.User_Email__c}</apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:outputPanel>

            <apex:pageblockSection id="previewsection12"
                title="Requestor Information" collapsible="false"
                rendered="{!mpwResf.Category__c != 'Customer'}">
                <apex:outputfield value="{!mpwResf.Requestor_Name__c}" />
                <apex:outputfield value="{!mpwResf.Requestor_Email__c}" />
            </apex:pageblockSection>

            <apex:pageblockSection id="previewsection13"
                title="Supervisor Information" collapsible="false"
                rendered="{!mpwResf.Category__c != 'Customer'}">
                <apex:outputfield value="{!mpwResf.Supervisor_Name__c}" />
                <apex:outputfield value="{!mpwResf.Supervisor_Email__c}" />
            </apex:pageblockSection>

            <apex:pageBlockSection collapsible="false" columns="1"
                title="Form Notes">
                <apex:pageBlockTable columns="1" id="formNotesList"
                    value="{!listFormNotes}" var="n"
                    rendered="{!IF(OR(listFormNotes.size == null,listFormNotes.size > 0), true, false)}">
                    <apex:column value="{!n.Value__c}" />
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            <br />
            <br />
            
            <apex:outputPanel id="previewsection14">
                <apex:pageBlockSection title="Legacy Audit Trail" rendered="{!mpwResf.Legacy_Form_Audit_Trials__c != null}" columns="1" collapsible="false">
                    <apex:outputField value="{!mpwResf.Legacy_Form_Audit_Trials__c}" />
                </apex:pageBlockSection>
            </apex:outputPanel>

        </apex:pageBlock>
        
        <apex:pageblock title="MPW Change Request" rendered="{!IF(AND(OR(mpwResf.Form_Status__c == 'Accepted by MPW Tapeout', mpwResf.Form_Status__c == 'Accepted by CE', mpwResf.Form_Status__c == 'Accepted by Turnkey')), true,false)}">            
            
            <apex:pageblockSection collapsible="false" columns="1">
                <apex:pageBlockTable id="changeRequestList" value="{!ChangeRequestsRecords}" var="chReq" rendered="{!IF(OR(mpwListChangeReq.size == null,mpwListChangeReq.size > 0), true, false)}">
                    <apex:column >
                        <apex:facet name="header">
                            Name
                        </apex:facet>
                        <apex:outputLink value="/apex/MPWChangeRequestViewVF?id={!chReq.Id}" styleClass="link1">{!chReq.Name}</apex:outputLink>
                    </apex:column>
                    <apex:column value="{!chReq.MPW_Prime_Die__r.Prime_Die_Name__c}" />
                    <!--<apex:column value="{!chReq.Request_Type__c}" /> -->
                      <apex:column headerValue="Request Type">
                       <apex:outputText value="{!IF(chReq.Request_Type__c=='Wafer Form Delivery','Quantity Change',chReq.Request_Type__c)}"/>
                    </apex:column>
                    <apex:column value="{!chReq.Status__c}" />
                    <apex:column value="{!chReq.CreatedBy.Name}">
                        <apex:facet name="header">Created By</apex:facet>
                    </apex:column>
                    <apex:column value="{!chReq.CreatedDate}" />
                </apex:pageBlockTable>
                 <br/>
                <apex:outputText value="No Change Requests." rendered="{!IF(mpwListChangeReq.size <= 0, true, false)}" />
            </apex:pageblockSection>
        </apex:pageblock>
    </apex:form>
    
    <apex:relatedList list="ProcessSteps" rendered="{!IF(AND(accessMode='View', showApprovalHistory == true), true, false)}" />
    <apex:outputPanel id="historySectionId" rendered="{!IF($CurrentPage.parameters.id!=null,true,false)}">
                <c:GenericHistoryComponent Object="{!MPW_Reservation__c}" Limit="20"/>
            </apex:outputPanel> 

</apex:page>