<apex:page standardController="Work_Order__c" extensions="WorkOrderLotDetails" action="{!getLotDetails}">
  <apex:form >
  <apex:pageBlock title="Work Order Lot" id="woltableblock">
      <apex:variable value="{!0}" var="rn"/>
      <!--<apex:pageBlockSection >-->
        
        <apex:pageBlockTable value="{!wolw}" var="rl" id="woltable" title="Work Order Lot">
            
            <apex:column title="Rework Lot Numbers" style="width:50px" headerValue="Rework Lot #" >
                <apex:inputText value="{!rl.reworkLot}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_ZONE_88, TRUE, FALSE)}" />
                <apex:outputText value="{!rl.reworkLot}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_ZONE_88, FALSE, TRUE)}" />              
            </apex:column>
            <apex:column title="Original Lot Numbers" style="width:50px" headerValue="Original Lot #" >
                <apex:inputText value="{!rl.OriginalLot}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, TRUE, FALSE)}" />     
                <apex:outputText value="{!rl.OriginalLot}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, FALSE, TRUE)}" />     
            </apex:column>
            <apex:column title="Qual Code" style="width:50px" headerValue="Qual Code" >
                <apex:inputText value="{!rl.qualCode}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, TRUE, FALSE)}" />     
                <apex:outputText value="{!rl.qualCode}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, FALSE, TRUE)}" />     
            </apex:column>
            <apex:column title="Lot Qty" style="width:50px" headerValue="Lot Qty" >
                <apex:inputText value="{!rl.lotQty}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, TRUE, FALSE)}" />     
                <apex:outputText value="{!rl.lotQty}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, FALSE, TRUE)}" />     
            </apex:column>
            <apex:column style="width:50px">
                <apex:commandLink value="Delete" action="{!deleteWOLot}" rerender="woltable,woltableblock" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, TRUE, FALSE)}"> 
                    <apex:param name="delWol" value="{!rl.wolId}"/>
                    <apex:param name="delcol" value="{!rn}"/>
                </apex:commandLink>
            </apex:column> 
           
            <apex:variable var="rn" value="{!rn+1}"/>
        </apex:pageBlockTable>
        <!--</apex:pageBlockSection>-->
        <apex:commandButton value="Add New" action="{!addNewWOLot}" rerender="woltable,woltableblock" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED, TRUE, FALSE)}" />
        <apex:commandButton value="Save and Return" action="{!SaveWOLot}" rendered="{!IF(workOrder.Approval_Status__c = STATUS_DRAFT || workOrder.Approval_Status__c = STATUS_REJECTED || workOrder.Approval_Status__c = STATUS_ZONE_88, TRUE, FALSE)}" />
        <div id="rmaModal"></div>
        
    </apex:pageBlock> 
    </apex:form> 
</apex:page>