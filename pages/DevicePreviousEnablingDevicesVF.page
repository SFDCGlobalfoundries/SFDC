<!--
    Author: Zymark Ambat
    Description: This page is used for Device Previous Enabling Devices.
    History: 
        ZAmbat      11122013    - Page creation.
-->

<apex:page id="DevicePreviousEnablingDevicesVF" controller="DevicePreviousEnablingDevicesController" showHeader="true" sidebar="true" tabStyle="Device__c">
	<style>
		.next {
			background-image: url(/img/paginationArrows.gif);
			background-repeat: no-repeat;
			background-position: -17px 1px;
			width: 9px;
			height: 10px;
		}
		
		.nextoff {
			background-image: url(/img/paginationArrows.gif);
			background-repeat: no-repeat;
			background-position: -17px -10px;
			width: 9px;
			height: 10px;
		}
		
		.prev {
			background-image: url(/img/paginationArrows.gif);
			background-repeat: no-repeat;
			background-position: -10px 1px;
			margin: 0;
			padding: 0;
			width: 9px;
			height: 10px;
		}
		
		.prevoff {
			background-image: url(/img/paginationArrows.gif);
			background-repeat: no-repeat;
			background-position: -10px -10px;
			margin: 0;
			padding: 0;
			width: 9px;
			height: 10px;
		}
	</style>
	
	<script>
		function captureKey(e) {
			if (e.keyCode == 13) {
				searchDevices();
			}
			
			return true;
		}
	</script>
	
	<apex:form id="form1">
		<apex:pageBlock title="Previous Enabling Devices" mode="detail">
			<apex:pageMessages />
			<apex:pageBlockButtons >
            	<apex:commandButton value="Cancel" immediate="true" action="{!URLFOR($Action.Device__c.View, deviceId)}" />
            </apex:pageBlockButtons>
            
            <apex:pageBlockSection title="Search Device" collapsible="false">
            	<apex:outputPanel layout="inline">
            		<apex:inputText value="{!searchKey}" onkeypress="return captureKey(event);" />
            		<apex:commandButton value="Search" action="{!searchDevices}" />
            	</apex:outputPanel>
            </apex:pageBlockSection>
            
            <apex:pageBlockTable id="deviceTbl" columns="6" value="{!listDevices}" var="d">
            	<apex:column >
            		<apex:facet name="header">Action</apex:facet>
            		<apex:commandLink value="Select" action="{!save}">
            			<apex:param name="selectedMPW" value="{!d.MPW_Train_Number__c}" assignTo="{!selectedMPW}"/>
            		</apex:commandLink>
            	</apex:column>
            	<apex:column >
            		<apex:facet name="header">MPW Train No.</apex:facet>
            		<apex:outputLink value="/{!d.MPW_Train_Number__c}" target="_blank">
            			{!d.MPW_Train_Number__r.Name}
            		</apex:outputLink>
            	</apex:column>
            	<apex:column value="{!d.Geometry__c}">
            		<apex:facet name="header">Geometry</apex:facet>
            	</apex:column>
            	<apex:column >
            		<apex:facet name="header">Device</apex:facet>
            		<apex:outputLink value="/{!d.Id}" target="_blank">
            			{!d.Name}
            		</apex:outputLink>
            	</apex:column>
            	<apex:column value="{!d.CRMDID__c}">
            		<apex:facet name="header">CRM DID</apex:facet>
            	</apex:column>
            	<apex:column value="{!d.Process_Family__c}">
            		<apex:facet name="header">Process Family</apex:facet>
            	</apex:column>
            </apex:pageBlockTable>

           	<apex:outputPanel id="controlPanel" layout="inline" rendered="{!IF(listTotalDevices.size > 0, true, false)}">
           		<apex:actionRegion >
	           		<apex:commandLink action="{!previous}" rendered="{!HasPrevious}" rerender="deviceTbl, controlPanel" style="text-decoration: none; color: #333;">
	           			<img src="/s.gif" title="Previous" alt="Previous" class="prev" />Previous
	           		</apex:commandLink>
	           		<apex:outputPanel layout="inline" rendered="{!NOT(HasPrevious)}">
	           			<img src="/s.gif" alt="Previous" class="prevoff" />
	           			<apex:outputText style="color: #a8a8a8;" value="Previous" />
	           		</apex:outputPanel>
	           		
	           		&nbsp;&nbsp;&nbsp;
	           		<apex:outputText value="     {!fromNo} - {!toNo} of {!totalNoOfRecords}     " />
	           		&nbsp;&nbsp;&nbsp;
	           		
	           		<apex:commandLink action="{!next}" rendered="{!HasNext}" rerender="deviceTbl, controlPanel" style="text-decoration: none; color: #333;">
	           			Next<img src="/s.gif" title="Next" alt="Next" class="next" />
	           		</apex:commandLink>
	           		<apex:outputPanel layout="inline" rendered="{!NOT(HasNext)}" style="color: #a8a8a8;">
	           			<apex:outputText style="color: #a8a8a8;" value="Next" />
	           			<img src="/s.gif" alt="Next" class="nextoff" />
	           		</apex:outputPanel>
	           	</apex:actionRegion>
           	</apex:outputPanel>

           	<apex:outputPanel layout="inline" rendered="{!IF(listTotalDevices.size <= 0, true, false)}">
           		No records found.
           	</apex:outputPanel> 
           	
           	<apex:actionFunction name="searchDevices" action="{!searchDevices}" />
		</apex:pageBlock>
	</apex:form>
</apex:page>